{
  "version": 3,
  "sources": ["../../../create-react-class/factory.js", "../../../create-react-class/index.js", "../../../date-now/index.js", "../../../debounce/index.js", "../../../md5-o-matic/lib/md5omatic.js", "../../../@rexxars/react-json-inspector/lib/uid.js", "../../../@rexxars/react-json-inspector/lib/type.js", "../../../@rexxars/react-json-inspector/lib/is-primitive.js", "../../../@rexxars/react-json-inspector/lib/highlighter.js", "../../../@rexxars/react-json-inspector/lib/leaf.js", "../../../@rexxars/react-json-inspector/lib/noop.js", "../../../@rexxars/react-json-inspector/lib/search-bar.js", "../../../@rexxars/react-json-inspector/lib/is-empty.js", "../../../@rexxars/react-json-inspector/lib/filterer.js", "../../../@rexxars/react-json-inspector/lib/lens.js", "../../../@rexxars/react-json-inspector/json-inspector.js", "../../../hashlru/index.js", "../../../sanity/src/desk/components/RenderActionCollectionState.tsx", "../../../sanity/src/desk/components/RenderBadgeCollectionState.tsx", "../../../sanity/src/desk/components/paneRouter/PaneRouterProvider.tsx", "../../../sanity/src/desk/components/pane/helpers/_calcPaneResize.ts", "../../../sanity/src/desk/components/pane/helpers/_getDOMPath.ts", "../../../sanity/src/desk/components/pane/helpers/_sortElements.ts", "../../../sanity/src/desk/components/pane/paneLayoutController.ts", "../../../sanity/src/desk/components/pane/PaneLayout.tsx", "../../../sanity/src/desk/panes/document/documentInspector/DocumentInspectorPanel.tsx", "../../../sanity/src/desk/structureResolvers/PaneResolutionError.ts", "../../../sanity/src/desk/structureResolvers/assignId.ts", "../../../sanity/src/desk/structureResolvers/memoBind.ts", "../../../sanity/src/desk/structureResolvers/createPaneResolver.ts", "../../../sanity/src/desk/structureResolvers/resolveIntent.ts", "../../../sanity/src/desk/structureResolvers/createResolvedPaneNodeStream.ts", "../../../sanity/src/desk/structureResolvers/useResolvedPanes.ts", "../../../sanity/src/desk/components/deskTool/intentResolver/utils.ts", "../../../sanity/src/desk/components/deskTool/intentResolver/IntentResolver.tsx", "../../../sanity/src/desk/components/deskTool/StructureError.tsx", "../../../sanity/src/desk/panes/unknown/UnknownPaneType.tsx", "../../../sanity/src/desk/panes/loading/getWaitMessages.ts", "../../../sanity/src/desk/panes/loading/LoadingPane.tsx", "../../../sanity/src/desk/panes/DeskToolPane.tsx", "../../../sanity/src/desk/panes/error/ErrorPane.tsx", "../../../sanity/src/desk/panes/document/DocumentOperationResults.tsx", "../../../sanity/src/desk/useDeskToolSetting.ts", "../../../sanity/src/desk/panes/document/inspectDialog/constants.ts", "../../../sanity/src/desk/panes/document/inspectDialog/helpers.ts", "../../../sanity/src/desk/panes/document/inspectDialog/InspectDialog.styles.tsx", "../../../sanity/src/desk/panes/document/inspectDialog/Search.tsx", "../../../sanity/src/desk/panes/document/inspectDialog/InspectDialog.tsx", "../../../sanity/src/desk/panes/document/documentPanel/DeletedDocumentBanner.tsx", "../../../sanity/src/desk/panes/document/documentPanel/ReferenceChangedBanner.tsx", "../../../sanity/src/desk/panes/document/documentPanel/PermissionCheckBanner.tsx", "../../../sanity/src/desk/panes/document/documentPanel/documentViews/useConditionalToast.ts", "../../../sanity/src/desk/panes/document/documentPanel/documentViews/FormView.tsx", "../../../sanity/src/desk/panes/document/documentPanel/header/DocumentHeaderTabs.tsx", "../../../sanity/src/desk/panes/document/documentPanel/header/DocumentHeaderTitle.tsx", "../../../sanity/src/desk/panes/document/documentPanel/header/DocumentPanelHeader.tsx", "../../../sanity/src/desk/panes/document/documentPanel/DocumentPanel.tsx", "../../../sanity/src/desk/panes/document/statusBar/dialogs/constants.ts", "../../../sanity/src/desk/panes/document/statusBar/dialogs/ConfirmDialog.tsx", "../../../sanity/src/desk/panes/document/statusBar/dialogs/ModalDialog.tsx", "../../../sanity/src/desk/panes/document/statusBar/dialogs/PopoverDialog.tsx", "../../../sanity/src/desk/panes/document/statusBar/ActionStateDialog.tsx", "../../../sanity/src/desk/panes/document/statusBar/ActionMenuButton.tsx", "../../../sanity/src/desk/panes/document/statusBar/DocumentStatusBarActions.tsx", "../../../sanity/src/desk/panes/document/statusBar/sparkline/DocumentBadges.tsx", "../../../sanity/src/desk/panes/document/statusBar/sparkline/PublishStatus.tsx", "../../../sanity/src/desk/panes/document/statusBar/sparkline/ReviewChangesButton/AnimatedStatusIcon.tsx", "../../../sanity/src/desk/panes/document/statusBar/sparkline/ReviewChangesButton/ReviewChangesButton.tsx", "../../../sanity/src/desk/panes/document/statusBar/sparkline/DocumentSparkline.tsx", "../../../sanity/src/desk/panes/document/statusBar/DocumentStatusBar.tsx", "../../../sanity/src/desk/panes/document/keyboardShortcuts/DocumentActionShortcuts.tsx", "../../../sanity/src/desk/panes/document/DocumentPane.tsx", "../../../sanity/src/desk/components/deskTool/NoDocumentTypesScreen.tsx", "../../../sanity/src/desk/components/deskTool/DeskTitle.tsx", "../../../sanity/src/desk/components/deskTool/DeskTool.tsx", "../../../sanity/src/desk/components/deskTool/DeskToolBoundary.tsx"],
  "sourcesContent": ["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar _assign = require('object-assign');\n\n// -- Inlined from fbjs --\n\nvar emptyObject = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  Object.freeze(emptyObject);\n}\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction _invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nvar warning = function(){};\n\nif (process.env.NODE_ENV !== 'production') {\n  var printWarning = function printWarning(format) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  warning = function warning(condition, format) {\n    if (format === undefined) {\n      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (format.indexOf('Failed Composite propType: ') === 0) {\n      return; // Ignore CompositeComponent proptype check.\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(undefined, [format].concat(args));\n    }\n  };\n}\n\n// /-- Inlined from fbjs --\n\nvar MIXINS_KEY = 'mixins';\n\n// Helper function to allow the creation of anonymous functions which do not\n// have .name set to the name of the variable being assigned to.\nfunction identity(fn) {\n  return fn;\n}\n\nvar ReactPropTypeLocationNames;\nif (process.env.NODE_ENV !== 'production') {\n  ReactPropTypeLocationNames = {\n    prop: 'prop',\n    context: 'context',\n    childContext: 'child context'\n  };\n} else {\n  ReactPropTypeLocationNames = {};\n}\n\nfunction factory(ReactComponent, isValidElement, ReactNoopUpdateQueue) {\n  /**\n   * Policies that describe methods in `ReactClassInterface`.\n   */\n\n  var injectedMixins = [];\n\n  /**\n   * Composite components are higher-level components that compose other composite\n   * or host components.\n   *\n   * To create a new type of `ReactClass`, pass a specification of\n   * your new class to `React.createClass`. The only requirement of your class\n   * specification is that you implement a `render` method.\n   *\n   *   var MyComponent = React.createClass({\n   *     render: function() {\n   *       return <div>Hello World</div>;\n   *     }\n   *   });\n   *\n   * The class specification supports a specific protocol of methods that have\n   * special meaning (e.g. `render`). See `ReactClassInterface` for\n   * more the comprehensive protocol. Any other properties and methods in the\n   * class specification will be available on the prototype.\n   *\n   * @interface ReactClassInterface\n   * @internal\n   */\n  var ReactClassInterface = {\n    /**\n     * An array of Mixin objects to include when defining your component.\n     *\n     * @type {array}\n     * @optional\n     */\n    mixins: 'DEFINE_MANY',\n\n    /**\n     * An object containing properties and methods that should be defined on\n     * the component's constructor instead of its prototype (static methods).\n     *\n     * @type {object}\n     * @optional\n     */\n    statics: 'DEFINE_MANY',\n\n    /**\n     * Definition of prop types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    propTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    contextTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types this component sets for its children.\n     *\n     * @type {object}\n     * @optional\n     */\n    childContextTypes: 'DEFINE_MANY',\n\n    // ==== Definition methods ====\n\n    /**\n     * Invoked when the component is mounted. Values in the mapping will be set on\n     * `this.props` if that prop is not specified (i.e. using an `in` check).\n     *\n     * This method is invoked before `getInitialState` and therefore cannot rely\n     * on `this.state` or use `this.setState`.\n     *\n     * @return {object}\n     * @optional\n     */\n    getDefaultProps: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Invoked once before the component is mounted. The return value will be used\n     * as the initial value of `this.state`.\n     *\n     *   getInitialState: function() {\n     *     return {\n     *       isOn: false,\n     *       fooBaz: new BazFoo()\n     *     }\n     *   }\n     *\n     * @return {object}\n     * @optional\n     */\n    getInitialState: 'DEFINE_MANY_MERGED',\n\n    /**\n     * @return {object}\n     * @optional\n     */\n    getChildContext: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Uses props from `this.props` and state from `this.state` to render the\n     * structure of the component.\n     *\n     * No guarantees are made about when or how often this method is invoked, so\n     * it must not have side effects.\n     *\n     *   render: function() {\n     *     var name = this.props.name;\n     *     return <div>Hello, {name}!</div>;\n     *   }\n     *\n     * @return {ReactComponent}\n     * @required\n     */\n    render: 'DEFINE_ONCE',\n\n    // ==== Delegate methods ====\n\n    /**\n     * Invoked when the component is initially created and about to be mounted.\n     * This may have side effects, but any external subscriptions or data created\n     * by this method must be cleaned up in `componentWillUnmount`.\n     *\n     * @optional\n     */\n    componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component has been mounted and has a DOM representation.\n     * However, there is no guarantee that the DOM node is in the document.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been mounted (initialized and rendered) for the first time.\n     *\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked before the component receives new props.\n     *\n     * Use this as an opportunity to react to a prop transition by updating the\n     * state using `this.setState`. Current props are accessed via `this.props`.\n     *\n     *   componentWillReceiveProps: function(nextProps, nextContext) {\n     *     this.setState({\n     *       likesIncreasing: nextProps.likeCount > this.props.likeCount\n     *     });\n     *   }\n     *\n     * NOTE: There is no equivalent `componentWillReceiveState`. An incoming prop\n     * transition may cause a state change, but the opposite is not true. If you\n     * need it, you are probably looking for `componentWillUpdate`.\n     *\n     * @param {object} nextProps\n     * @optional\n     */\n    componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Invoked while deciding if the component should be updated as a result of\n     * receiving new props, state and/or context.\n     *\n     * Use this as an opportunity to `return false` when you're certain that the\n     * transition to the new props/state/context will not require a component\n     * update.\n     *\n     *   shouldComponentUpdate: function(nextProps, nextState, nextContext) {\n     *     return !equal(nextProps, this.props) ||\n     *       !equal(nextState, this.state) ||\n     *       !equal(nextContext, this.context);\n     *   }\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @return {boolean} True if the component should update.\n     * @optional\n     */\n    shouldComponentUpdate: 'DEFINE_ONCE',\n\n    /**\n     * Invoked when the component is about to update due to a transition from\n     * `this.props`, `this.state` and `this.context` to `nextProps`, `nextState`\n     * and `nextContext`.\n     *\n     * Use this as an opportunity to perform preparation before an update occurs.\n     *\n     * NOTE: You **cannot** use `this.setState()` in this method.\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @param {ReactReconcileTransaction} transaction\n     * @optional\n     */\n    componentWillUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component's DOM representation has been updated.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been updated.\n     *\n     * @param {object} prevProps\n     * @param {?object} prevState\n     * @param {?object} prevContext\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component is about to be removed from its parent and have\n     * its DOM representation destroyed.\n     *\n     * Use this as an opportunity to deallocate any external resources.\n     *\n     * NOTE: There is no `componentDidUnmount` since your component will have been\n     * destroyed by that point.\n     *\n     * @optional\n     */\n    componentWillUnmount: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillMount`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillReceiveProps`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Replacement for (deprecated) `componentWillUpdate`.\n     *\n     * @optional\n     */\n    UNSAFE_componentWillUpdate: 'DEFINE_MANY',\n\n    // ==== Advanced methods ====\n\n    /**\n     * Updates the component's currently mounted DOM representation.\n     *\n     * By default, this implements React's rendering and reconciliation algorithm.\n     * Sophisticated clients may wish to override this.\n     *\n     * @param {ReactReconcileTransaction} transaction\n     * @internal\n     * @overridable\n     */\n    updateComponent: 'OVERRIDE_BASE'\n  };\n\n  /**\n   * Similar to ReactClassInterface but for static methods.\n   */\n  var ReactClassStaticInterface = {\n    /**\n     * This method is invoked after a component is instantiated and when it\n     * receives new props. Return an object to update state in response to\n     * prop changes. Return null to indicate no change to state.\n     *\n     * If an object is returned, its keys will be merged into the existing state.\n     *\n     * @return {object || null}\n     * @optional\n     */\n    getDerivedStateFromProps: 'DEFINE_MANY_MERGED'\n  };\n\n  /**\n   * Mapping from class specification keys to special processing functions.\n   *\n   * Although these are declared like instance properties in the specification\n   * when defining classes using `React.createClass`, they are actually static\n   * and are accessible on the constructor instead of the prototype. Despite\n   * being static, they must be defined outside of the \"statics\" key under\n   * which all other static methods are defined.\n   */\n  var RESERVED_SPEC_KEYS = {\n    displayName: function(Constructor, displayName) {\n      Constructor.displayName = displayName;\n    },\n    mixins: function(Constructor, mixins) {\n      if (mixins) {\n        for (var i = 0; i < mixins.length; i++) {\n          mixSpecIntoComponent(Constructor, mixins[i]);\n        }\n      }\n    },\n    childContextTypes: function(Constructor, childContextTypes) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateTypeDef(Constructor, childContextTypes, 'childContext');\n      }\n      Constructor.childContextTypes = _assign(\n        {},\n        Constructor.childContextTypes,\n        childContextTypes\n      );\n    },\n    contextTypes: function(Constructor, contextTypes) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateTypeDef(Constructor, contextTypes, 'context');\n      }\n      Constructor.contextTypes = _assign(\n        {},\n        Constructor.contextTypes,\n        contextTypes\n      );\n    },\n    /**\n     * Special case getDefaultProps which should move into statics but requires\n     * automatic merging.\n     */\n    getDefaultProps: function(Constructor, getDefaultProps) {\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps = createMergedResultFunction(\n          Constructor.getDefaultProps,\n          getDefaultProps\n        );\n      } else {\n        Constructor.getDefaultProps = getDefaultProps;\n      }\n    },\n    propTypes: function(Constructor, propTypes) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateTypeDef(Constructor, propTypes, 'prop');\n      }\n      Constructor.propTypes = _assign({}, Constructor.propTypes, propTypes);\n    },\n    statics: function(Constructor, statics) {\n      mixStaticSpecIntoComponent(Constructor, statics);\n    },\n    autobind: function() {}\n  };\n\n  function validateTypeDef(Constructor, typeDef, location) {\n    for (var propName in typeDef) {\n      if (typeDef.hasOwnProperty(propName)) {\n        // use a warning instead of an _invariant so components\n        // don't show up in prod but only in __DEV__\n        if (process.env.NODE_ENV !== 'production') {\n          warning(\n            typeof typeDef[propName] === 'function',\n            '%s: %s type `%s` is invalid; it must be a function, usually from ' +\n              'React.PropTypes.',\n            Constructor.displayName || 'ReactClass',\n            ReactPropTypeLocationNames[location],\n            propName\n          );\n        }\n      }\n    }\n  }\n\n  function validateMethodOverride(isAlreadyDefined, name) {\n    var specPolicy = ReactClassInterface.hasOwnProperty(name)\n      ? ReactClassInterface[name]\n      : null;\n\n    // Disallow overriding of base class methods unless explicitly allowed.\n    if (ReactClassMixin.hasOwnProperty(name)) {\n      _invariant(\n        specPolicy === 'OVERRIDE_BASE',\n        'ReactClassInterface: You are attempting to override ' +\n          '`%s` from your class specification. Ensure that your method names ' +\n          'do not overlap with React methods.',\n        name\n      );\n    }\n\n    // Disallow defining methods more than once unless explicitly allowed.\n    if (isAlreadyDefined) {\n      _invariant(\n        specPolicy === 'DEFINE_MANY' || specPolicy === 'DEFINE_MANY_MERGED',\n        'ReactClassInterface: You are attempting to define ' +\n          '`%s` on your component more than once. This conflict may be due ' +\n          'to a mixin.',\n        name\n      );\n    }\n  }\n\n  /**\n   * Mixin helper which handles policy validation and reserved\n   * specification keys when building React classes.\n   */\n  function mixSpecIntoComponent(Constructor, spec) {\n    if (!spec) {\n      if (process.env.NODE_ENV !== 'production') {\n        var typeofSpec = typeof spec;\n        var isMixinValid = typeofSpec === 'object' && spec !== null;\n\n        if (process.env.NODE_ENV !== 'production') {\n          warning(\n            isMixinValid,\n            \"%s: You're attempting to include a mixin that is either null \" +\n              'or not an object. Check the mixins included by the component, ' +\n              'as well as any mixins they include themselves. ' +\n              'Expected object but got %s.',\n            Constructor.displayName || 'ReactClass',\n            spec === null ? null : typeofSpec\n          );\n        }\n      }\n\n      return;\n    }\n\n    _invariant(\n      typeof spec !== 'function',\n      \"ReactClass: You're attempting to \" +\n        'use a component class or function as a mixin. Instead, just use a ' +\n        'regular object.'\n    );\n    _invariant(\n      !isValidElement(spec),\n      \"ReactClass: You're attempting to \" +\n        'use a component as a mixin. Instead, just use a regular object.'\n    );\n\n    var proto = Constructor.prototype;\n    var autoBindPairs = proto.__reactAutoBindPairs;\n\n    // By handling mixins before any other properties, we ensure the same\n    // chaining order is applied to methods with DEFINE_MANY policy, whether\n    // mixins are listed before or after these methods in the spec.\n    if (spec.hasOwnProperty(MIXINS_KEY)) {\n      RESERVED_SPEC_KEYS.mixins(Constructor, spec.mixins);\n    }\n\n    for (var name in spec) {\n      if (!spec.hasOwnProperty(name)) {\n        continue;\n      }\n\n      if (name === MIXINS_KEY) {\n        // We have already handled mixins in a special case above.\n        continue;\n      }\n\n      var property = spec[name];\n      var isAlreadyDefined = proto.hasOwnProperty(name);\n      validateMethodOverride(isAlreadyDefined, name);\n\n      if (RESERVED_SPEC_KEYS.hasOwnProperty(name)) {\n        RESERVED_SPEC_KEYS[name](Constructor, property);\n      } else {\n        // Setup methods on prototype:\n        // The following member methods should not be automatically bound:\n        // 1. Expected ReactClass methods (in the \"interface\").\n        // 2. Overridden methods (that were mixed in).\n        var isReactClassMethod = ReactClassInterface.hasOwnProperty(name);\n        var isFunction = typeof property === 'function';\n        var shouldAutoBind =\n          isFunction &&\n          !isReactClassMethod &&\n          !isAlreadyDefined &&\n          spec.autobind !== false;\n\n        if (shouldAutoBind) {\n          autoBindPairs.push(name, property);\n          proto[name] = property;\n        } else {\n          if (isAlreadyDefined) {\n            var specPolicy = ReactClassInterface[name];\n\n            // These cases should already be caught by validateMethodOverride.\n            _invariant(\n              isReactClassMethod &&\n                (specPolicy === 'DEFINE_MANY_MERGED' ||\n                  specPolicy === 'DEFINE_MANY'),\n              'ReactClass: Unexpected spec policy %s for key %s ' +\n                'when mixing in component specs.',\n              specPolicy,\n              name\n            );\n\n            // For methods which are defined more than once, call the existing\n            // methods before calling the new property, merging if appropriate.\n            if (specPolicy === 'DEFINE_MANY_MERGED') {\n              proto[name] = createMergedResultFunction(proto[name], property);\n            } else if (specPolicy === 'DEFINE_MANY') {\n              proto[name] = createChainedFunction(proto[name], property);\n            }\n          } else {\n            proto[name] = property;\n            if (process.env.NODE_ENV !== 'production') {\n              // Add verbose displayName to the function, which helps when looking\n              // at profiling tools.\n              if (typeof property === 'function' && spec.displayName) {\n                proto[name].displayName = spec.displayName + '_' + name;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function mixStaticSpecIntoComponent(Constructor, statics) {\n    if (!statics) {\n      return;\n    }\n\n    for (var name in statics) {\n      var property = statics[name];\n      if (!statics.hasOwnProperty(name)) {\n        continue;\n      }\n\n      var isReserved = name in RESERVED_SPEC_KEYS;\n      _invariant(\n        !isReserved,\n        'ReactClass: You are attempting to define a reserved ' +\n          'property, `%s`, that shouldn\\'t be on the \"statics\" key. Define it ' +\n          'as an instance property instead; it will still be accessible on the ' +\n          'constructor.',\n        name\n      );\n\n      var isAlreadyDefined = name in Constructor;\n      if (isAlreadyDefined) {\n        var specPolicy = ReactClassStaticInterface.hasOwnProperty(name)\n          ? ReactClassStaticInterface[name]\n          : null;\n\n        _invariant(\n          specPolicy === 'DEFINE_MANY_MERGED',\n          'ReactClass: You are attempting to define ' +\n            '`%s` on your component more than once. This conflict may be ' +\n            'due to a mixin.',\n          name\n        );\n\n        Constructor[name] = createMergedResultFunction(Constructor[name], property);\n\n        return;\n      }\n\n      Constructor[name] = property;\n    }\n  }\n\n  /**\n   * Merge two objects, but throw if both contain the same key.\n   *\n   * @param {object} one The first object, which is mutated.\n   * @param {object} two The second object\n   * @return {object} one after it has been mutated to contain everything in two.\n   */\n  function mergeIntoWithNoDuplicateKeys(one, two) {\n    _invariant(\n      one && two && typeof one === 'object' && typeof two === 'object',\n      'mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.'\n    );\n\n    for (var key in two) {\n      if (two.hasOwnProperty(key)) {\n        _invariant(\n          one[key] === undefined,\n          'mergeIntoWithNoDuplicateKeys(): ' +\n            'Tried to merge two objects with the same key: `%s`. This conflict ' +\n            'may be due to a mixin; in particular, this may be caused by two ' +\n            'getInitialState() or getDefaultProps() methods returning objects ' +\n            'with clashing keys.',\n          key\n        );\n        one[key] = two[key];\n      }\n    }\n    return one;\n  }\n\n  /**\n   * Creates a function that invokes two functions and merges their return values.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createMergedResultFunction(one, two) {\n    return function mergedResult() {\n      var a = one.apply(this, arguments);\n      var b = two.apply(this, arguments);\n      if (a == null) {\n        return b;\n      } else if (b == null) {\n        return a;\n      }\n      var c = {};\n      mergeIntoWithNoDuplicateKeys(c, a);\n      mergeIntoWithNoDuplicateKeys(c, b);\n      return c;\n    };\n  }\n\n  /**\n   * Creates a function that invokes two functions and ignores their return vales.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createChainedFunction(one, two) {\n    return function chainedFunction() {\n      one.apply(this, arguments);\n      two.apply(this, arguments);\n    };\n  }\n\n  /**\n   * Binds a method to the component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   * @param {function} method Method to be bound.\n   * @return {function} The bound method.\n   */\n  function bindAutoBindMethod(component, method) {\n    var boundMethod = method.bind(component);\n    if (process.env.NODE_ENV !== 'production') {\n      boundMethod.__reactBoundContext = component;\n      boundMethod.__reactBoundMethod = method;\n      boundMethod.__reactBoundArguments = null;\n      var componentName = component.constructor.displayName;\n      var _bind = boundMethod.bind;\n      boundMethod.bind = function(newThis) {\n        for (\n          var _len = arguments.length,\n            args = Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        // User is trying to bind() an autobound method; we effectively will\n        // ignore the value of \"this\" that the user is trying to use, so\n        // let's warn.\n        if (newThis !== component && newThis !== null) {\n          if (process.env.NODE_ENV !== 'production') {\n            warning(\n              false,\n              'bind(): React component methods may only be bound to the ' +\n                'component instance. See %s',\n              componentName\n            );\n          }\n        } else if (!args.length) {\n          if (process.env.NODE_ENV !== 'production') {\n            warning(\n              false,\n              'bind(): You are binding a component method to the component. ' +\n                'React does this for you automatically in a high-performance ' +\n                'way, so you can safely remove this call. See %s',\n              componentName\n            );\n          }\n          return boundMethod;\n        }\n        var reboundMethod = _bind.apply(boundMethod, arguments);\n        reboundMethod.__reactBoundContext = component;\n        reboundMethod.__reactBoundMethod = method;\n        reboundMethod.__reactBoundArguments = args;\n        return reboundMethod;\n      };\n    }\n    return boundMethod;\n  }\n\n  /**\n   * Binds all auto-bound methods in a component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   */\n  function bindAutoBindMethods(component) {\n    var pairs = component.__reactAutoBindPairs;\n    for (var i = 0; i < pairs.length; i += 2) {\n      var autoBindKey = pairs[i];\n      var method = pairs[i + 1];\n      component[autoBindKey] = bindAutoBindMethod(component, method);\n    }\n  }\n\n  var IsMountedPreMixin = {\n    componentDidMount: function() {\n      this.__isMounted = true;\n    }\n  };\n\n  var IsMountedPostMixin = {\n    componentWillUnmount: function() {\n      this.__isMounted = false;\n    }\n  };\n\n  /**\n   * Add more to the ReactClass base class. These are all legacy features and\n   * therefore not already part of the modern ReactComponent.\n   */\n  var ReactClassMixin = {\n    /**\n     * TODO: This will be deprecated because state should always keep a consistent\n     * type signature and the only use case for this, is to avoid that.\n     */\n    replaceState: function(newState, callback) {\n      this.updater.enqueueReplaceState(this, newState, callback);\n    },\n\n    /**\n     * Checks whether or not this composite component is mounted.\n     * @return {boolean} True if mounted, false otherwise.\n     * @protected\n     * @final\n     */\n    isMounted: function() {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(\n          this.__didWarnIsMounted,\n          '%s: isMounted is deprecated. Instead, make sure to clean up ' +\n            'subscriptions and pending requests in componentWillUnmount to ' +\n            'prevent memory leaks.',\n          (this.constructor && this.constructor.displayName) ||\n            this.name ||\n            'Component'\n        );\n        this.__didWarnIsMounted = true;\n      }\n      return !!this.__isMounted;\n    }\n  };\n\n  var ReactClassComponent = function() {};\n  _assign(\n    ReactClassComponent.prototype,\n    ReactComponent.prototype,\n    ReactClassMixin\n  );\n\n  /**\n   * Creates a composite component class given a class specification.\n   * See https://facebook.github.io/react/docs/top-level-api.html#react.createclass\n   *\n   * @param {object} spec Class specification (which must define `render`).\n   * @return {function} Component constructor function.\n   * @public\n   */\n  function createClass(spec) {\n    // To keep our warnings more understandable, we'll use a little hack here to\n    // ensure that Constructor.name !== 'Constructor'. This makes sure we don't\n    // unnecessarily identify a class without displayName as 'Constructor'.\n    var Constructor = identity(function(props, context, updater) {\n      // This constructor gets overridden by mocks. The argument is used\n      // by mocks to assert on what gets mounted.\n\n      if (process.env.NODE_ENV !== 'production') {\n        warning(\n          this instanceof Constructor,\n          'Something is calling a React component directly. Use a factory or ' +\n            'JSX instead. See: https://fb.me/react-legacyfactory'\n        );\n      }\n\n      // Wire up auto-binding\n      if (this.__reactAutoBindPairs.length) {\n        bindAutoBindMethods(this);\n      }\n\n      this.props = props;\n      this.context = context;\n      this.refs = emptyObject;\n      this.updater = updater || ReactNoopUpdateQueue;\n\n      this.state = null;\n\n      // ReactClasses doesn't have constructors. Instead, they use the\n      // getInitialState and componentWillMount methods for initialization.\n\n      var initialState = this.getInitialState ? this.getInitialState() : null;\n      if (process.env.NODE_ENV !== 'production') {\n        // We allow auto-mocks to proceed as if they're returning null.\n        if (\n          initialState === undefined &&\n          this.getInitialState._isMockFunction\n        ) {\n          // This is probably bad practice. Consider warning here and\n          // deprecating this convenience.\n          initialState = null;\n        }\n      }\n      _invariant(\n        typeof initialState === 'object' && !Array.isArray(initialState),\n        '%s.getInitialState(): must return an object or null',\n        Constructor.displayName || 'ReactCompositeComponent'\n      );\n\n      this.state = initialState;\n    });\n    Constructor.prototype = new ReactClassComponent();\n    Constructor.prototype.constructor = Constructor;\n    Constructor.prototype.__reactAutoBindPairs = [];\n\n    injectedMixins.forEach(mixSpecIntoComponent.bind(null, Constructor));\n\n    mixSpecIntoComponent(Constructor, IsMountedPreMixin);\n    mixSpecIntoComponent(Constructor, spec);\n    mixSpecIntoComponent(Constructor, IsMountedPostMixin);\n\n    // Initialize the defaultProps property after all mixins have been merged.\n    if (Constructor.getDefaultProps) {\n      Constructor.defaultProps = Constructor.getDefaultProps();\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // This is a tag to indicate that the use of these method names is ok,\n      // since it's used with createClass. If it's not, then it's likely a\n      // mistake so we'll warn you to use the static property, property\n      // initializer or constructor respectively.\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps.isReactClassApproved = {};\n      }\n      if (Constructor.prototype.getInitialState) {\n        Constructor.prototype.getInitialState.isReactClassApproved = {};\n      }\n    }\n\n    _invariant(\n      Constructor.prototype.render,\n      'createClass(...): Class specification must implement a `render` method.'\n    );\n\n    if (process.env.NODE_ENV !== 'production') {\n      warning(\n        !Constructor.prototype.componentShouldUpdate,\n        '%s has a method called ' +\n          'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' +\n          'The name is phrased as a question because the function is ' +\n          'expected to return a value.',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.componentWillRecieveProps,\n        '%s has a method called ' +\n          'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.UNSAFE_componentWillRecieveProps,\n        '%s has a method called UNSAFE_componentWillRecieveProps(). ' +\n          'Did you mean UNSAFE_componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n    }\n\n    // Reduce time spent doing lookups by setting these on the prototype.\n    for (var methodName in ReactClassInterface) {\n      if (!Constructor.prototype[methodName]) {\n        Constructor.prototype[methodName] = null;\n      }\n    }\n\n    return Constructor;\n  }\n\n  return createClass;\n}\n\nmodule.exports = factory;\n", "/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar React = require('react');\nvar factory = require('./factory');\n\nif (typeof React === 'undefined') {\n  throw Error(\n    'create-react-class could not find the React object. If you are using script tags, ' +\n      'make sure that React is being loaded before create-react-class.'\n  );\n}\n\n// Hack to grab NoopUpdateQueue from isomorphic React\nvar ReactNoopUpdateQueue = new React.Component().updater;\n\nmodule.exports = factory(\n  React.Component,\n  React.isValidElement,\n  ReactNoopUpdateQueue\n);\n", "module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n", "\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n", "\"use strict\";\n\n/**\n * Expose `md5omatic(str)`.\n */\n \nmodule.exports = md5omatic;\n\n/**\n * Hash any string using message digest.\n *\n * @param {String} str\n * @return {String}\n * @api public\n */\n \nfunction md5omatic(str) {\n    var x = str2blks_MD5(str);\n    var a =  1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d =  271733878;\n\n    for(var i=0; i<x.length; i += 16)\n    {\n        var olda = a;\n        var oldb = b;\n        var oldc = c;\n        var oldd = d;\n\n        a = ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n        d = ff(d, a, b, c, x[i+ 1], 12, -389564586);\n        c = ff(c, d, a, b, x[i+ 2], 17,  606105819);\n        b = ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n        a = ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n        d = ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n        c = ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n        b = ff(b, c, d, a, x[i+ 7], 22, -45705983);\n        a = ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n        d = ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n        c = ff(c, d, a, b, x[i+10], 17, -42063);\n        b = ff(b, c, d, a, x[i+11], 22, -1990404162);\n        a = ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n        d = ff(d, a, b, c, x[i+13], 12, -40341101);\n        c = ff(c, d, a, b, x[i+14], 17, -1502002290);\n        b = ff(b, c, d, a, x[i+15], 22,  1236535329);\n        a = gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n        d = gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n        c = gg(c, d, a, b, x[i+11], 14,  643717713);\n        b = gg(b, c, d, a, x[i+ 0], 20, -373897302);\n        a = gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n        d = gg(d, a, b, c, x[i+10], 9 ,  38016083);\n        c = gg(c, d, a, b, x[i+15], 14, -660478335);\n        b = gg(b, c, d, a, x[i+ 4], 20, -405537848);\n        a = gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n        d = gg(d, a, b, c, x[i+14], 9 , -1019803690);\n        c = gg(c, d, a, b, x[i+ 3], 14, -187363961);\n        b = gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n        a = gg(a, b, c, d, x[i+13], 5 , -1444681467);\n        d = gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n        c = gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n        b = gg(b, c, d, a, x[i+12], 20, -1926607734);\n        a = hh(a, b, c, d, x[i+ 5], 4 , -378558);\n        d = hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n        c = hh(c, d, a, b, x[i+11], 16,  1839030562);\n        b = hh(b, c, d, a, x[i+14], 23, -35309556);\n        a = hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n        d = hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n        c = hh(c, d, a, b, x[i+ 7], 16, -155497632);\n        b = hh(b, c, d, a, x[i+10], 23, -1094730640);\n        a = hh(a, b, c, d, x[i+13], 4 ,  681279174);\n        d = hh(d, a, b, c, x[i+ 0], 11, -358537222);\n        c = hh(c, d, a, b, x[i+ 3], 16, -722521979);\n        b = hh(b, c, d, a, x[i+ 6], 23,  76029189);\n        a = hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n        d = hh(d, a, b, c, x[i+12], 11, -421815835);\n        c = hh(c, d, a, b, x[i+15], 16,  530742520);\n        b = hh(b, c, d, a, x[i+ 2], 23, -995338651);\n        a = ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n        d = ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n        c = ii(c, d, a, b, x[i+14], 15, -1416354905);\n        b = ii(b, c, d, a, x[i+ 5], 21, -57434055);\n        a = ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n        d = ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n        c = ii(c, d, a, b, x[i+10], 15, -1051523);\n        b = ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n        a = ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n        d = ii(d, a, b, c, x[i+15], 10, -30611744);\n        c = ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n        b = ii(b, c, d, a, x[i+13], 21,  1309151649);\n        a = ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n        d = ii(d, a, b, c, x[i+11], 10, -1120210379);\n        c = ii(c, d, a, b, x[i+ 2], 15,  718787259);\n        b = ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n        a = addme(a, olda);\n        b = addme(b, oldb);\n        c = addme(c, oldc);\n        d = addme(d, oldd);\n    }\n\n    return rhex(a) + rhex(b) + rhex(c) + rhex(d);\n};\n\nvar hex_chr = \"0123456789abcdef\";\n\nfunction bitOR(a, b)\n{\n    var lsb = (a & 0x1) | (b & 0x1);\n    var msb31 = (a >>> 1) | (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction bitXOR(a, b)\n{\n    var lsb = (a & 0x1) ^ (b & 0x1);\n    var msb31 = (a >>> 1) ^ (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction bitAND(a, b)\n{\n    var lsb = (a & 0x1) & (b & 0x1);\n    var msb31 = (a >>> 1) & (b >>> 1);\n\n    return (msb31 << 1) | lsb;\n}\n\nfunction addme(x, y)\n{\n    var lsw = (x & 0xFFFF)+(y & 0xFFFF);\n    var msw = (x >> 16)+(y >> 16)+(lsw >> 16);\n\n    return (msw << 16) | (lsw & 0xFFFF);\n}\n\nfunction rhex(num)\n{\n    var str = \"\";\n    var j;\n\n    for(j=0; j<=3; j++)\n        str += hex_chr.charAt((num >> (j * 8 + 4)) & 0x0F) + hex_chr.charAt((num >> (j * 8)) & 0x0F);\n\n    return str;\n}\n\nfunction str2blks_MD5(str)\n{\n    var nblk = ((str.length + 8) >> 6) + 1;\n    var blks = new Array(nblk * 16);\n    var i;\n\n    for(i=0; i<nblk * 16; i++)\n        blks[i] = 0;\n\n    for(i=0; i<str.length; i++)\n        blks[i >> 2] |= str.charCodeAt(i) << (((str.length * 8 + i) % 4) * 8);\n\n    blks[i >> 2] |= 0x80 << (((str.length * 8 + i) % 4) * 8);\n\n    var l = str.length * 8;\n    blks[nblk * 16 - 2] = (l & 0xFF);\n    blks[nblk * 16 - 2] |= ((l >>> 8) & 0xFF) << 8;\n    blks[nblk * 16 - 2] |= ((l >>> 16) & 0xFF) << 16;\n    blks[nblk * 16 - 2] |= ((l >>> 24) & 0xFF) << 24;\n\n    return blks;\n}\n\nfunction rol(num, cnt)\n{\n    return (num << cnt) | (num >>> (32 - cnt));\n}\n\nfunction cmn(q, a, b, x, s, t)\n{\n    return addme(rol((addme(addme(a, q), addme(x, t))), s), b);\n}\n\nfunction ff(a, b, c, d, x, s, t)\n{\n    return cmn(bitOR(bitAND(b, c), bitAND((~b), d)), a, b, x, s, t);\n}\n\nfunction gg(a, b, c, d, x, s, t)\n{\n    return cmn(bitOR(bitAND(b, d), bitAND(c, (~d))), a, b, x, s, t);\n}\n\nfunction hh(a, b, c, d, x, s, t)\n{\n    return cmn(bitXOR(bitXOR(b, c), d), a, b, x, s, t);\n}\n\nfunction ii(a, b, c, d, x, s, t)\n{\n    return cmn(bitXOR(c, bitOR(b, (~d))), a, b, x, s, t);\n}", "var id = Math.ceil(Math.random() * 10);\n\nmodule.exports = function() {\n    return ++id;\n};\n", "module.exports = function(value) {\n    return Object.prototype.toString.call(value).slice(8, -1);\n};\n", "var type = require('./type');\n\nfunction isPrimitive(value) {\n    var t = type(value);\n    return t !== 'Object' && t !== 'Array';\n}\n\nmodule.exports = isPrimitive;\n", "var React = require('react');\nvar createReactClass = require('create-react-class');\nvar h = React.createElement;\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            string: '',\n            highlight: ''\n        };\n    },\n    shouldComponentUpdate: function(p) {\n        return p.highlight !== this.props.highlight;\n    },\n    render: function() {\n        var p = this.props,\n            highlightStart = p.string.search(p.highlight);\n\n        if (!p.highlight || highlightStart === -1) {\n            return h('span', null, p.string);\n        }\n        var highlightLength = p.highlight.source.length,\n            highlightString = p.string.substr(highlightStart, highlightLength);\n        return h('span', null,\n            p.string.split(p.highlight).map(function(part, index) {\n                return h('span', { key: index },\n                    index > 0 ?\n                        h('span', { className: 'json-inspector__hl' }, highlightString) :\n                        null,\n                    part);\n            }));\n    }\n});\n", "var React = require('react');\nvar createReactClass = require('create-react-class');\n\nvar md5omatic = require('md5-o-matic');\n\nvar uid = require('./uid');\nvar type = require('./type');\nvar isPrimitive = require('./is-primitive');\n\nvar Highlighter = require('./highlighter');\n\nvar h = React.createElement;\nvar PATH_PREFIX = '.root.';\n\nvar Leaf = createReactClass({\n    getInitialState: function() {\n        return {\n            expanded: this._isInitiallyExpanded(this.props)\n        };\n    },\n    getDefaultProps: function() {\n        return {\n            root: false,\n            prefix: ''\n        };\n    },\n    render: function() {\n        var id = 'id_' + uid();\n        var p = this.props;\n\n        var d = {\n            path: this.keypath(),\n            key: p.label.toString(),\n            value: p.data\n        };\n\n        var onLabelClick = this._onClick.bind(this, d);\n\n        return h('div', { className: this.getClassName(), id: 'leaf-' + this._rootPath() },\n            h('input', { className: 'json-inspector__radio', type: 'radio', name: p.id, id: id, tabIndex: -1 }),\n            h('label', { className: 'json-inspector__line', htmlFor: id, onClick: onLabelClick },\n                h('div', { className: 'json-inspector__flatpath' },\n                    d.path),\n                h('span', { className: 'json-inspector__key' },\n                    this.format(d.key),\n                    ':',\n                    this.renderInteractiveLabel(d.key, true)),\n                this.renderTitle(),\n                this.renderShowOriginalButton()),\n            this.renderChildren());\n    },\n    renderTitle: function() {\n        var data = this.data();\n        var t = type(data);\n\n        switch (t) {\n            case 'Array':\n                var length = data.length\n                return h('span', { className: 'json-inspector__value json-inspector__value_helper' },\n                    (length > 0 ? '[…] ' : '[] ') + items(length));\n            case 'Object':\n                var keys = Object.keys(data).length\n                return h('span', { className: 'json-inspector__value json-inspector__value_helper' },\n                    (keys > 0 ? '{…} ' : '{} ') + properties(keys));\n            default:\n                return h('span', { className: 'json-inspector__value json-inspector__value_' + t.toLowerCase() },\n                    this.format(String(data)),\n                    this.renderInteractiveLabel(data, false));\n        }\n    },\n    renderChildren: function() {\n        var p = this.props;\n        var childPrefix = this._rootPath();\n        var data = this.data();\n\n        if (this.state.expanded && !isPrimitive(data)) {\n            return Object.keys(data).map(function(key) {\n                var value = data[key];\n\n                var shouldGetOriginal = !this.state.original || (p.verboseShowOriginal ? p.query : false);\n\n                return h(Leaf, {\n                    data: value,\n                    label: key,\n                    prefix: childPrefix,\n                    onClick: p.onClick,\n                    id: p.id,\n                    query: p.query,\n                    getOriginal: shouldGetOriginal ? p.getOriginal : null,\n                    key: getLeafKey(key, value),\n                    isExpanded: p.isExpanded,\n                    interactiveLabel: p.interactiveLabel,\n                    verboseShowOriginal: p.verboseShowOriginal\n                });\n            }, this);\n        }\n\n        return null;\n    },\n    renderShowOriginalButton: function() {\n        var p = this.props;\n\n        if (isPrimitive(p.data) || this.state.original || !p.getOriginal || !p.query || contains(this.keypath(), p.query)) {\n            return null;\n        }\n\n        return h('span', {\n            className: 'json-inspector__show-original',\n            onClick: this._onShowOriginalClick\n        });\n    },\n    renderInteractiveLabel: function(originalValue, isKey) {\n        if (typeof this.props.interactiveLabel === 'function') {\n            return h(this.props.interactiveLabel, {\n                // The distinction between `value` and `originalValue` is\n                // provided to have backwards compatibility.\n                value: String(originalValue),\n                originalValue: originalValue,\n                isKey: isKey,\n                keypath: this.keypath()\n            });\n        }\n\n        return null;\n    },\n    componentWillReceiveProps: function(p) {\n        if (p.query) {\n            this.setState({\n                expanded: !contains(p.label, p.query)\n            });\n        }\n\n        // Restore original expansion state when switching from search mode\n        // to full browse mode.\n        if (this.props.query && !p.query) {\n            this.setState({\n                expanded: this._isInitiallyExpanded(p)\n            });\n        }\n    },\n    _rootPath: function() {\n        return this.props.prefix + '.' + this.props.label;\n    },\n    keypath: function() {\n        return this._rootPath().substr(PATH_PREFIX.length);\n    },\n    data: function() {\n        return this.state.original || this.props.data;\n    },\n    format: function(string) {\n        return h(Highlighter, {\n            string: string,\n            highlight: this.props.query\n        });\n    },\n    getClassName: function() {\n        var cn = 'json-inspector__leaf';\n\n        if (this.props.root) {\n            cn += ' json-inspector__leaf_root';\n        }\n\n        if (this.state.expanded) {\n            cn += ' json-inspector__leaf_expanded';\n        }\n\n        if (!isPrimitive(this.props.data)) {\n            cn += ' json-inspector__leaf_composite';\n        }\n\n        return cn;\n    },\n    toggle: function() {\n        this.setState({\n            expanded: !this.state.expanded\n        });\n    },\n    _onClick: function(data, e) {\n        this.toggle();\n        this.props.onClick(data);\n\n        e.stopPropagation();\n    },\n    _onShowOriginalClick: function(e) {\n        this.setState({\n            original: this.props.getOriginal(this.keypath())\n        });\n\n        e.stopPropagation();\n    },\n    _isInitiallyExpanded: function(p) {\n        var keypath = this.keypath();\n\n        if (p.root) {\n            return true;\n        }\n\n        if (!p.query) {\n            return p.isExpanded(keypath, p.data);\n        } else {\n            // When a search query is specified, first check if the keypath\n            // contains the search query: if it does, then the current leaf\n            // is itself a search result and there is no need to expand further.\n            //\n            // Having a `getOriginal` function passed signalizes that current\n            // leaf only displays a subset of data, thus should be rendered\n            // expanded to reveal the children that is being searched for.\n            return !contains(keypath, p.query) && (typeof p.getOriginal === 'function');\n        }\n    }\n});\n\nfunction items(count) {\n    return count + (count === 1 ? ' item' : ' items');\n}\n\nfunction properties(count) {\n    return count + (count === 1 ? ' property' : ' properties');\n}\n\nfunction getLeafKey(key, value) {\n    if (isPrimitive(value)) {\n        // TODO: Sanitize `value` better.\n        var hash = md5omatic(String(value));\n        return key + ':' + hash;\n    } else {\n        return key + '[' + type(value) + ']';\n    }\n}\n\nfunction contains(string, substring) {\n    return string.indexOf(substring) !== -1;\n}\n\nmodule.exports = Leaf;\n", "module.exports = function() {};\n", "var React = require('react');\nvar createReactClass = require('create-react-class');\n\nvar h = React.createElement;\nvar noop = require('./noop');\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            onChange: noop\n        };\n    },\n    render: function() {\n        return h('input', {\n            className: 'json-inspector__search',\n            type: 'search',\n            placeholder: 'Search',\n            onChange: this.onChange\n        });\n    },\n    onChange: function(e) {\n        this.props.onChange(e.target.value);\n    }\n});\n", "module.exports = function(object) {\n    return Object.keys(object).length === 0;\n};\n", "var keys = Object.keys;\n\nvar isPrimitive = require('./is-primitive');\nvar isEmpty = require('./is-empty');\n\nmodule.exports = function(data, options) {\n    options || (options = { cacheResults: true });\n\n    var cache = {};\n\n    return function(query) {\n        if (!options.cacheResults) {\n           return find(data, query, options);\n        }\n\n        var subquery;\n\n        if (!cache[query]) {\n            for (var i = query.length - 1; i > 0; i -= 1) {\n                subquery = query.substr(0, i);\n\n                if (cache[subquery]) {\n                    cache[query] = find(cache[subquery], query, options);\n                    break;\n                }\n            }\n        }\n\n        if (!cache[query]) {\n            cache[query] = find(data, query, options);\n        }\n\n        return cache[query];\n    };\n};\n\nfunction find(data, query, options) {\n    return keys(data).reduce(function(acc, key) {\n        var value = data[key];\n        var matches;\n\n        if (isPrimitive(value)) {\n            if (contains(query, key, options) || contains(query, value, options)) {\n                acc[key] = value;\n            }\n        } else {\n            if (contains(query, key, options)) {\n                acc[key] = value;\n            } else {\n                matches = find(value, query, options);\n\n                if (!isEmpty(matches)) {\n                    Object.assign(acc, pair(key, matches));\n                }\n            }\n        }\n\n        return acc;\n    }, {});\n}\n\nfunction contains(query, string, options) {\n    if (string) {\n        var haystack = String(string);\n        var needle = query;\n\n        if (options.ignoreCase) {\n            haystack = haystack.toLowerCase();\n            needle = needle.toLowerCase();\n        }\n\n        return haystack.indexOf(needle) !== -1;\n    }\n}\n\nfunction pair(key, value) {\n    var p = {};\n    p[key] = value;\n    return p;\n}\n", "var type = require('./type');\n\nvar PATH_DELIMITER = '.';\n\nfunction lens(data, path) {\n    var p = path.split(PATH_DELIMITER);\n    var segment = p.shift();\n\n    if (!segment) {\n        return data;\n    }\n\n    var t = type(data);\n\n    if (t === 'Array' && data[integer(segment)]) {\n        return lens(data[integer(segment)], p.join(PATH_DELIMITER));\n    } else if (t === 'Object' && data[segment]) {\n        return lens(data[segment], p.join(PATH_DELIMITER));\n    }\n}\n\nfunction integer(string) {\n    return parseInt(string, 10);\n}\n\nmodule.exports = lens;\n", "var React = require('react');\nvar createReactClass = require('create-react-class');\nvar debounce = require('debounce');\n\nvar h = React.createElement;\nvar Leaf = require('./lib/leaf');\nvar SearchBar = require('./lib/search-bar');\n\nvar filterer = require('./lib/filterer');\nvar isEmpty = require('./lib/is-empty');\nvar lens = require('./lib/lens');\nvar noop = require('./lib/noop');\n\nmodule.exports = createReactClass({\n    getDefaultProps: function() {\n        return {\n            data: null,\n            search: SearchBar,\n            searchOptions: {\n                debounceTime: 0\n            },\n            className: '',\n            id: 'json-' + Date.now(),\n            onClick: noop,\n            filterOptions: {\n                cacheResults: true,\n                ignoreCase: false\n            },\n            validateQuery: function(query) {\n                return query.length >= 2;\n            },\n            /**\n             * Decide whether the leaf node at given `keypath` should be\n             * expanded initially.\n             * @param  {String} keypath\n             * @param  {Any} value\n             * @return {Boolean}\n             */\n            isExpanded: function(keypath, value) {\n                return false;\n            },\n            verboseShowOriginal: false\n        };\n    },\n    getInitialState: function() {\n        return {\n            query: this.props.query || ''\n        };\n    },\n    render: function() {\n        var p = this.props;\n        var s = this.state;\n\n        var isQueryValid = (\n            s.query !== '' &&\n            p.validateQuery(s.query)\n        );\n\n        var data = (\n            isQueryValid ?\n                s.filterer(s.query) :\n                p.data\n        );\n\n        var isNotFound = (\n            isQueryValid &&\n            isEmpty(data)\n        );\n\n        return h('div', { className: 'json-inspector ' + p.className },\n            this.renderToolbar(),\n            (\n                isNotFound ?\n                    h('div', { className: 'json-inspector__not-found' }, 'Nothing found') :\n                    h(Leaf, {\n                        data: data,\n                        onClick: p.onClick,\n                        id: p.id,\n                        getOriginal: this.getOriginal,\n                        query: (\n                            isQueryValid ?\n                                new RegExp(\n                                        s.query,\n                                        (p.filterOptions.ignoreCase ? 'i' : '')\n                                ) :\n                                null\n                        ),\n                        label: 'root',\n                        root: true,\n                        isExpanded: p.isExpanded,\n                        interactiveLabel: p.interactiveLabel,\n                        verboseShowOriginal: p.verboseShowOriginal\n                    })\n            )\n        );\n    },\n    renderToolbar: function() {\n        var search = this.props.search;\n\n        if (search) {\n            return h('div', { className: 'json-inspector__toolbar' },\n                h(search, {\n                    onChange: debounce(this.search, this.props.searchOptions.debounceTime),\n                    data: this.props.data,\n                    query: this.state.query\n                })\n            );\n        }\n    },\n    search: function(query) {\n        this.setState({\n            query: query\n        });\n    },\n    componentWillMount: function() {\n        this.createFilterer(this.props.data, this.props.filterOptions);\n    },\n    componentWillReceiveProps: function(p) {\n        this.createFilterer(p.data, p.filterOptions);\n\n        var isReceivingNewQuery = (\n            typeof p.query === 'string' &&\n            p.query !== this.state.query\n        );\n\n        if (isReceivingNewQuery) {\n            this.setState({\n                query: p.query\n            });\n        }\n    },\n    shouldComponentUpdate: function (p, s) {\n        return (\n            p.query !== this.props.query ||\n            s.query !== this.state.query ||\n            p.data !== this.props.data ||\n            p.onClick !== this.props.onClick\n        );\n    },\n    createFilterer: function(data, options) {\n        this.setState({\n            filterer: filterer(data, options)\n        });\n    },\n    getOriginal: function(path) {\n        return lens(this.props.data, path);\n    }\n});\n", "module.exports = function (max) {\n\n  if (!max) throw Error('hashlru must have a max value, of type number, greater than 0')\n\n  var size = 0, cache = Object.create(null), _cache = Object.create(null)\n\n  function update (key, value) {\n    cache[key] = value\n    size ++\n    if(size >= max) {\n      size = 0\n      _cache = cache\n      cache = Object.create(null)\n    }\n  }\n\n  return {\n    has: function (key) {\n      return cache[key] !== undefined || _cache[key] !== undefined\n    },\n    remove: function (key) {\n      if(cache[key] !== undefined)\n        cache[key] = undefined\n      if(_cache[key] !== undefined)\n        _cache[key] = undefined\n    },\n    get: function (key) {\n      var v = cache[key]\n      if(v !== undefined) return v\n      if((v = _cache[key]) !== undefined) {\n        update(key, v)\n        return v\n      }\n    },\n    set: function (key, value) {\n      if(cache[key] !== undefined) cache[key] = value\n      else update(key, value)\n    },\n    clear: function () {\n      cache = Object.create(null)\n      _cache = Object.create(null)\n    }\n  }\n}\n\n\n\n\n\n\n\n", "import React from 'react'\nimport {\n  type DocumentActionDescription,\n  type DocumentActionProps,\n  GetHookCollectionState,\n} from 'sanity'\n\n/** @internal */\nexport interface Action<Args, Description> {\n  (args: Args): Description | null\n}\n\n/** @internal */\nexport interface RenderActionCollectionProps {\n  actions: Action<DocumentActionProps, DocumentActionDescription>[]\n  actionProps: DocumentActionProps\n  children: (props: {states: DocumentActionDescription[]}) => React.ReactNode\n  onActionComplete?: () => void\n}\n\n/** @internal */\nexport const RenderActionCollectionState = (props: RenderActionCollectionProps) => {\n  const {actions, children, actionProps, onActionComplete} = props\n\n  return (\n    <GetHookCollectionState onReset={onActionComplete} hooks={actions} args={actionProps}>\n      {children}\n    </GetHookCollectionState>\n  )\n}\n", "import React from 'react'\nimport {\n  type DocumentBadgeDescription,\n  type DocumentBadgeProps,\n  type EditStateFor,\n  GetHookCollectionState,\n} from 'sanity'\n\n/** @internal */\nexport interface Badge<Args, Description> {\n  (args: Args): Description | null\n}\n\n/** @internal */\nexport interface RenderBadgeCollectionProps {\n  badges: Badge<DocumentBadgeProps, DocumentBadgeDescription>[]\n  badgeProps: EditStateFor\n  children: (props: {states: DocumentBadgeDescription[]}) => React.ReactNode\n  onActionComplete?: () => void\n}\n\n/** @internal */\nexport const RenderBadgeCollectionState = (props: RenderBadgeCollectionProps) => {\n  const {badges, children, badgeProps, ...rest} = props\n\n  return (\n    <GetHookCollectionState {...rest} hooks={badges} args={badgeProps}>\n      {children}\n    </GetHookCollectionState>\n  )\n}\n", "import {omit} from 'lodash'\nimport React, {useCallback, useMemo} from 'react'\nimport {toString as pathToString} from '@sanity/util/paths'\nimport {RouterPaneGroup, RouterPanes, RouterPaneSibling} from '../../types'\nimport {usePaneLayout} from '../pane/usePaneLayout'\nimport {ChildLink} from './ChildLink'\nimport {BackLink} from './BackLink'\nimport {ReferenceChildLink} from './ReferenceChildLink'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {ParameterizedLink} from './ParameterizedLink'\nimport {PaneRouterContextValue} from './types'\nimport {useRouter, useRouterState} from 'sanity/router'\n\nconst emptyArray: never[] = []\n\n/**\n * @internal\n */\nexport function PaneRouterProvider(props: {\n  children: React.ReactNode\n  flatIndex: number\n  index: number\n  params: Record<string, string | undefined>\n  payload: unknown\n  siblingIndex: number\n}) {\n  const {children, flatIndex, index, params, payload, siblingIndex} = props\n  const {navigate, navigateIntent, resolvePathFromState} = useRouter()\n  const routerState = useRouterState()\n  const {panes, expand} = usePaneLayout()\n  const routerPaneGroups: RouterPaneGroup[] = useMemo(\n    () => (routerState?.panes || emptyArray) as RouterPanes,\n    [routerState?.panes],\n  )\n  const lastPane = useMemo(() => panes?.[panes.length - 2], [panes])\n\n  const groupIndex = index - 1\n\n  const createNextRouterState = useCallback(\n    (modifier: (siblings: RouterPaneGroup, item: RouterPaneSibling) => RouterPaneGroup) => {\n      const currentGroup = routerPaneGroups[groupIndex] || []\n      const currentItem = currentGroup[siblingIndex]\n      const nextGroup = modifier(currentGroup, currentItem)\n      const nextPanes = [\n        ...routerPaneGroups.slice(0, groupIndex),\n        nextGroup,\n        ...routerPaneGroups.slice(groupIndex + 1),\n      ]\n      const nextRouterState = {...(routerState || {}), panes: nextPanes}\n\n      return nextRouterState\n    },\n    [groupIndex, routerPaneGroups, routerState, siblingIndex],\n  )\n\n  const modifyCurrentGroup = useCallback(\n    (modifier: (siblings: RouterPaneGroup, item: RouterPaneSibling) => RouterPaneGroup) => {\n      const nextRouterState = createNextRouterState(modifier)\n      setTimeout(() => navigate(nextRouterState), 0)\n      return nextRouterState\n    },\n    [createNextRouterState, navigate],\n  )\n\n  const createPathWithParams: PaneRouterContextValue['createPathWithParams'] = useCallback(\n    (nextParams) => {\n      const nextRouterState = createNextRouterState((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, params: nextParams},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n\n      return resolvePathFromState(nextRouterState)\n    },\n    [createNextRouterState, resolvePathFromState, siblingIndex],\n  )\n\n  const setPayload: PaneRouterContextValue['setPayload'] = useCallback(\n    (nextPayload) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, payload: nextPayload},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex],\n  )\n\n  const setParams: PaneRouterContextValue['setParams'] = useCallback(\n    (nextParams) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, params: nextParams},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex],\n  )\n\n  const handleEditReference: PaneRouterContextValue['handleEditReference'] = useCallback(\n    ({id, parentRefPath, type, template}) => {\n      navigate({\n        panes: [\n          ...routerPaneGroups.slice(0, groupIndex + 1),\n          [\n            {\n              id,\n              params: {template: template.id, parentRefPath: pathToString(parentRefPath), type},\n              payload: template.params,\n            },\n          ],\n        ],\n      })\n    },\n    [groupIndex, navigate, routerPaneGroups],\n  )\n\n  const ctx: PaneRouterContextValue = useMemo(\n    () => ({\n      // Zero-based index (position) of pane, visually\n      index: flatIndex,\n\n      // Zero-based index of pane group (within URL structure)\n      groupIndex,\n\n      // Zero-based index of pane within sibling group\n      siblingIndex,\n\n      // Payload of the current pane\n      payload,\n\n      // Params of the current pane\n      params,\n\n      // Whether or not the pane has any siblings (within the same group)\n      hasGroupSiblings: routerPaneGroups[groupIndex]\n        ? routerPaneGroups[groupIndex].length > 1\n        : false,\n\n      // The length of the current group\n      groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n\n      // Current router state for the \"panes\" property\n      routerPanesState: routerPaneGroups,\n\n      // Curried StateLink that passes the correct state automatically\n      ChildLink,\n\n      // Curried StateLink that pops off the last pane group\n      BackLink,\n\n      // A specialized `ChildLink` that takes in the needed props to open a\n      // referenced document to the right\n      ReferenceChildLink,\n\n      // Similar to `ReferenceChildLink` expect without the wrapping component\n      handleEditReference,\n\n      // Curried StateLink that passed the correct state, but merges params/payload\n      ParameterizedLink,\n\n      // Replaces the current pane with a new one\n      replaceCurrent: (opts = {}): void => {\n        modifyCurrentGroup(() => [\n          {id: opts.id || '', payload: opts.payload, params: opts.params || {}},\n        ])\n      },\n\n      // Removes the current pane from the group\n      closeCurrent: (): void => {\n        modifyCurrentGroup((siblings, item) =>\n          siblings.length > 1 ? siblings.filter((sibling) => sibling !== item) : siblings,\n        )\n      },\n\n      // Removes all panes to the right including current\n      closeCurrentAndAfter: (expandLast = true): void => {\n        if (expandLast && lastPane) {\n          expand(lastPane.element)\n        }\n        navigate(\n          {\n            panes: [...routerPaneGroups.slice(0, groupIndex)],\n          },\n          {replace: true},\n        )\n      },\n\n      // Duplicate the current pane, with optional overrides for payload, parameters\n      duplicateCurrent: (options): void => {\n        modifyCurrentGroup((siblings, item) => {\n          const duplicatedItem = {\n            ...item,\n            payload: options?.payload || item.payload,\n            params: options?.params || item.params,\n          }\n\n          return [\n            ...siblings.slice(0, siblingIndex),\n            duplicatedItem,\n            ...siblings.slice(siblingIndex),\n          ]\n        })\n      },\n\n      // Set the view for the current pane\n      setView: (viewId) => {\n        const restParams = omit(params, 'view')\n        return setParams(viewId ? {...restParams, view: viewId} : restParams)\n      },\n\n      // Set the parameters for the current pane\n      setParams,\n\n      // Set the payload for the current pane\n      setPayload,\n\n      // A function that returns a path with the given parameters\n      createPathWithParams,\n\n      // Proxied navigation to a given intent. Consider just exposing `router` instead?\n      navigateIntent,\n    }),\n    [\n      flatIndex,\n      groupIndex,\n      siblingIndex,\n      payload,\n      params,\n      routerPaneGroups,\n      handleEditReference,\n      setParams,\n      setPayload,\n      createPathWithParams,\n      navigateIntent,\n      modifyCurrentGroup,\n      lastPane,\n      navigate,\n      expand,\n    ],\n  )\n\n  return <PaneRouterContext.Provider value={ctx}>{children}</PaneRouterContext.Provider>\n}\n", "import {PANE_DEFAULT_MIN_WIDTH} from '../constants'\nimport {PaneConfigOpts, PaneResizeCache} from '../types'\n\nexport function _calcPaneResize(\n  cache: PaneResizeCache,\n  left: PaneConfigOpts,\n  right: PaneConfigOpts,\n  deltaX: number,\n): {leftFlex: number; leftW: number; rightFlex: number; rightW: number} {\n  const sum = {\n    flex: cache.left.flex + cache.right.flex,\n    width: cache.left.width + cache.right.width,\n  }\n\n  const leftMinWidth = left.minWidth ?? PANE_DEFAULT_MIN_WIDTH\n  const rightMinWidth = right.minWidth ?? PANE_DEFAULT_MIN_WIDTH\n\n  const leftMaxWidth = Math.min(left.maxWidth || Infinity, sum.width - rightMinWidth)\n  const rightMaxWidth = Math.min(right.maxWidth || Infinity, sum.width - leftMinWidth)\n\n  // Get min. delta X\n  let minDeltaX = leftMinWidth - cache.left.width\n  const rightMinDeltaX = cache.right.width - rightMaxWidth\n  if (minDeltaX < rightMinDeltaX) {\n    minDeltaX = rightMinDeltaX\n  }\n\n  // Get max. delta X\n  let maxDeltaX = cache.right.width - rightMinWidth\n  const leftMaxDeltaX = leftMaxWidth - cache.left.width\n  if (maxDeltaX > leftMaxDeltaX) {\n    maxDeltaX = leftMaxDeltaX\n  }\n\n  const _deltaX = Math.min(Math.max(deltaX, minDeltaX), maxDeltaX)\n\n  const leftW = cache.left.width + _deltaX\n  const rightW = cache.right.width - _deltaX\n\n  const leftFlex = (leftW / sum.width) * sum.flex\n  const rightFlex = (rightW / sum.width) * sum.flex\n\n  return {leftFlex, leftW, rightFlex, rightW}\n}\n", "/**\n * @internal\n */\nexport function _getDOMPath(rootElement: HTMLElement, el: HTMLElement): number[] {\n  const path: number[] = []\n\n  let e = el\n\n  while (e !== rootElement) {\n    const parentElement = e.parentElement\n\n    if (!parentElement) return path\n\n    const children = Array.from(parentElement.childNodes)\n    const index = children.indexOf(e)\n\n    path.unshift(index)\n\n    if (parentElement === rootElement) {\n      return path\n    }\n\n    e = parentElement\n  }\n\n  return path\n}\n", "import {_getDOMPath} from './_getDOMPath'\n\nconst EMPTY_PATH: number[] = []\n\n/**\n * @internal\n */\nexport function _sortElements(rootElement: HTMLElement, elements: HTMLElement[]): void {\n  // Create a map containing the DOM path of each pane element.\n  // The DOM path is relative to the `rootElement`, and is used in the next step for sorting.\n  const map = new WeakMap<HTMLElement, number[]>()\n\n  for (const element of elements) {\n    map.set(element, _getDOMPath(rootElement, element))\n  }\n\n  const _sortByElementPath = (a: HTMLElement, b: HTMLElement) => {\n    const _a = map.get(a) || EMPTY_PATH\n    const _b = map.get(b) || EMPTY_PATH\n\n    const len = Math.max(_a.length, _b.length)\n\n    // Loop until there are different indexes\n    for (let i = 0; i < len; i += 1) {\n      const aIndex = _a[i] || -1\n      const bIndex = _b[i] || -1\n\n      if (aIndex !== bIndex) {\n        return aIndex - bIndex\n      }\n    }\n\n    return 0\n  }\n\n  elements.sort(_sortByElementPath)\n}\n", "import {PANE_COLLAPSED_WIDTH, PANE_DEFAULT_MIN_WIDTH} from './constants'\nimport {_calcPaneResize, _sortElements} from './helpers'\nimport {PaneConfigOpts, PaneData, PaneResizeCache, PaneResizeData} from './types'\n\nexport interface PaneLayoutState {\n  expandedElement: HTMLElement | null\n  panes: PaneData[]\n  resizing: boolean\n}\n\nexport type PaneLayoutStateObserver = (state: PaneLayoutState) => void\n\nexport interface PaneLayoutController {\n  collapse: (element: HTMLElement) => void\n  expand: (element: HTMLElement) => void\n  mount: (element: HTMLElement, options: PaneConfigOpts) => () => void\n  resize: (type: 'start' | 'move' | 'end', leftElement: HTMLElement, deltaX: number) => void\n  setRootElement: (nextRootElement: HTMLElement | null) => void\n  setRootWidth: (nextRootWidth: number) => void\n  subscribe: (observer: PaneLayoutStateObserver) => () => void\n}\n\nexport function createPaneLayoutController(): PaneLayoutController {\n  const observers: PaneLayoutStateObserver[] = []\n  const elements: HTMLElement[] = []\n  const optionsMap = new WeakMap<HTMLElement, PaneConfigOpts & {original: PaneConfigOpts}>()\n  const userCollapsedElementSet = new Set<HTMLElement>()\n  const cache: Partial<PaneResizeCache> = {}\n\n  // Mutable internal state\n  let rootElement: HTMLElement | null = null\n  let rootWidth = 0\n  let expandedElement: HTMLElement | null = null\n  let resizeDataMap = new Map<HTMLElement, PaneResizeData>()\n  let resizing = false\n\n  function collapse(element: HTMLElement) {\n    userCollapsedElementSet.add(element)\n\n    if (expandedElement === element) {\n      expandedElement = null\n    }\n\n    _notifyObservers()\n  }\n\n  function expand(element: HTMLElement) {\n    userCollapsedElementSet.delete(element)\n\n    expandedElement = element\n\n    _notifyObservers()\n  }\n\n  function mount(element: HTMLElement, options: PaneConfigOpts) {\n    optionsMap.set(element, {...options, original: options})\n\n    elements.push(element)\n\n    if (rootElement) {\n      _sortElements(rootElement, elements)\n    }\n\n    expand(element)\n\n    return () => {\n      const idx = elements.indexOf(element)\n\n      if (idx > -1) {\n        elements.splice(idx, 1)\n      }\n\n      optionsMap.delete(element)\n\n      _notifyObservers()\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  function resize(type: 'start' | 'move' | 'end', leftElement: HTMLElement, deltaX: number) {\n    const leftIndex = elements.indexOf(leftElement)\n    const leftOptions = optionsMap.get(leftElement)\n\n    if (!leftOptions) return\n\n    const rightElement = elements[leftIndex + 1]\n    const rightOptions = optionsMap.get(rightElement)\n\n    if (!rightOptions) return\n\n    if (type === 'start') {\n      resizing = true\n\n      cache.left = {\n        element: leftElement,\n        flex: leftOptions.flex || 1,\n        width: leftElement.offsetWidth,\n      }\n\n      cache.right = {\n        element: rightElement,\n        flex: rightOptions.flex || 1,\n        width: rightElement.offsetWidth,\n      }\n\n      _notifyObservers()\n    }\n\n    if (type === 'move' && cache.left && cache.right) {\n      resizeDataMap = new Map<HTMLElement, PaneResizeData>()\n\n      const {leftW, rightW, leftFlex, rightFlex} = _calcPaneResize(\n        cache as PaneResizeCache,\n        leftOptions,\n        rightOptions,\n        deltaX,\n      )\n\n      // update resize cache\n      resizeDataMap.set(leftElement, {flex: leftFlex, width: leftW})\n      resizeDataMap.set(rightElement, {flex: rightFlex, width: rightW})\n\n      _notifyObservers()\n    }\n\n    if (type === 'end') {\n      resizing = false\n\n      const leftResizeData = resizeDataMap.get(leftElement)\n      const rightResizeData = resizeDataMap.get(rightElement)\n\n      // Update left options\n      optionsMap.set(leftElement, {\n        ...leftOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: leftOptions.maxWidth ?? Infinity,\n        flex: leftResizeData?.flex ?? leftOptions.flex,\n      })\n\n      // Update right options\n      optionsMap.set(rightElement, {\n        ...rightOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: leftOptions.maxWidth ?? Infinity,\n        flex: rightResizeData?.flex ?? rightOptions.flex,\n      })\n\n      // Reset resize data map\n      resizeDataMap = new Map()\n\n      // Reset cache\n      delete cache.left\n      delete cache.right\n\n      _notifyObservers()\n    }\n  }\n\n  function setRootElement(nextRootElement: HTMLElement | null) {\n    rootElement = nextRootElement\n  }\n\n  function setRootWidth(nextRootWidth: number) {\n    rootWidth = nextRootWidth\n    _notifyObservers()\n  }\n\n  function subscribe(observer: PaneLayoutStateObserver) {\n    observers.push(observer)\n\n    return () => {\n      const idx = observers.push(observer)\n\n      if (idx > -1) {\n        observers.splice(idx, 1)\n      }\n    }\n  }\n\n  return {collapse, expand, mount, resize, setRootElement, setRootWidth, subscribe}\n\n  // eslint-disable-next-line complexity\n  function _notifyObservers() {\n    if (!rootWidth) return\n\n    // Create a reversed array of pane elements, so we can loop over them backwards.\n    // Place the expanded element first (so it has the least chance of being collapsed).\n    const _elements: HTMLElement[] = []\n    for (const element of elements) {\n      if (element !== expandedElement) {\n        _elements.unshift(element)\n      }\n    }\n    if (expandedElement) {\n      _elements.unshift(expandedElement)\n    }\n\n    const dataMap = new WeakMap<HTMLElement, PaneData>()\n    const len = _elements.length\n    const lastElement = _elements[0]\n    const collapsedWidth = (len - 1) * PANE_COLLAPSED_WIDTH\n\n    let remaingWidth = rootWidth - collapsedWidth\n\n    for (const element of _elements) {\n      const options = optionsMap.get(element)\n\n      if (!options) {\n        continue\n      }\n\n      const minWidth = options.currentMinWidth || options.minWidth || PANE_DEFAULT_MIN_WIDTH\n      const isLast = element === lastElement\n\n      // A pane is collapsed if:\n      // - it’s explictly collapsed by the user\n      const userCollapsed = userCollapsedElementSet.has(element)\n      // - it’s minimum width is larger than the remaining width\n      const sizeCollapsed = minWidth > remaingWidth\n      // - if the element is not the last (expanded pane)\n      const collapsed = isLast ? false : userCollapsed || sizeCollapsed\n\n      const resizeData = resizeDataMap.get(element)\n\n      // Collect pane data\n      dataMap.set(element, {\n        element: element,\n        collapsed: collapsed,\n        currentMinWidth: resizeData?.width ?? options.currentMinWidth,\n        currentMaxWidth: resizeData?.width ?? options.currentMaxWidth,\n        flex: resizeData?.flex ?? options.flex ?? 1,\n      })\n\n      // Update remaining width\n      if (collapsed) {\n        remaingWidth -= PANE_COLLAPSED_WIDTH\n      } else {\n        remaingWidth -= minWidth - PANE_COLLAPSED_WIDTH\n      }\n    }\n\n    const panes: PaneData[] = []\n\n    for (const element of elements) {\n      const data = dataMap.get(element)\n\n      if (data) panes.push(data)\n    }\n\n    for (const observer of observers) {\n      observer({\n        expandedElement: expandedElement || elements[elements.length - 1] || null,\n        panes,\n        resizing,\n      })\n    }\n  }\n}\n", "import {CardProps, useElementRect} from '@sanity/ui'\nimport React, {useMemo, useState, useEffect} from 'react'\nimport {PaneLayoutContext} from './PaneLayoutContext'\nimport {PaneLayoutContextValue} from './types'\nimport {Root} from './PaneLayout.styles'\nimport {createPaneLayoutController, PaneLayoutState} from './paneLayoutController'\n\n/**\n *\n * @hidden\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport interface PaneLayoutProps {\n  minWidth?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n}\n\n/**\n *\n * @hidden\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneLayout(\n  props: PaneLayoutProps &\n    CardProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref' | 'wrap'>,\n) {\n  const {children, minWidth, onCollapse, onExpand, ...restProps} = props\n  const controller = useMemo(() => createPaneLayoutController(), [])\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const width = rootRect?.width || 0\n  const collapsed = width === undefined || !minWidth ? undefined : width < minWidth\n  const [state, setState] = useState<PaneLayoutState>({\n    expandedElement: null,\n    panes: [],\n    resizing: false,\n  })\n\n  // Set root element\n  useEffect(() => controller.setRootElement(rootElement), [controller, rootElement])\n\n  // Set root size\n  useEffect(() => controller.setRootWidth(width), [controller, width])\n\n  // Subscribe to state changes\n  useEffect(() => controller.subscribe(setState), [controller])\n\n  // Call the `onCollapse` and `onExpand` callbacks as the `collapsed` boolean changes\n  useEffect(() => {\n    if (collapsed === undefined) return\n    if (collapsed && onCollapse) onCollapse()\n    if (!collapsed && onExpand) onExpand()\n  }, [collapsed, onCollapse, onExpand])\n\n  // This is the context value that gives each pane the information they need\n  const paneLayout: PaneLayoutContextValue = useMemo(\n    () => ({\n      collapse: controller.collapse,\n      collapsed,\n      expand: controller.expand,\n      expandedElement: state.expandedElement,\n      mount: controller.mount,\n      panes: state.panes,\n      resize: controller.resize,\n      resizing: state.resizing,\n    }),\n    [collapsed, controller, state.expandedElement, state.panes, state.resizing],\n  )\n\n  return (\n    <PaneLayoutContext.Provider value={paneLayout}>\n      <Root\n        data-ui=\"PaneLayout\"\n        {...restProps}\n        data-collapsed={collapsed ? '' : undefined}\n        // The `data-resizing` attribute is used to improve cursor behavior\n        data-resizing={state.resizing ? '' : undefined}\n        // The `data-mounted` attribute is used to fade in the layout and prevent flash of\n        // non-collapsed panes\n        data-mounted={width ? '' : undefined}\n        ref={setRootElement}\n      >\n        {children}\n      </Root>\n    </PaneLayoutContext.Provider>\n  )\n}\n", "import React, {ReactElement, createElement, useCallback} from 'react'\nimport {Box} from '@sanity/ui'\nimport {usePane} from '../../../components'\nimport {useDeskTool} from '../../../useDeskTool'\nimport {DOCUMENT_INSPECTOR_MAX_WIDTH, DOCUMENT_INSPECTOR_MIN_WIDTH} from '../constants'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {Resizable} from './Resizable'\n\ninterface DocumentInspectorPanelProps {\n  documentId: string\n  documentType: string\n  flex?: number | number[]\n}\n\nexport function DocumentInspectorPanel(props: DocumentInspectorPanelProps): ReactElement | null {\n  const {documentId, documentType, flex} = props\n  const {collapsed} = usePane()\n  const {closeInspector, inspector} = useDocumentPane()\n  const {features} = useDeskTool()\n\n  const handleClose = useCallback(() => {\n    if (inspector) closeInspector(inspector.name)\n  }, [closeInspector, inspector])\n\n  if (collapsed || !inspector) return null\n\n  const element = createElement(inspector.component, {\n    onClose: handleClose,\n    documentId,\n    documentType,\n  })\n\n  if (features.resizablePanes) {\n    return (\n      <Resizable\n        as=\"aside\"\n        data-ui=\"DocumentInspectorPanel\"\n        flex={flex}\n        maxWidth={DOCUMENT_INSPECTOR_MAX_WIDTH}\n        minWidth={DOCUMENT_INSPECTOR_MIN_WIDTH}\n      >\n        {element}\n      </Resizable>\n    )\n  }\n\n  return (\n    <Box as=\"aside\" data-ui=\"DocumentInspectorPanel\" flex={flex}>\n      {element}\n    </Box>\n  )\n}\n", "import {RouterPaneSiblingContext} from '../types'\n\nexport interface PaneResolutionErrorOptions {\n  message: string\n  context?: RouterPaneSiblingContext\n  helpId?: string\n  cause?: Error\n}\n\n/**\n * An error thrown during pane resolving. This error is meant to be bubbled up\n * through react and handled in an error boundary. It includes a `cause`\n * property which is the original error caught\n */\nexport class PaneResolutionError extends Error {\n  cause: Error | undefined\n  context: RouterPaneSiblingContext | undefined\n  helpId: string | undefined\n\n  constructor({message, context, helpId, cause}: PaneResolutionErrorOptions) {\n    super(message)\n    this.context = context\n    this.helpId = helpId\n    this.cause = cause\n  }\n}\n", "import {nanoid} from 'nanoid'\n\n// `WeakMap`s require the first type param to extend `object`\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst randomIdCache = new WeakMap<object, string>()\n\n/**\n * given an object, this function randomly generates an ID and returns it. this\n * result is then saved in a WeakMap so subsequent requests for the same object\n * will receive the same ID\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function assignId(obj: object): string {\n  const cachedValue = randomIdCache.get(obj)\n  if (cachedValue) return cachedValue\n\n  const id = nanoid()\n  randomIdCache.set(obj, id)\n  return id\n}\n", "/* eslint-disable @typescript-eslint/ban-types */\n\n// `WeakMap`s require the first type param to extend `object`\nconst bindCache = new WeakMap<object, Map<string, Function>>()\n\n/**\n * An alternative to `obj.method.bind(obj)` that utilizes a weakmap to return\n * the same memory reference for sequent binds.\n */\nexport function memoBind<\n  T extends object,\n  K extends keyof {[P in keyof T]: T[P] extends Function ? T[P] : never},\n>(obj: T, methodKey: K): T[K]\nexport function memoBind(obj: Record<string, unknown>, methodKey: string): Function {\n  const boundMethods = bindCache.get(obj) || new Map<string, Function>()\n  if (boundMethods) {\n    const bound = boundMethods.get(methodKey)\n    if (bound) return bound\n  }\n\n  const method = obj[methodKey]\n\n  if (typeof method !== 'function') {\n    throw new Error(\n      `Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`,\n    )\n  }\n\n  const bound = method.bind(obj)\n  boundMethods.set(methodKey, bound)\n  bindCache.set(obj, boundMethods)\n\n  return bound\n}\n", "import {from, isObservable, Observable, of as observableOf, Subscribable} from 'rxjs'\n\nimport {publishReplay, refCount, switchMap} from 'rxjs/operators'\n\nimport {PaneNode, RouterPaneSiblingContext, UnresolvedPaneNode} from '../types'\nimport {PaneResolutionError} from './PaneResolutionError'\nimport {isRecord} from 'sanity'\n\ninterface Serializable {\n  serialize: (...args: never[]) => unknown\n}\n\nconst isPromise = (thing: any): thing is PromiseLike<unknown> => {\n  return !!thing && typeof thing?.then === 'function'\n}\nconst isSerializable = (thing: unknown): thing is Serializable => {\n  if (!isRecord(thing)) return false\n  return typeof thing.serialize === 'function'\n}\n\n/**\n * The signature of the function used to take an `UnresolvedPaneNode` and turn\n * it into an `Observable<PaneNode>`.\n */\nexport type PaneResolver = (\n  unresolvedPane: UnresolvedPaneNode | undefined,\n  context: RouterPaneSiblingContext,\n  flatIndex: number,\n) => Observable<PaneNode>\n\nexport type PaneResolverMiddleware = (paneResolveFn: PaneResolver) => PaneResolver\n\nconst rethrowWithPaneResolutionErrors: PaneResolverMiddleware =\n  (next) => (unresolvedPane, context, flatIndex) => {\n    try {\n      return next(unresolvedPane, context, flatIndex)\n    } catch (e) {\n      // re-throw errors that are already `PaneResolutionError`s\n      if (e instanceof PaneResolutionError) {\n        throw e\n      }\n\n      // anything else, wrap with `PaneResolutionError` and set the underlying\n      // error as a the `cause`\n      throw new PaneResolutionError({\n        message: typeof e?.message === 'string' ? e.message : '',\n        context,\n        cause: e,\n      })\n    }\n  }\n\nconst wrapWithPublishReplay: PaneResolverMiddleware =\n  (next) =>\n  (...args) => {\n    return next(...args).pipe(\n      // need to add publishReplay + refCount to ensure new subscribers always\n      // get an emission. without this, memoized observables may get stuck\n      // waiting for their first emissions resulting in a loading pane\n      publishReplay(1),\n      refCount(),\n    )\n  }\n\nexport function createPaneResolver(middleware: PaneResolverMiddleware): PaneResolver {\n  // note: this API includes a middleware/wrapper function because the function\n  // is recursive. we want to call the wrapped version of the function always\n  // (even inside of nested calls) so the identifier invoked for the recursion\n  // should be the wrapped version\n  const resolvePane = rethrowWithPaneResolutionErrors(\n    wrapWithPublishReplay(\n      middleware((unresolvedPane, context, flatIndex) => {\n        if (!unresolvedPane) {\n          throw new PaneResolutionError({\n            message: 'Pane returned no child',\n            context,\n            helpId: 'structure-item-returned-no-child',\n          })\n        }\n\n        if (isPromise(unresolvedPane) || isObservable(unresolvedPane)) {\n          return from(unresolvedPane).pipe(\n            switchMap((result) => resolvePane(result, context, flatIndex)),\n          )\n        }\n\n        if (isSerializable(unresolvedPane)) {\n          return resolvePane(unresolvedPane.serialize(context), context, flatIndex)\n        }\n\n        if (typeof unresolvedPane === 'function') {\n          return resolvePane(unresolvedPane(context.id, context), context, flatIndex)\n        }\n\n        return observableOf(unresolvedPane)\n      }),\n    ),\n  )\n\n  return resolvePane\n}\n", "import {omit} from 'lodash'\nimport {firstValueFrom, Observable} from 'rxjs'\nimport {PaneNode, RouterPanes, RouterPaneSiblingContext, UnresolvedPaneNode} from '../types'\nimport {StructureContext} from '../structureBuilder'\nimport {assignId} from './assignId'\nimport {memoBind} from './memoBind'\nimport {createPaneResolver, PaneResolverMiddleware} from './createPaneResolver'\n\ninterface TraverseOptions {\n  unresolvedPane: UnresolvedPaneNode | undefined\n  intent: string\n  params: {type: string; id: string; [key: string]: string | undefined}\n  payload: unknown\n  parent: PaneNode | null\n  path: string[]\n  currentId: string\n  flatIndex: number\n  levelIndex: number\n  structureContext: StructureContext\n}\n\nexport interface ResolveIntentOptions {\n  rootPaneNode?: UnresolvedPaneNode\n  intent: string\n  params: {type: string; id: string; [key: string]: string | undefined}\n  payload: unknown\n  structureContext: StructureContext\n}\n\n/**\n * Resolves an intent request using breadth first search. If a match is not\n * found, the intent will resolve to the fallback editor.\n *\n * A match is found if:\n * 1. the `PaneNode` is of type `document` and the its ID matches the intent ID\n * 2. the `PaneNode` is of type `documentList` and the `schemaTypeName` matches\n * 3. the `PaneNode`'s `canHandleIntent` method returns true\n *\n * If a `PaneNode` of type `list` is found, it will be searched for a match.\n *\n * @see PaneNode\n */\nexport async function resolveIntent(options: ResolveIntentOptions): Promise<RouterPanes> {\n  const resolvedPaneCache = new Map<string, Observable<PaneNode>>()\n\n  // this is a simple version of the memoizer in `createResolvedPaneNodeStream`\n  const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && `${assignId(unresolvedPane)}-${context.path.join('__')}`\n    const cachedResolvedPane = key && resolvedPaneCache.get(key)\n    if (cachedResolvedPane) return cachedResolvedPane\n\n    const result = nextFn(unresolvedPane, context, flatIndex)\n    if (key) resolvedPaneCache.set(key, result)\n    return result\n  }\n\n  const resolvePane = createPaneResolver(memoize)\n\n  const fallbackEditorPanes: RouterPanes = [\n    [\n      {\n        id: `__edit__${options.params.id}`,\n        params: {...omit(options.params, ['id']), type: options.params.type},\n        payload: options.payload,\n      },\n    ],\n  ]\n\n  async function traverse({\n    currentId,\n    flatIndex,\n    intent,\n    params,\n    parent,\n    path,\n    payload,\n    unresolvedPane,\n    levelIndex,\n    structureContext,\n  }: TraverseOptions): Promise<\n    Array<{panes: RouterPanes; depthIndex: number; levelIndex: number}>\n  > {\n    if (!unresolvedPane) return []\n\n    const {id: targetId, type: schemaTypeName, ...otherParams} = params\n    const context: RouterPaneSiblingContext = {\n      id: currentId,\n      splitIndex: 0,\n      parent,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: undefined,\n      structureContext,\n    }\n    const resolvedPane = await firstValueFrom(resolvePane(unresolvedPane, context, flatIndex))\n\n    // if the resolved pane is a document pane and the pane's ID matches then\n    // resolve the intent to the current path\n    if (resolvedPane.type === 'document' && resolvedPane.id === targetId) {\n      return [\n        {\n          panes: [\n            ...path.slice(0, path.length - 1).map((i) => [{id: i}]),\n            [{id: targetId, params: otherParams, payload}],\n          ],\n          depthIndex: path.length,\n          levelIndex,\n        },\n      ]\n    }\n\n    // NOTE: if you update this logic, please also update the similar handler in\n    // `getIntentState.ts`\n    if (\n      // if the resolve pane's `canHandleIntent` returns true, then resolve\n      resolvedPane.canHandleIntent?.(intent, params, {\n        pane: resolvedPane,\n        index: flatIndex,\n      }) ||\n      // if the pane's `canHandleIntent` did not return true, then match against\n      // this default case. we will resolve the intent if:\n      (resolvedPane.type === 'documentList' &&\n        // 1. the schema type matches (this required for the document to render)\n        resolvedPane.schemaTypeName === schemaTypeName &&\n        // 2. the filter is the default filter.\n        //\n        // NOTE: this case is to prevent false positive matches where the user\n        // has configured a more specific filter for a particular type. In that\n        // case, the user can implement their own `canHandleIntent` function\n        resolvedPane.options.filter === '_type == $type')\n    ) {\n      return [\n        {\n          panes: [\n            // map the current path to router panes\n            ...path.map((id) => [{id}]),\n            // then augment with the intents IDs and params\n            [{id: params.id, params: otherParams, payload}],\n          ],\n          depthIndex: path.length,\n          levelIndex,\n        },\n      ]\n    }\n\n    if (resolvedPane.type === 'list' && resolvedPane.child && resolvedPane.items) {\n      return (\n        await Promise.all(\n          resolvedPane.items.map((item, nextLevelIndex) => {\n            if (item.type === 'divider') return Promise.resolve([])\n\n            return traverse({\n              currentId: item._id || item.id,\n              flatIndex: flatIndex + 1,\n              intent,\n              params,\n              parent: resolvedPane,\n              path: [...path, item.id],\n              payload,\n              unresolvedPane:\n                typeof resolvedPane.child === 'function'\n                  ? memoBind(resolvedPane, 'child')\n                  : resolvedPane.child,\n              levelIndex: nextLevelIndex,\n              structureContext,\n            })\n          }),\n        )\n      ).flat()\n    }\n\n    return []\n  }\n\n  const matchingPanes = await traverse({\n    currentId: 'root',\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext,\n  })\n\n  const closestPaneToRoot = matchingPanes.sort((a, b) => {\n    // break ties with the level index\n    if (a.depthIndex === b.depthIndex) return a.levelIndex - b.levelIndex\n    return a.depthIndex - b.depthIndex\n  })[0]\n\n  if (closestPaneToRoot) {\n    return closestPaneToRoot.panes\n  }\n\n  return fallbackEditorPanes\n}\n", "import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {isEqual} from 'lodash'\nimport {Observable, NEVER, of as observableOf, concat} from 'rxjs'\nimport {switchMap, map, scan, distinctUntilChanged, pairwise, startWith} from 'rxjs/operators'\nimport {\n  DocumentPaneNode,\n  PaneNode,\n  RouterPaneSiblingContext,\n  RouterPanes,\n  RouterPaneSibling,\n  PaneNodeResolver,\n  UnresolvedPaneNode,\n} from '../types'\nimport {StructureContext} from '../structureBuilder'\nimport {assignId} from './assignId'\nimport {createPaneResolver, PaneResolver, PaneResolverMiddleware} from './createPaneResolver'\nimport {memoBind} from './memoBind'\nimport {PaneResolutionError} from './PaneResolutionError'\n\n/**\n * the fallback editor child that is implicitly inserted into the structure tree\n * if the id starts with `__edit__`\n */\nconst fallbackEditorChild: PaneNodeResolver = (nodeId, context): DocumentPaneNode => {\n  const id = nodeId.replace(/^__edit__/, '')\n  const {\n    params,\n    payload,\n    structureContext: {resolveDocumentNode},\n  } = context\n  const {type, template} = params\n\n  if (!type) {\n    throw new Error(\n      `Document type for document with ID ${id} was not provided in the router params.`,\n    )\n  }\n\n  let defaultDocumentBuilder = resolveDocumentNode({schemaType: type, documentId: id}).id('editor')\n\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(\n      template,\n      payload as {[key: string]: unknown},\n    )\n  }\n\n  return defaultDocumentBuilder.serialize() as DocumentPaneNode\n}\n\n/**\n * takes in a `RouterPaneSiblingContext` and returns a normalized string\n * representation that can be used for comparisons\n */\nfunction hashContext(context: RouterPaneSiblingContext): string {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path,\n  })})`\n}\n\n/**\n * takes in `ResolvedPaneMeta` and returns a normalized string representation\n * that can be used for comparisons\n */\nconst hashResolvedPaneMeta = (meta: ResolvedPaneMeta): string => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === 'resolvedMeta' ? assignId(meta.paneNode) : null,\n  }\n\n  return `metaHash(${JSON.stringify(normalized)})`\n}\n\n/**\n * Represents one flattened \"router pane\", including the source group and\n * sibling indexes.\n *\n * @see RouterPanes\n */\ninterface FlattenedRouterPane {\n  routerPaneSibling: RouterPaneSibling\n  flatIndex: number\n  groupIndex: number\n  siblingIndex: number\n}\n\n/**\n * The state of the accumulator used to store and manage memo cache state\n */\ninterface CacheState {\n  /**\n   * Holds the memoization results keyed by a combination of `assignId` and a\n   * context hash.\n   */\n  resolvedPaneCache: Map<string, Observable<PaneNode>>\n  /**\n   * Acts as a dictionary that stores cache keys by their flat index. This is\n   * used to clean up the cache between different branches in the pane\n   * structure.\n   *\n   * @see createResolvedPaneNodeStream look inside the `scan` where `wrapFn` is\n   * defined\n   */\n  cacheKeysByFlatIndex: Array<Set<string>>\n  /**\n   * The resulting memoized `PaneResolver` function. This function closes over\n   * the `resolvedPaneCache`.\n   */\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n}\n\nexport interface CreateResolvedPaneNodeStreamOptions {\n  /**\n   * an input stream of `RouterPanes`\n   * @see RouterPanes\n   */\n  routerPanesStream: Observable<RouterPanes>\n  /**\n   * any `UnresolvedPaneNode` (could be an observable, promise, pane resolver etc)\n   */\n  rootPaneNode: UnresolvedPaneNode\n  /** used primarily for testing */\n  initialCacheState?: CacheState\n\n  structureContext: StructureContext\n}\n\n/**\n * The result of pane resolving\n */\nexport type ResolvedPaneMeta = {\n  groupIndex: number\n  siblingIndex: number\n  flatIndex: number\n  routerPaneSibling: RouterPaneSibling\n  path: string[]\n} & ({type: 'loading'; paneNode: null} | {type: 'resolvedMeta'; paneNode: PaneNode})\n\ninterface ResolvePaneTreeOptions {\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n  unresolvedPane: UnresolvedPaneNode | undefined\n  parent: PaneNode | null\n  path: string[]\n  structureContext: StructureContext\n}\n\n/**\n * A recursive pane resolving function. Starts at one unresolved pane node and\n * continues until there is no more flattened router panes that can be used as\n * input to the unresolved panes.\n */\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent,\n  path,\n  resolvePane,\n  structureContext,\n}: ResolvePaneTreeOptions): Observable<ResolvedPaneMeta[]> {\n  const [current, ...rest] = flattenedRouterPanes\n  const next = rest[0] as FlattenedRouterPane | undefined\n\n  const context: RouterPaneSiblingContext = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext,\n  }\n\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      switchMap((paneNode) => {\n        // we can create a `resolvedMeta` type using it\n        const resolvedPaneMeta: ResolvedPaneMeta = {\n          type: 'resolvedMeta',\n          ...current,\n          paneNode: paneNode,\n          path: context.path,\n        }\n\n        // for the other unresolved panes, we can create \"loading panes\"\n        const loadingPanes = rest.map((i, restIndex) => {\n          const loadingPanePath = [\n            ...context.path,\n            ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`),\n          ]\n\n          const loadingPane: ResolvedPaneMeta = {\n            type: 'loading',\n            path: loadingPanePath,\n            paneNode: null,\n            ...i,\n          }\n\n          return loadingPane\n        })\n\n        if (!rest.length) {\n          return observableOf([resolvedPaneMeta])\n        }\n\n        let nextStream\n\n        if (\n          // the fallback editor case\n          next?.routerPaneSibling.id.startsWith('__edit__')\n        ) {\n          nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        } else if (current.groupIndex === next?.groupIndex) {\n          // if the next flattened router pane has the same group index as the\n          // current flattened router pane, then the next flattened router pane\n          // belongs to the same group (i.e. it is a split pane)\n          nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent,\n            path,\n            resolvePane,\n            structureContext,\n          })\n        } else {\n          // normal children resolving\n          nextStream = resolvePaneTree({\n            unresolvedPane:\n              typeof paneNode.child === 'function'\n                ? (memoBind(paneNode, 'child') as PaneNodeResolver)\n                : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        }\n\n        return concat(\n          // we emit the loading panes first in a concat (this emits immediately)\n          observableOf([resolvedPaneMeta, ...loadingPanes]),\n          // then whenever the next stream is done, the results will be combined.\n          nextStream.pipe(map((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes])),\n        )\n      }),\n    )\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\n          `Pane resolution error at index ${e.context.index}${\n            e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : ''\n          }: ${e.message}${e.helpId ? ` - see ${generateHelpUrl(e.helpId)}` : ''}`,\n          e,\n        )\n      }\n\n      if (e.helpId === 'structure-item-returned-no-child') {\n        // returning an observable of an empty array will remove loading panes\n        // note: this one intentionally does not throw\n        return observableOf([])\n      }\n    }\n\n    throw e\n  }\n}\n\n/**\n * Takes in a stream of `RouterPanes` and an unresolved root pane and returns\n * a stream of `ResolvedPaneMeta`\n */\nexport function createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: new Map(),\n    resolvePane: () => NEVER,\n  },\n  structureContext,\n}: CreateResolvedPaneNodeStreamOptions): Observable<ResolvedPaneMeta[]> {\n  const resolvedPanes$ = routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    map((rawRouterPanes) => [[{id: 'root'}], ...rawRouterPanes]),\n    // create flattened router panes\n    map((routerPanes) => {\n      const flattenedRouterPanes: FlattenedRouterPane[] = routerPanes\n        .flatMap((routerPaneGroup, groupIndex) =>\n          routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n            routerPaneSibling,\n            groupIndex,\n            siblingIndex,\n          })),\n        )\n        // add in the flat index\n        .map((i, index) => ({...i, flatIndex: index}))\n\n      return flattenedRouterPanes\n    }),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    startWith([] as FlattenedRouterPane[]),\n    pairwise(),\n    map(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i]\n        const currValue = curr[i]\n\n        if (!isEqual(prevValue, currValue)) {\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i,\n          }\n        }\n      }\n\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length,\n      }\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    scan((acc, next) => {\n      const {cacheKeysByFlatIndex, resolvedPaneCache} = acc\n      const {flattenedRouterPanes, diffIndex} = next\n\n      // use the `cacheKeysByFlatIndex` like a dictionary to find cache keys to\n      // and cache keys to delete\n      const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1)\n      const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1)\n\n      const keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet)))\n      const keysToDelete = afterDiffIndex\n        .flatMap((keySet) => Array.from(keySet))\n        .filter((key) => !keysToKeep.has(key))\n\n      for (const key of keysToDelete) {\n        resolvedPaneCache.delete(key)\n      }\n\n      // create a memoizing pane resolver middleware that utilizes the cache\n      // maintained above. this keeps the cache from growing indefinitely\n      const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n        const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`\n        const cachedResolvedPane = key && resolvedPaneCache.get(key)\n        if (cachedResolvedPane) return cachedResolvedPane\n\n        const result = nextFn(unresolvedPane, context, flatIndex)\n        if (!key) return result\n\n        const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || new Set()\n        cacheKeySet.add(key)\n        cacheKeysByFlatIndex[flatIndex] = cacheKeySet\n        resolvedPaneCache.set(key, result)\n        return result\n      }\n\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver(memoize),\n      }\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    switchMap(({flattenedRouterPanes, resolvePane}) =>\n      resolvePaneTree({\n        unresolvedPane: rootPaneNode,\n        flattenedRouterPanes,\n        parent: null,\n        path: [],\n        resolvePane,\n        structureContext,\n      }),\n    ),\n  )\n\n  // after we've created a stream of `ResolvedPaneMeta[]`, we need to clean up\n  // the results to remove unwanted loading panes and prevent unnecessary\n  // emissions\n  return resolvedPanes$.pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    scan(\n      (prev, next) =>\n        next.map((nextPane, index) => {\n          const prevPane = prev[index] as ResolvedPaneMeta | undefined\n          if (!prevPane) return nextPane\n          if (nextPane.type !== 'loading') return nextPane\n\n          if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n            return prevPane\n          }\n          return nextPane\n        }),\n      [] as ResolvedPaneMeta[],\n    ),\n    // this prevents duplicate emissions\n    distinctUntilChanged((prev, next) => {\n      if (prev.length !== next.length) return false\n\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i]\n        const nextValue = next[i]\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n          return false\n        }\n      }\n\n      return true\n    }),\n  )\n}\n", "import {useEffect, useMemo, useState} from 'react'\nimport {ReplaySubject} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {LOADING_PANE} from '../constants'\nimport {RouterPanes, PaneNode, RouterPaneGroup} from '../types'\nimport {useDeskTool} from '../useDeskTool'\nimport {createResolvedPaneNodeStream} from './createResolvedPaneNodeStream'\nimport {RouterState, useRouter} from 'sanity/router'\n\ninterface PaneData {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  key: string\n  pane: PaneNode | typeof LOADING_PANE\n  params: Record<string, string | undefined>\n  path: string\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n}\n\nexport interface Panes {\n  paneDataItems: PaneData[]\n  routerPanes: RouterPanes\n  resolvedPanes: (PaneNode | typeof LOADING_PANE)[]\n}\n\nfunction useRouterPanesStream() {\n  const routerStateSubject = useMemo(() => new ReplaySubject<RouterState>(1), [])\n  const routerPanes$ = useMemo(\n    () =>\n      routerStateSubject\n        .asObservable()\n        .pipe(map((_routerState) => (_routerState?.panes || []) as RouterPanes)),\n    [routerStateSubject],\n  )\n  const {state: routerState} = useRouter()\n  useEffect(() => {\n    routerStateSubject.next(routerState)\n  }, [routerState, routerStateSubject])\n\n  return routerPanes$\n}\n\nexport function useResolvedPanes(): Panes {\n  // used to propagate errors from async effect. throwing inside of the render\n  // will bubble the error to react where it can be picked up by standard error\n  // boundaries\n  const [error, setError] = useState<unknown>()\n  if (error) throw error\n\n  const {structureContext, rootPaneNode} = useDeskTool()\n\n  const [data, setData] = useState<Panes>({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: [],\n  })\n\n  const routerPanesStream = useRouterPanesStream()\n\n  useEffect(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext,\n    }).pipe(\n      map((resolvedPanes) => {\n        const routerPanes = resolvedPanes.reduce<RouterPanes>((acc, next) => {\n          const currentGroup = acc[next.groupIndex] || []\n          currentGroup[next.siblingIndex] = next.routerPaneSibling\n          acc[next.groupIndex] = currentGroup\n          return acc\n        }, [])\n\n        const groupsLen = routerPanes.length\n\n        const paneDataItems = resolvedPanes.map((pane) => {\n          const {groupIndex, flatIndex, siblingIndex, routerPaneSibling, path} = pane\n          const itemId = routerPaneSibling.id\n          const nextGroup = routerPanes[groupIndex + 1] as RouterPaneGroup | undefined\n\n          const paneDataItem: PaneData = {\n            active: groupIndex === groupsLen - 2,\n            childItemId: nextGroup?.[0].id ?? null,\n            index: flatIndex,\n            itemId: routerPaneSibling.id,\n            groupIndex,\n            key: `${\n              pane.type === 'loading' ? 'unknown' : pane.paneNode.id\n            }-${itemId}-${siblingIndex}`,\n            pane: pane.type === 'loading' ? LOADING_PANE : pane.paneNode,\n            params: routerPaneSibling.params || {},\n            path: path.join(';'),\n            payload: routerPaneSibling.payload,\n            selected: flatIndex === resolvedPanes.length - 1,\n            siblingIndex,\n          }\n\n          return paneDataItem\n        })\n\n        return {\n          paneDataItems,\n          routerPanes,\n          resolvedPanes: paneDataItems.map((pane) => pane.pane),\n        }\n      }),\n    )\n\n    const subscription = resolvedPanes$.subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e),\n    })\n\n    return () => subscription.unsubscribe()\n  }, [rootPaneNode, routerPanesStream, structureContext])\n\n  return data\n}\n", "import {uuid} from '@sanity/uuid'\nimport {first} from 'rxjs/operators'\nimport {firstValueFrom, Observable} from 'rxjs'\nimport {PaneResolutionError} from '../../../structureResolvers'\nimport {getPublishedId, DocumentStore} from 'sanity'\n\nexport function removeDraftPrefix(documentId: string): string {\n  const publishedId = getPublishedId(documentId)\n\n  if (publishedId !== documentId) {\n    console.warn(\n      'Removed unexpected draft id in document link: All links to documents should have the ' +\n        '`drafts.`-prefix removed and something appears to have made an intent link to `%s`',\n      documentId,\n    )\n  }\n\n  return publishedId\n}\n\nexport async function ensureDocumentIdAndType(\n  documentStore: DocumentStore,\n  id: string | undefined,\n  type: string | undefined,\n): Promise<{id: string; type: string}> {\n  if (id && type) return {id, type}\n  if (!id && type) return {id: uuid(), type}\n  if (id && !type) {\n    const resolvedType = await firstValueFrom(\n      documentStore.resolveTypeForDocument(id) as Observable<string>,\n    )\n\n    return {id, type: resolvedType}\n  }\n\n  throw new PaneResolutionError({\n    message: 'Neither document `id` or `type` was provided when trying to resolve intent.',\n  })\n}\n", "import {memo, useCallback, useEffect, useState} from 'react'\nimport {resolveIntent} from '../../../structureResolvers'\nimport {useDeskTool} from '../../../useDeskTool'\nimport {ensureDocumentIdAndType} from './utils'\nimport {useRouter, useRouterState} from 'sanity/router'\nimport {isRecord, useDocumentStore} from 'sanity'\n\nconst EMPTY_RECORD: Record<string, unknown> = {}\n\n/**\n * A component that receives an intent from props and redirects to the resolved\n * intent location (while showing a loading spinner during the process)\n */\nexport const IntentResolver = memo(function IntentResolver() {\n  const {navigate} = useRouter()\n  const maybeIntent = useRouterState(\n    useCallback((routerState) => {\n      const intentName = typeof routerState.intent === 'string' ? routerState.intent : undefined\n      return intentName\n        ? {\n            intent: intentName,\n            params: isRecord(routerState.params) ? routerState.params : EMPTY_RECORD,\n            payload: routerState.payload,\n          }\n        : undefined\n    }, []),\n  )\n  const {rootPaneNode, structureContext} = useDeskTool()\n  const documentStore = useDocumentStore()\n  const [error, setError] = useState<unknown>(null)\n\n  // this re-throws errors so that parent ErrorBoundary's can handle them properly\n  if (error) throw error\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (maybeIntent) {\n      const {intent, params, payload} = maybeIntent\n\n      let cancelled = false\n      // eslint-disable-next-line no-inner-declarations\n      async function effect() {\n        const {id, type} = await ensureDocumentIdAndType(\n          documentStore,\n          typeof params.id === 'string' ? params.id : undefined,\n          typeof params.type === 'string' ? params.type : undefined,\n        )\n\n        if (cancelled) return\n\n        const panes = await resolveIntent({\n          intent,\n          params: {...params, id, type},\n          payload,\n          rootPaneNode,\n          structureContext,\n        })\n\n        if (cancelled) return\n\n        navigate({panes}, {replace: true})\n      }\n\n      effect().catch(setError)\n\n      return () => {\n        cancelled = true\n      }\n    }\n  }, [documentStore, maybeIntent, navigate, rootPaneNode, structureContext])\n\n  return null\n})\n", "import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {Box, Button, Card, Code, Container, Heading, Label, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport styled from 'styled-components'\nimport {SyncIcon} from '@sanity/icons'\nimport {SerializeError} from '../../structureBuilder'\nimport {PaneResolutionError} from '../../structureResolvers'\n\nconst PathSegment = styled.span`\n  &:not(:last-child)::after {\n    content: ' ➝ ';\n    opacity: 0.5;\n  }\n`\n\nfunction formatStack(stack: string) {\n  return (\n    stack\n      // Prettify builder functions\n      .replace(/\\(\\.\\.\\.\\)\\./g, '(...)\\n  .')\n      // Remove webpack cruft from function names\n      .replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, '')\n      // Remove default export postfix from function names\n      .replace(/___default\\./g, '.')\n      // Replace full host path, leave only path to JS-file\n      .replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, 'g'), ' (')\n  )\n}\n\ninterface StructureErrorProps {\n  error: unknown\n}\n\nexport function StructureError({error}: StructureErrorProps) {\n  if (!(error instanceof PaneResolutionError)) {\n    throw error\n  }\n  const {cause} = error\n\n  // Serialize errors are well-formatted and should be readable, in these cases a stack trace is\n  // usually not helpful. Build errors in dev (with HMR) usually also contains a bunch of garbage\n  // instead of an actual error message, so make sure we show the message in these cases as well\n  const stack = cause?.stack || error.stack\n  const showStack =\n    stack && !(cause instanceof SerializeError) && !error.message.includes('Module build failed:')\n\n  const path = cause instanceof SerializeError ? cause.path : []\n  const helpId = (cause instanceof SerializeError && cause.helpId) || error.helpId\n\n  const handleReload = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" padding={4} sizing=\"border\" tone=\"critical\">\n      <Container>\n        <Heading as=\"h2\">Encountered an error while reading structure</Heading>\n\n        <Card marginTop={4} padding={4} radius={2} overflow=\"auto\" shadow={1} tone=\"inherit\">\n          {path.length > 0 && (\n            <Stack space={2}>\n              <Label>Structure path</Label>\n              <Code>\n                {/* TODO: it seems like the path is off by one and includes */}\n                {/* `root` twice  */}\n                {path.slice(1).map((segment, i) => (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <PathSegment key={`${segment}-${i}`}>{segment}</PathSegment>\n                ))}\n              </Code>\n            </Stack>\n          )}\n\n          <Stack marginTop={4} space={2}>\n            <Label>Error</Label>\n            <Code>{showStack ? formatStack(stack) : error.message}</Code>\n          </Stack>\n\n          {helpId && (\n            <Box marginTop={4}>\n              <Text>\n                <a href={generateHelpUrl(helpId)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  View documentation\n                </a>\n              </Text>\n            </Box>\n          )}\n\n          <Box marginTop={4}>\n            <Button text=\"Reload\" icon={SyncIcon} tone=\"primary\" onClick={handleReload} />\n          </Box>\n        </Card>\n      </Container>\n    </Card>\n  )\n}\n", "import {Box, Text} from '@sanity/ui'\nimport React from 'react'\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\nimport {isRecord} from 'sanity'\n\ninterface UnknownPaneProps {\n  isSelected: boolean\n  pane: unknown\n  paneKey: string\n}\n\n/**\n * @internal\n */\nexport function UnknownPane(props: UnknownPaneProps) {\n  const {isSelected, pane, paneKey} = props\n  const type = (isRecord(pane) && pane.type) || null\n\n  return (\n    <Pane id={paneKey} selected={isSelected}>\n      <PaneHeader title=\"Unknown pane type\" />\n      <PaneContent>\n        <Box padding={4}>\n          {typeof type === 'string' ? (\n            <Text as=\"p\" muted>\n              Structure item of type <code>{type}</code> is not a known entity.\n            </Text>\n          ) : (\n            <Text as=\"p\" muted>\n              Structure item is missing required <code>type</code> property.\n            </Text>\n          )}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n", "import {Observable, of, merge} from 'rxjs'\nimport {mapTo, delay} from 'rxjs/operators'\nimport {isDev} from 'sanity'\n\n/**\n * @internal\n */\nexport function getWaitMessages(path: string[]): Observable<string> {\n  const thresholds = [\n    {ms: 300, message: 'Loading…'},\n    {ms: 5000, message: 'Still loading…'},\n  ]\n\n  if (isDev) {\n    const message = [\n      'Check console for errors?',\n      'Is your observable/promise resolving?',\n      path.length > 0 ? `Structure path: ${path.join(' ➝ ')}` : '',\n    ]\n\n    thresholds.push({\n      ms: 10000,\n      message: message.join('\\n'),\n    })\n  }\n\n  const src = of(null)\n\n  return merge(...thresholds.map(({ms, message}) => src.pipe(mapTo(message), delay(ms))))\n}\n", "import {Box, CardTone, Flex, Spinner, Text, _raf2} from '@sanity/ui'\nimport React, {memo, useMemo, useState, useEffect} from 'react'\nimport {Observable} from 'rxjs'\nimport styled from 'styled-components'\nimport {Delay} from '../../components/Delay'\nimport {Pane, PaneContent} from '../../components/pane'\nimport {getWaitMessages} from './getWaitMessages'\n\ninterface LoadingPaneProps {\n  delay?: number\n  flex?: number\n  message?: string | ((p: string[]) => string | Observable<string>)\n  minWidth?: number\n  paneKey: string\n  path?: string\n  selected?: boolean\n  title?: string\n  tone?: CardTone\n}\n\nconst DELAY = false\nconst DEFAULT_MESSAGE = 'Loading…'\n\nconst Content = styled(Flex)`\n  opacity: 0;\n  transition: opacity 200ms;\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n`\n\n/**\n * @internal\n */\nexport const LoadingPane = memo((props: LoadingPaneProps) => {\n  const {\n    delay = 300,\n    flex,\n    message: messageProp = getWaitMessages,\n    minWidth,\n    paneKey,\n    path,\n    selected,\n    title,\n    tone,\n  } = props\n\n  const resolvedMessage = useMemo(() => {\n    if (typeof messageProp === 'function') {\n      return messageProp(path ? path.split(';') : [])\n    }\n\n    return messageProp\n  }, [messageProp, path])\n\n  const [currentMessage, setCurrentMessage] = useState<string | null>(() => {\n    if (typeof resolvedMessage === 'string') return resolvedMessage\n    return DEFAULT_MESSAGE\n  })\n\n  useEffect(() => {\n    if (typeof resolvedMessage !== 'object') return undefined\n    if (typeof resolvedMessage.subscribe === 'function') return undefined\n\n    const sub = resolvedMessage.subscribe(setCurrentMessage)\n\n    return () => sub.unsubscribe()\n  }, [resolvedMessage])\n\n  const [contentElement, setContentElement] = useState<HTMLDivElement | null>(null)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    if (!contentElement) return undefined\n    return _raf2(() => setMounted(true))\n  }, [contentElement])\n\n  const content = (\n    <Content\n      align=\"center\"\n      data-mounted={mounted ? '' : undefined}\n      direction=\"column\"\n      height=\"fill\"\n      justify=\"center\"\n      ref={setContentElement}\n    >\n      <Spinner muted />\n\n      {(title || currentMessage) && (\n        <Box marginTop={3}>\n          <Text align=\"center\" muted size={1}>\n            {title || currentMessage}\n          </Text>\n        </Box>\n      )}\n    </Content>\n  )\n\n  return (\n    <Pane flex={flex} id={paneKey} minWidth={minWidth} selected={selected} tone={tone}>\n      <PaneContent>{DELAY ? <Delay ms={delay}>{content}</Delay> : content}</PaneContent>\n    </Pane>\n  )\n})\n\nLoadingPane.displayName = 'LoadingPane'\n", "import React, {memo, lazy, Suspense} from 'react'\nimport {isEqual} from 'lodash'\nimport {PaneNode} from '../types'\nimport {PaneRouterProvider} from '../components/paneRouter'\nimport {UnknownPane} from './unknown'\nimport {LoadingPane} from './loading'\n\ninterface DeskToolPaneProps {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  pane: PaneNode\n  paneKey: string\n  params: Record<string, string | undefined>\n  payload: unknown\n  path: string\n  selected: boolean\n  siblingIndex: number\n}\n\n// TODO: audit this creates separate chunks\nconst paneMap = {\n  component: lazy(() => import('./userComponent')),\n  document: lazy(() => import('./document')),\n  documentList: lazy(() => import('./documentList')),\n  list: lazy(() => import('./list')),\n}\n\n/**\n * NOTE: The same pane might appear multiple times (split pane), so use index as tiebreaker\n *\n * @internal\n */\nexport const DeskToolPane = memo(\n  function DeskToolPane(props: DeskToolPaneProps) {\n    const {\n      active,\n      childItemId,\n      groupIndex,\n      index,\n      itemId,\n      pane,\n      paneKey,\n      params,\n      payload,\n      path,\n      selected,\n      siblingIndex,\n    } = props\n\n    const PaneComponent = paneMap[pane.type] || UnknownPane\n\n    return (\n      <PaneRouterProvider\n        flatIndex={index}\n        index={groupIndex}\n        params={params}\n        payload={payload}\n        siblingIndex={siblingIndex}\n      >\n        <Suspense fallback={<LoadingPane paneKey={paneKey} path={path} selected={selected} />}>\n          <PaneComponent\n            childItemId={childItemId || ''}\n            index={index}\n            itemId={itemId}\n            isActive={active}\n            isSelected={selected}\n            paneKey={paneKey}\n            // @ts-expect-error TS doesn't know how to handle this intersection\n            pane={pane}\n          />\n        </Suspense>\n      </PaneRouterProvider>\n    )\n  },\n  (\n    {params: prevParams = {}, payload: prevPayload = null, ...prev},\n    {params: nextParams = {}, payload: nextPayload = null, ...next},\n  ) => {\n    // deeply compare these objects (it's okay, they're small)\n    if (!isEqual(prevParams, nextParams)) return false\n    if (!isEqual(prevPayload, nextPayload)) return false\n\n    const keys = new Set([...Object.keys(prev), ...Object.keys(next)]) as Set<\n      keyof typeof next | keyof typeof prev\n    >\n\n    // then shallow equal the rest\n    for (const key of keys) {\n      if (prev[key] !== next[key]) return false\n    }\n\n    return true\n  },\n)\n", "import React from 'react'\nimport {Box, CardTone} from '@sanity/ui'\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\n\n/**\n * @internal\n */\nexport function ErrorPane(props: {\n  children?: React.ReactNode\n  currentMinWidth?: number\n  flex?: number\n  minWidth?: number\n  paneKey: string\n  title?: React.ReactNode\n  tone?: CardTone\n}) {\n  const {\n    children,\n    currentMinWidth,\n    flex,\n    minWidth,\n    paneKey,\n    title = 'Error',\n    tone = 'critical',\n  } = props\n\n  return (\n    <Pane\n      currentMinWidth={currentMinWidth}\n      flex={flex}\n      id={paneKey}\n      minWidth={minWidth}\n      tone={tone}\n    >\n      <PaneHeader title={title} />\n      <PaneContent overflow=\"auto\">\n        <Box paddingX={4} paddingY={5}>\n          {children}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n", "import {useToast} from '@sanity/ui'\nimport React, {memo, useEffect, useRef} from 'react'\nimport {useDocumentPane} from './useDocumentPane'\nimport {useDocumentOperationEvent} from 'sanity'\nimport {usePaneRouter} from '../../components'\n\nfunction getOpErrorTitle(op: string): string {\n  if (op === 'delete') {\n    return `An error occurred while attempting to delete this document.\n      This usually means that there are other documents that refers to it.`\n  }\n  if (op === 'unpublish') {\n    return `An error occurred while attempting to unpublish this document.\n      This usually means that there are other documents that refers to it.`\n  }\n  return `An error occurred during ${op}`\n}\n\nfunction getOpSuccessTitle(op: string): string {\n  if (op === 'publish') {\n    return `The document was published`\n  }\n  if (op === 'unpublish') {\n    return `The document was unpublished. A draft has been created from the latest published version.`\n  }\n  if (op === 'discardChanges') {\n    return `All changes since last publish has now been discarded. The discarded draft can still be recovered from history`\n  }\n  if (op === 'delete') {\n    return `The document was successfully deleted`\n  }\n  return `Successfully performed ${op} on document`\n}\n\nconst IGNORE_OPS = ['patch', 'commit']\n\nexport const DocumentOperationResults = memo(function DocumentOperationResults() {\n  const {push: pushToast} = useToast()\n  const {documentId, documentType} = useDocumentPane()\n  const event: any = useDocumentOperationEvent(documentId, documentType)\n  const prevEvent = useRef(event)\n  const paneRouter = usePaneRouter()\n\n  useEffect(() => {\n    if (!event || event === prevEvent.current) return\n\n    let cleanupId: number | undefined\n\n    if (event.type === 'error') {\n      pushToast({\n        closable: true,\n        duration: 30000, // 30s\n        status: 'error',\n        title: getOpErrorTitle(event.op),\n        description: (\n          <details>\n            <summary>Details</summary>\n            {event.error.message}\n          </details>\n        ),\n      })\n    }\n\n    if (event.type === 'success' && !IGNORE_OPS.includes(event.op)) {\n      pushToast({\n        closable: true,\n        status: 'success',\n        title: getOpSuccessTitle(event.op),\n      })\n    }\n\n    /**\n     * If the document was deleted successfully, close the pane.\n     */\n    if (event.type === 'success' && event.op === 'delete') {\n      // Wait until next tick to allow deletion toasts to appear first\n      cleanupId = setTimeout(() => paneRouter.closeCurrentAndAfter(), 0) as any as number\n    }\n\n    prevEvent.current = event\n\n    // eslint-disable-next-line consistent-return\n    return () => clearTimeout(cleanupId)\n  }, [event, paneRouter, pushToast])\n\n  return null\n})\n", "import {useCallback, useEffect, useMemo, useState} from 'react'\nimport {useSettingsStore} from 'sanity'\n\n/**\n * @internal\n */\nexport function useDeskToolSetting<ValueType>(\n  namespace: string | null,\n  key: string,\n  defaultValue?: ValueType,\n): [ValueType | undefined, (_value: ValueType) => void] {\n  const settingsStore = useSettingsStore()\n  const [value, setValue] = useState<ValueType | undefined>(defaultValue)\n\n  const deskToolSettings = useMemo(() => settingsStore.forNamespace('desk-tool'), [settingsStore])\n\n  const settings = useMemo(() => {\n    if (namespace) {\n      return deskToolSettings.forNamespace(namespace).forKey(key)\n    }\n\n    return deskToolSettings.forKey(key)\n  }, [deskToolSettings, namespace, key])\n\n  useEffect(() => {\n    const sub = settings.listen(defaultValue).subscribe({\n      next: setValue as any,\n    })\n\n    return () => sub?.unsubscribe()\n  }, [defaultValue, key, namespace, settings])\n\n  const set = useCallback(\n    (newValue: ValueType) => {\n      setValue(newValue)\n      settings.set(newValue as any)\n    },\n    [settings],\n  )\n\n  return useMemo(() => [value, set], [set, value])\n}\n", "export const VIEW_MODE_PARSED = {id: 'parsed', title: 'Parsed'}\nexport const VIEW_MODE_RAW = {id: 'raw', title: 'Raw JSON'}\nexport const VIEW_MODES = [VIEW_MODE_PARSED, VIEW_MODE_RAW]\n", "import {SanityDocumentLike} from '@sanity/types'\nimport HLRU from 'hashlru'\nimport {isRecord, isString} from 'sanity'\n\nconst lru = HLRU(1000)\n\nexport function isExpanded(keyPath: any, value: any): any {\n  const cached = lru.get(keyPath)\n\n  if (cached === undefined) {\n    lru.set(keyPath, Array.isArray(value) || isRecord(value))\n    return isExpanded(keyPath, value)\n  }\n\n  return cached\n}\n\nexport function toggleExpanded(event: any): void {\n  const {path} = event\n  const current = lru.get(path)\n\n  if (current === undefined) {\n    // something is wrong\n    return\n  }\n\n  lru.set(path, !current)\n}\n\nexport function selectElement(element: HTMLElement): void {\n  const sel = window.getSelection()\n\n  if (sel) {\n    const range = document.createRange()\n\n    sel.removeAllRanges()\n    range.selectNodeContents(element)\n    sel.addRange(range)\n  }\n}\n\nexport function select(event: any): void {\n  selectElement(event.currentTarget)\n}\n\nexport function maybeSelectAll(event: any): void {\n  const selectAll = event.keyCode === 65 && (event.metaKey || event.ctrlKey)\n\n  if (!selectAll) {\n    return\n  }\n\n  event.preventDefault()\n\n  selectElement(event.currentTarget)\n}\n\nexport function isDocumentLike(value: unknown): value is SanityDocumentLike {\n  return isRecord(value) && isString(value._id) && isString(value._type)\n}\n", "import {rem, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const JSONInspectorWrapper = styled.div(({theme}: {theme: Theme}) => {\n  const {color, fonts, space} = theme.sanity\n\n  return css`\n    & .json-inspector,\n    & .json-inspector .json-inspector__selection {\n      font-family: ${fonts.code.family};\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n      color: var(--card-code-fg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf {\n      padding-left: ${rem(space[4])};\n    }\n\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\n      padding-top: ${rem(space[3])};\n      padding-left: 0;\n    }\n\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__line {\n      display: block;\n      position: relative;\n      cursor: default;\n    }\n\n    & .json-inspector .json-inspector__line::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -200px;\n      right: -50px;\n      bottom: 0;\n      z-index: -1;\n      pointer-events: none;\n    }\n\n    & .json-inspector .json-inspector__line:hover::after {\n      background: var(--card-code-bg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\n      content: '▸ ';\n      margin-left: calc(0 - ${rem(space[4])} + 3px);\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n    }\n\n    &\n      .json-inspector\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\n      > .json-inspector__line::before {\n      content: '▾ ';\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n    }\n\n    & .json-inspector .json-inspector__radio,\n    & .json-inspector .json-inspector__flatpath {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__value {\n      margin-left: ${rem(space[4] / 2)};\n    }\n\n    &\n      .json-inspector\n      > .json-inspector__leaf_root\n      > .json-inspector__line\n      > .json-inspector__key\n      + .json-inspector__value {\n      margin: 0;\n    }\n\n    & .json-inspector .json-inspector__key {\n      color: ${color.syntax.property};\n    }\n\n    & .json-inspector .json-inspector__value_helper,\n    & .json-inspector .json-inspector__value_null {\n      color: ${color.syntax.constant};\n    }\n\n    & .json-inspector .json-inspector__not-found {\n      padding-top: ${rem(space[3])};\n    }\n\n    & .json-inspector .json-inspector__value_string {\n      color: ${color.syntax.string};\n    }\n\n    & .json-inspector .json-inspector__value_boolean {\n      color: ${color.syntax.boolean};\n    }\n\n    & .json-inspector .json-inspector__value_number {\n      color: ${color.syntax.number};\n    }\n\n    & .json-inspector .json-inspector__show-original {\n      display: inline-block;\n      padding: 0 6px;\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__show-original:hover {\n      color: inherit;\n    }\n\n    & .json-inspector .json-inspector__show-original::before {\n      content: '↔';\n    }\n\n    & .json-inspector .json-inspector__show-original:hover::after {\n      content: ' expand';\n    }\n  `\n})\n", "import {SearchIcon} from '@sanity/icons'\nimport {TextInput} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\nexport function Search(props: {onChange: (q: string) => void; query: string}) {\n  const {onChange, query} = props\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => onChange(event.target.value),\n    [onChange],\n  )\n\n  return (\n    <TextInput\n      icon={SearchIcon}\n      onChange={handleChange}\n      placeholder=\"Search\"\n      radius={2}\n      value={query || ''}\n    />\n  )\n}\n", "import {SanityDocument} from '@sanity/types'\nimport {Card, Code, Dialog, Flex, Tab, TabList, TabPanel} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport JSONInspector from '@rexxars/react-json-inspector'\nimport {DocTitle} from '../../../components'\nimport {useDeskToolSetting} from '../../../useDeskToolSetting'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {VIEW_MODE_PARSED, VIEW_MODE_RAW, VIEW_MODES} from './constants'\nimport {isDocumentLike, isExpanded, maybeSelectAll, select, toggleExpanded} from './helpers'\nimport {JSONInspectorWrapper} from './InspectDialog.styles'\nimport {Search} from './Search'\n\ninterface InspectDialogProps {\n  value: Partial<SanityDocument> | null\n}\n\nexport function InspectDialog(props: InspectDialogProps) {\n  const {value} = props\n  const {onInspectClose, paneKey} = useDocumentPane()\n  const dialogIdPrefix = `${paneKey}_inspect_`\n\n  /* this creates a view mode (the default that it opens with is the parsed tab) that is saved based on the paneKey\n  where the inspect dialog lives.\n  This also means that when a page is loaded, the state of the tabs remains and doesn't revert to the pane tab */\n  const [viewModeId, onViewModeChange] = useDeskToolSetting(\n    'desk-tool',\n    `inspect-view-preferred-view-mode-${paneKey}`,\n    'parsed',\n  )\n\n  /* based on the view mode it shows the right tab content */\n  const viewMode = VIEW_MODES.find((mode) => mode.id === viewModeId)\n\n  const setParsedViewMode = useCallback(() => {\n    onViewModeChange(VIEW_MODE_PARSED.id)\n  }, [onViewModeChange])\n\n  const setRawViewMode = useCallback(() => {\n    onViewModeChange(VIEW_MODE_RAW.id)\n  }, [onViewModeChange])\n\n  return (\n    <Dialog\n      id={`${dialogIdPrefix}dialog`}\n      header={\n        isDocumentLike(value) ? (\n          <>\n            Inspecting{' '}\n            <em>\n              <DocTitle document={value} />\n            </em>\n          </>\n        ) : (\n          <em>No value</em>\n        )\n      }\n      onClose={onInspectClose}\n      onClickOutside={onInspectClose}\n      width={3}\n    >\n      <Flex direction=\"column\" height=\"fill\">\n        <Card padding={3} shadow={1} style={{position: 'sticky', bottom: 0, zIndex: 3}}>\n          <TabList space={1}>\n            <Tab\n              aria-controls={`${dialogIdPrefix}tabpanel`}\n              fontSize={1}\n              id={`${dialogIdPrefix}tab-${VIEW_MODE_PARSED.id}`}\n              label={VIEW_MODE_PARSED.title}\n              onClick={setParsedViewMode}\n              selected={viewMode === VIEW_MODE_PARSED}\n            />\n            <Tab\n              aria-controls={`${dialogIdPrefix}tabpanel`}\n              fontSize={1}\n              id={`${dialogIdPrefix}tab-${VIEW_MODE_RAW.id}`}\n              label={VIEW_MODE_RAW.title}\n              onClick={setRawViewMode}\n              selected={viewMode === VIEW_MODE_RAW}\n            />\n          </TabList>\n        </Card>\n\n        <TabPanel\n          aria-labelledby={`${dialogIdPrefix}tab-${viewModeId}`}\n          flex={1}\n          id={`${dialogIdPrefix}tabpanel`}\n          overflow=\"auto\"\n          padding={4}\n          style={{outline: 'none'}}\n        >\n          {viewMode === VIEW_MODE_PARSED && (\n            <JSONInspectorWrapper>\n              <JSONInspector\n                data={value}\n                isExpanded={isExpanded}\n                onClick={toggleExpanded}\n                search={Search}\n              />\n            </JSONInspectorWrapper>\n          )}\n\n          {viewMode === VIEW_MODE_RAW && (\n            <Code\n              language=\"json\"\n              tabIndex={0}\n              onKeyDown={maybeSelectAll}\n              onDoubleClick={select}\n              onFocus={select}\n            >\n              {JSON.stringify(value, null, 2)}\n            </Code>\n          )}\n        </TabPanel>\n      </Flex>\n    </Dialog>\n  )\n}\n", "import React, {useCallback} from 'react'\nimport {Button, Card, Container, Flex, Text} from '@sanity/ui'\nimport {ReadOnlyIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {useDocumentOperation} from 'sanity'\nimport {useRouter} from 'sanity/router'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\ninterface DeletedDocumentBannerProps {\n  revisionId?: string | null\n}\n\nexport function DeletedDocumentBanner({revisionId}: DeletedDocumentBannerProps) {\n  const {documentId, documentType} = useDocumentPane()\n  const {restore} = useDocumentOperation(documentId, documentType)\n  const {navigateIntent} = useRouter()\n  const handleRestore = useCallback(() => {\n    if (revisionId) {\n      restore.execute(revisionId)\n      navigateIntent('edit', {id: documentId, type: documentType})\n    }\n  }, [documentId, documentType, navigateIntent, restore, revisionId])\n\n  return (\n    <Root data-testid=\"deleted-document-banner\" shadow={1} tone=\"transparent\">\n      <Container paddingX={4} paddingY={revisionId ? 2 : 3} sizing=\"border\" width={1}>\n        <Flex align=\"center\">\n          <Text size={1}>\n            <ReadOnlyIcon />\n          </Text>\n\n          <Flex align=\"center\" gap={2} flex={1} marginLeft={3}>\n            <Text size={1}>This document has been deleted.</Text>\n            {revisionId && (\n              <Button\n                fontSize={1}\n                padding={2}\n                mode=\"bleed\"\n                tone=\"primary\"\n                onClick={handleRestore}\n                text=\"Restore most recent version\"\n              />\n            )}\n          </Flex>\n        </Flex>\n      </Container>\n    </Root>\n  )\n}\n", "import {Box, Button, Card, Container, Flex, Text} from '@sanity/ui'\nimport {WarningOutlineIcon, SyncIcon, CloseIcon} from '@sanity/icons'\nimport React, {memo, useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {fromString as pathFromString, get as pathGet} from '@sanity/util/paths'\nimport {KeyedSegment, Reference} from '@sanity/types'\nimport {debounceTime, map} from 'rxjs/operators'\nimport {concat, Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {RouterPaneGroup} from '../../../types'\nimport {usePaneRouter} from '../../../components'\nimport {DocumentAvailability, useDocumentPreviewStore, getPublishedId} from 'sanity'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\nconst TextOneLine = styled(Text)`\n  & > * {\n    overflow: hidden;\n    overflow: clip;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n`\n\ninterface ParentReferenceInfo {\n  loading: boolean\n  result?: {\n    availability: {draft: DocumentAvailability; published: DocumentAvailability}\n    refValue: string | undefined\n  }\n}\n\nexport const ReferenceChangedBanner = memo(() => {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {params, groupIndex, routerPanesState, replaceCurrent, BackLink} = usePaneRouter()\n  const routerReferenceId = routerPanesState[groupIndex]?.[0].id\n  const parentGroup = routerPanesState[groupIndex - 1] as RouterPaneGroup | undefined\n  const parentSibling = parentGroup?.[0]\n  const parentId = parentSibling?.id\n  const hasHistoryOpen = Boolean(parentSibling?.params?.rev)\n  const parentRefPath = useMemo(() => {\n    return (params?.parentRefPath && pathFromString(params.parentRefPath)) || null\n  }, [params?.parentRefPath])\n\n  /**\n   * Loads information regarding the reference field of the parent pane. This\n   * is only applicable to child references (aka references-in-place).\n   *\n   * It utilizes the pane ID of the parent pane (which is a document ID) along\n   * with the `parentRefPath` router param on the current pane to find the\n   * current value of the reference field on the parent document.\n   *\n   * This is used to compare with the current pane's document ID. If the IDs\n   * don't match then this banner should reveal itself\n   */\n  const referenceInfo = useMemoObservable(\n    (): Observable<ParentReferenceInfo> => {\n      const parentRefPathSegment = parentRefPath?.[0] as string | undefined\n\n      // short-circuit: this document pane is not a child reference pane\n      if (!parentId || !parentRefPathSegment || !parentRefPath) {\n        return of({loading: false})\n      }\n\n      const publishedId = getPublishedId(parentId)\n      const path = pathFromString(parentRefPathSegment)\n\n      // note: observePaths doesn't support keyed path segments, so we need to select the nearest parent\n      const keyedSegmentIndex = path.findIndex(\n        (p): p is KeyedSegment => typeof p == 'object' && '_key' in p,\n      )\n\n      return concat(\n        // emit a loading state instantly\n        of({loading: true}),\n        // then emit the values from watching the published ID's path\n        documentPreviewStore\n          .unstable_observePathsDocumentPair(\n            publishedId,\n            (keyedSegmentIndex === -1 ? path : path.slice(0, keyedSegmentIndex)) as string[][],\n          )\n          .pipe(\n            // this debounce time is needed to prevent flashing banners due to\n            // the router state updating faster than the content-lake state. we\n            // debounce to wait for more emissions because the value pulled\n            // initially could be stale.\n            debounceTime(750),\n            map(\n              ({draft, published}): ParentReferenceInfo => ({\n                loading: false,\n                result: {\n                  availability: {\n                    draft: draft.availability,\n                    published: published.availability,\n                  },\n                  refValue: pathGet<Reference>(draft.snapshot || published.snapshot, parentRefPath)\n                    ?._ref,\n                },\n              }),\n            ),\n          ),\n      )\n    },\n    [documentPreviewStore, parentId, parentRefPath],\n    {loading: true},\n  )\n\n  const handleReloadReference = useCallback(() => {\n    if (referenceInfo.loading) return\n\n    if (referenceInfo.result?.refValue) {\n      replaceCurrent({\n        id: referenceInfo.result.refValue,\n        params: params as Record<string, string>,\n      })\n    }\n  }, [referenceInfo.loading, referenceInfo.result, replaceCurrent, params])\n\n  const shouldHide =\n    // if `parentId` or `parentRefPath` is not present then this banner is n/a\n    !parentId ||\n    !parentRefPath ||\n    // if viewing this pane via history, then hide\n    hasHistoryOpen ||\n    // if loading, hide\n    referenceInfo.loading ||\n    // if the parent document is not available (e.g. due to permission denied or\n    // not found) we don't want to display a warning here, but instead rely on the\n    // parent view to display the appropriate message\n    (!referenceInfo.result?.availability.draft.available &&\n      !referenceInfo.result?.availability.published.available) ||\n    // if the references are the same, then hide the reference changed banner\n    referenceInfo.result?.refValue === routerReferenceId\n\n  if (shouldHide) return null\n\n  return (\n    <Root shadow={1} tone=\"caution\" data-testid=\"reference-changed-banner\">\n      <Container paddingX={4} paddingY={2} sizing=\"border\" width={1}>\n        <Flex align=\"center\">\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n\n          {referenceInfo.result?.refValue ? (\n            <>\n              <Box flex={1} marginLeft={3}>\n                <TextOneLine title=\"This reference has changed since you opened it.\" size={1}>\n                  This reference has changed since you opened it.\n                </TextOneLine>\n              </Box>\n              <Box marginLeft={3}>\n                <Button\n                  onClick={handleReloadReference}\n                  icon={SyncIcon}\n                  fontSize={1}\n                  mode=\"ghost\"\n                  padding={2}\n                  space={2}\n                  text=\"Reload reference\"\n                />\n              </Box>\n            </>\n          ) : (\n            <>\n              <Box flex={1} marginLeft={3}>\n                <TextOneLine title=\"This reference has been removed since you opened it.\" size={1}>\n                  This reference has been removed since you opened it.\n                </TextOneLine>\n              </Box>\n              <Box marginLeft={3}>\n                <Button\n                  as={BackLink}\n                  icon={CloseIcon}\n                  fontSize={1}\n                  mode=\"ghost\"\n                  padding={2}\n                  space={2}\n                  text=\"Close reference\"\n                />\n              </Box>\n            </>\n          )}\n        </Flex>\n      </Container>\n    </Root>\n  )\n})\n\nReferenceChangedBanner.displayName = 'ReferenceChangedBanner'\n", "import React from 'react'\nimport {Box, Card, Container, Flex, Text} from '@sanity/ui'\nimport {ReadOnlyIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {useCurrentUser} from 'sanity'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\ninterface PermissionCheckBannerProps {\n  granted: boolean\n  requiredPermission: string\n}\n\nexport function PermissionCheckBanner({granted, requiredPermission}: PermissionCheckBannerProps) {\n  const currentUser = useCurrentUser()\n  const plural = currentUser?.roles?.length !== 1\n\n  const roles = join(\n    currentUser?.roles?.map((r) => <code key={r.name}>{r.title}</code>) || [],\n    ', ',\n  )\n\n  if (granted) return null\n\n  return (\n    <Root data-testid=\"permission-check-banner\" shadow={1} tone=\"transparent\">\n      <Container paddingX={4} paddingY={3} sizing=\"border\" width={1}>\n        <Flex align=\"flex-start\">\n          <Text size={1}>\n            <ReadOnlyIcon />\n          </Text>\n\n          <Box flex={1} marginLeft={3}>\n            <Text size={1}>\n              Your role{plural && 's'} {roles} {plural ? 'do' : 'does'} not have permissions to{' '}\n              {requiredPermission} this document.\n            </Text>\n          </Box>\n        </Flex>\n      </Container>\n    </Root>\n  )\n}\n\nfunction join<T, S>(array: Array<T>, sep: S): Array<T | S> | null {\n  return array.reduce((result: Array<T | S> | null, item: T | S) => {\n    if (result === null) {\n      return [item]\n    }\n\n    return result.concat([sep, item])\n  }, null)\n}\n", "import {useEffect, useRef} from 'react'\nimport {ToastParams, useToast} from '@sanity/ui'\n\nfunction usePrevious<T>(value: T) {\n  const ref = useRef<T>()\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#maximum_delay_value\nconst LONG_ENOUGH_BUT_NOT_TOO_LONG = 1000 * 60 * 60 * 24 * 24\n\n/**\n * Workaround to support conditional toast (e.g. a toast that is visible as long as a condition holds true)\n */\nexport function useConditionalToast(params: ToastParams & {id: string; enabled?: boolean}) {\n  const toast = useToast()\n\n  const wasEnabled = usePrevious(params.enabled)\n  // note1: there's a `duration || 0` in Sanity UI's pushToast(), so make it non-falsey\n  // note2: cannot use `Infinity` as duration, since it exceeds setTimeout's maximum delay value\n  useEffect(() => {\n    if (!wasEnabled && params.enabled) {\n      toast.push({...params, duration: LONG_ENOUGH_BUT_NOT_TOO_LONG})\n    }\n    if (wasEnabled && !params.enabled) {\n      toast.push({\n        ...params,\n        // Note: @sanity/ui fallbacks to the default duration of 4s in case of falsey values\n        duration: 0.01,\n      })\n    }\n  }, [params, toast, wasEnabled])\n}\n", "/* eslint-disable no-nested-ternary */\n\nimport {Box, Container, Flex, Spinner, Text, focusFirstDescendant} from '@sanity/ui'\nimport React, {forwardRef, useEffect, useMemo, useRef, type Ref, useCallback, useState} from 'react'\nimport {tap} from 'rxjs/operators'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {Delay} from '../../../../components/Delay'\nimport {useConditionalToast} from './useConditionalToast'\nimport {\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  FormBuilder,\n  PatchMsg,\n  PresenceOverlay,\n  createPatchChannel,\n  fromMutationPatches,\n  useDocumentPresence,\n  useDocumentStore,\n} from 'sanity'\n\ninterface FormViewProps {\n  hidden: boolean\n  margins: [number, number, number, number]\n}\n\nconst preventDefault = (ev: React.FormEvent) => ev.preventDefault()\n\nexport const FormView = forwardRef<HTMLDivElement, FormViewProps>(function FormView(props, ref) {\n  const {hidden, margins} = props\n\n  const {\n    collapsedFieldSets,\n    collapsedPaths,\n    displayed: value,\n    editState,\n    documentId,\n    documentType,\n    fieldActions,\n    onChange,\n    validation,\n    ready,\n    formState,\n    onFocus,\n    onBlur,\n    onSetCollapsedPath,\n    onPathOpen,\n    onSetCollapsedFieldSet,\n    onSetActiveFieldGroup,\n  } = useDocumentPane()\n  const documentStore = useDocumentStore()\n  const presence = useDocumentPresence(documentId)\n\n  // The `patchChannel` is an INTERNAL publish/subscribe channel that we use to notify form-builder\n  // nodes about both remote and local patches.\n  // - Used by the Portable Text input to modify selections.\n  // - Used by `withDocument` to reset value.\n  const patchChannel = useMemo(() => createPatchChannel(), [])\n\n  const isLocked = editState?.transactionSyncLock?.enabled\n\n  useConditionalToast({\n    id: `sync-lock-${documentId}`,\n    status: 'warning',\n    enabled: isLocked,\n    title: `Syncing document…`,\n    description: `Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds`,\n  })\n\n  useEffect(() => {\n    const sub = documentStore.pair\n      .documentEvents(documentId, documentType)\n      .pipe(\n        tap((event) => {\n          if (event.type === 'mutation') {\n            patchChannel.publish(prepareMutationEvent(event))\n          }\n\n          if (event.type === 'rebase') {\n            patchChannel.publish(prepareRebaseEvent(event))\n          }\n        }),\n      )\n      .subscribe()\n\n    return () => {\n      sub.unsubscribe()\n    }\n  }, [documentId, documentStore, documentType, patchChannel])\n\n  const hasRev = Boolean(value?._rev)\n  useEffect(() => {\n    if (hasRev) {\n      // this is a workaround for an issue that caused the document pushed to withDocument to get\n      // stuck at the first initial value.\n      // This effect is triggered only when the document goes from not having a revision, to getting one\n      // so it will kick in as soon as the document is received from the backend\n      patchChannel.publish({\n        type: 'mutation',\n        patches: [],\n        snapshot: value,\n      })\n    }\n    // React to changes in hasRev only\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hasRev])\n\n  const [formRef, setFormRef] = useState<null | HTMLDivElement>(null)\n\n  useEffect(() => {\n    // Only focus on the first descendant if there is not already a focus path\n    // This is to avoid stealing focus from intent links\n    if (ready && !formState?.focusPath.length && formRef) {\n      focusFirstDescendant(formRef)\n    }\n    // We only want to run it on first mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ready])\n\n  const setRef = useCallback(\n    (node: HTMLDivElement | null) => {\n      setFormRef(node)\n      if (typeof ref === 'function') {\n        ref(node)\n      } else if (ref) {\n        ref.current = node\n      }\n    },\n    [ref],\n  )\n\n  // const after = useMemo(\n  //   () =>\n  //     Array.isArray(afterEditorComponents) &&\n  //     afterEditorComponents.map(\n  //       (AfterEditorComponent: React.ComponentType<{documentId: string}>, idx: number) => (\n  //         <AfterEditorComponent key={String(idx)} documentId={documentId} />\n  //       )\n  //     ),\n  //   [documentId]\n  // )\n  return (\n    <Container\n      hidden={hidden}\n      paddingX={4}\n      paddingTop={5}\n      paddingBottom={9}\n      sizing=\"border\"\n      width={1}\n    >\n      <PresenceOverlay margins={margins}>\n        <Box as=\"form\" onSubmit={preventDefault} ref={setRef}>\n          {ready ? (\n            formState === null ? (\n              <Box padding={2}>\n                <Text>This form is hidden</Text>\n              </Box>\n            ) : (\n              <FormBuilder\n                __internal_fieldActions={fieldActions}\n                __internal_patchChannel={patchChannel}\n                collapsedFieldSets={collapsedFieldSets}\n                collapsedPaths={collapsedPaths}\n                focusPath={formState.focusPath}\n                changed={formState.changed}\n                focused={formState.focused}\n                groups={formState.groups}\n                id=\"root\"\n                members={formState.members}\n                onChange={onChange}\n                onFieldGroupSelect={onSetActiveFieldGroup}\n                onPathBlur={onBlur}\n                onPathFocus={onFocus}\n                onPathOpen={onPathOpen}\n                onSetFieldSetCollapsed={onSetCollapsedFieldSet}\n                onSetPathCollapsed={onSetCollapsedPath}\n                presence={presence}\n                readOnly={formState.readOnly}\n                schemaType={formState.schemaType}\n                validation={validation}\n                value={formState.value}\n              />\n            )\n          ) : (\n            <Delay ms={300}>\n              <Flex align=\"center\" direction=\"column\" height=\"fill\" justify=\"center\">\n                <Spinner muted />\n                <Box marginTop={3}>\n                  <Text align=\"center\" muted size={1}>\n                    Loading document\n                  </Text>\n                </Box>\n              </Flex>\n            </Delay>\n          )}\n        </Box>\n      </PresenceOverlay>\n    </Container>\n  )\n})\n\nfunction prepareMutationEvent(event: DocumentMutationEvent): PatchMsg {\n  const patches = event.mutations.map((mut) => mut.patch).filter(Boolean)\n\n  return {\n    type: 'mutation',\n    snapshot: event.document,\n    patches: fromMutationPatches(event.origin, patches),\n  }\n}\n\nfunction prepareRebaseEvent(event: DocumentRebaseEvent): PatchMsg {\n  const remotePatches = event.remoteMutations.map((mut) => mut.patch).filter(Boolean)\n  const localPatches = event.localMutations.map((mut) => mut.patch).filter(Boolean)\n\n  return {\n    type: 'rebase',\n    snapshot: event.document,\n    patches: fromMutationPatches('remote', remotePatches).concat(\n      fromMutationPatches('local', localPatches),\n    ),\n  }\n}\n", "import React, {useCallback} from 'react'\nimport {Tab, TabList} from '@sanity/ui'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {usePaneRouter} from '../../../../components'\n\nexport function DocumentHeaderTabs() {\n  const {activeViewId, paneKey, views} = useDocumentPane()\n  const tabPanelId = `${paneKey}tabpanel`\n\n  return (\n    <TabList space={1}>\n      {views.map((view, index) => (\n        <DocumentHeaderTab\n          icon={view.icon}\n          id={`${paneKey}tab-${view.id}`}\n          isActive={activeViewId === view.id}\n          key={view.id}\n          label={<>{view.title}</>}\n          tabPanelId={tabPanelId}\n          viewId={index === 0 ? null : view.id ?? null}\n        />\n      ))}\n    </TabList>\n  )\n}\n\nfunction DocumentHeaderTab(props: {\n  icon?: React.ComponentType | React.ReactNode\n  id: string\n  isActive: boolean\n  label: React.ReactNode\n  tabPanelId: string\n  viewId: string | null\n}) {\n  const {isActive, tabPanelId, viewId, ...rest} = props\n  const {ready} = useDocumentPane()\n  const {setView} = usePaneRouter()\n  const handleClick = useCallback(() => setView(viewId), [setView, viewId])\n\n  return (\n    <Tab\n      {...rest} // required to enable <TabList> keyboard navigation\n      aria-controls={tabPanelId}\n      disabled={!ready}\n      fontSize={1}\n      selected={isActive}\n      onClick={handleClick}\n    />\n  )\n}\n", "import React, {ReactElement} from 'react'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {unstable_useValuePreview as useValuePreview} from 'sanity'\n\nexport function DocumentHeaderTitle(): ReactElement {\n  const {connectionState, schemaType, title, value: documentValue} = useDocumentPane()\n  const subscribed = Boolean(documentValue) && connectionState === 'connected'\n\n  const {error, value} = useValuePreview({\n    enabled: subscribed,\n    schemaType,\n    value: documentValue,\n  })\n\n  if (connectionState !== 'connected') {\n    return <></>\n  }\n\n  if (title) {\n    return <>{title}</>\n  }\n\n  if (!documentValue) {\n    return <>New {schemaType?.title || schemaType?.name}</>\n  }\n\n  if (error) {\n    return <>Error: {error.message}</>\n  }\n\n  return <>{value?.title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}</>\n}\n", "import {ArrowLeftIcon, CloseIcon, SplitVerticalIcon} from '@sanity/icons'\nimport {Button, Flex, Text, Tooltip} from '@sanity/ui'\nimport React, {createElement, memo, forwardRef, useMemo} from 'react'\nimport {\n  PaneContextMenuButton,\n  PaneHeader,\n  PaneHeaderActionButton,\n  usePane,\n  usePaneRouter,\n} from '../../../../components'\nimport {TimelineMenu} from '../../timeline'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {isMenuNodeButton, isNotMenuNodeButton, resolveMenuNodes} from '../../../../menuNodes'\nimport {useDeskTool} from '../../../../useDeskTool'\nimport {DocumentHeaderTabs} from './DocumentHeaderTabs'\nimport {DocumentHeaderTitle} from './DocumentHeaderTitle'\nimport {useFieldActions, useTimelineSelector} from 'sanity'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface DocumentPanelHeaderProps {}\n\nexport const DocumentPanelHeader = memo(\n  forwardRef(function DocumentPanelHeader(\n    _props: DocumentPanelHeaderProps,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) {\n    const {\n      onMenuAction,\n      onPaneClose,\n      onPaneSplit,\n      menuItems,\n      menuItemGroups,\n      schemaType,\n      timelineStore,\n      ready,\n      views,\n      unstable_languageFilter,\n    } = useDocumentPane()\n    const {features} = useDeskTool()\n    const {index, BackLink, hasGroupSiblings} = usePaneRouter()\n    const {actions: fieldActions} = useFieldActions()\n    const menuNodes = useMemo(\n      () =>\n        resolveMenuNodes({actionHandler: onMenuAction, fieldActions, menuItems, menuItemGroups}),\n      [onMenuAction, fieldActions, menuItemGroups, menuItems],\n    )\n    const menuButtonNodes = useMemo(() => menuNodes.filter(isMenuNodeButton), [menuNodes])\n    const contextMenuNodes = useMemo(() => menuNodes.filter(isNotMenuNodeButton), [menuNodes])\n    const showTabs = views.length > 1\n\n    // Subscribe to external timeline state changes\n    const rev = useTimelineSelector(timelineStore, (state) => state.revTime)\n\n    const {collapsed, isLast} = usePane()\n    // Prevent focus if this is the last (non-collapsed) pane.\n    const tabIndex = isLast && !collapsed ? -1 : 0\n\n    // there are three kinds of buttons possible:\n    //\n    // 1. split pane - creates a new split pane\n    // 2. close split pane — closes the current split pane\n    // 3. close pane group — closes the current pane group\n\n    // show the split pane button if they're enabled and there is more than one\n    // view available to use to create a split view\n    const showSplitPaneButton = features.splitViews && onPaneSplit && views.length > 1\n\n    // show the split pane button close button if the split button is showing\n    // and there is more than one split pane open (aka has-siblings)\n    const showSplitPaneCloseButton = showSplitPaneButton && hasGroupSiblings\n\n    // show the pane group close button if the `showSplitPaneCloseButton` is\n    // _not_ showing (the split pane button replaces the group close button)\n    // and if the back button is not showing (the back button and the close\n    // button) do the same thing and shouldn't be shown at the same time)\n    const showPaneGroupCloseButton = !showSplitPaneCloseButton && !features.backButton\n\n    return (\n      <PaneHeader\n        ref={ref}\n        loading={!ready}\n        title={<DocumentHeaderTitle />}\n        tabs={showTabs && <DocumentHeaderTabs />}\n        tabIndex={tabIndex}\n        backButton={\n          features.backButton &&\n          index > 0 && (\n            <Button as={BackLink} data-as=\"a\" icon={ArrowLeftIcon} mode=\"bleed\" padding={2} />\n          )\n        }\n        subActions={<TimelineMenu chunk={rev} mode=\"rev\" placement=\"bottom-end\" />}\n        actions={\n          <Flex align=\"center\" gap={1}>\n            {unstable_languageFilter.length > 0 && (\n              <>\n                {unstable_languageFilter.map((languageFilterComponent, idx) => {\n                  return createElement(languageFilterComponent, {\n                    // eslint-disable-next-line react/no-array-index-key\n                    key: `language-filter-${idx}`,\n                    schemaType,\n                  })\n                })}\n              </>\n            )}\n\n            {menuButtonNodes.map((item) => (\n              <PaneHeaderActionButton key={item.key} node={item} />\n            ))}\n\n            <PaneContextMenuButton nodes={contextMenuNodes} key=\"context-menu\" />\n\n            {showSplitPaneButton && (\n              <Tooltip\n                content={\n                  <Text size={1} style={{whiteSpace: 'nowrap'}}>\n                    Split pane right\n                  </Text>\n                }\n                padding={2}\n                placement=\"bottom\"\n                portal\n              >\n                <Button\n                  aria-label=\"Split pane right\"\n                  icon={SplitVerticalIcon}\n                  key=\"split-pane-button\"\n                  mode=\"bleed\"\n                  onClick={onPaneSplit}\n                />\n              </Tooltip>\n            )}\n\n            {showSplitPaneCloseButton && (\n              <Button\n                icon={CloseIcon}\n                key=\"close-view-button\"\n                mode=\"bleed\"\n                onClick={onPaneClose}\n                title=\"Close split pane\"\n              />\n            )}\n\n            {showPaneGroupCloseButton && (\n              <Button\n                icon={CloseIcon}\n                key=\"close-view-button\"\n                mode=\"bleed\"\n                title=\"Close pane group\"\n                as={BackLink}\n              />\n            )}\n          </Flex>\n        }\n      />\n    )\n  }),\n)\n", "import {\n  BoundaryElementProvider,\n  Flex,\n  PortalProvider,\n  usePortal,\n  useElementRect,\n  Box,\n} from '@sanity/ui'\nimport React, {createElement, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {PaneContent, usePane, usePaneLayout} from '../../../components'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {useDeskTool} from '../../../useDeskTool'\nimport {DocumentInspectorPanel} from '../documentInspector'\nimport {InspectDialog} from '../inspectDialog'\nimport {DeletedDocumentBanner} from './DeletedDocumentBanner'\nimport {ReferenceChangedBanner} from './ReferenceChangedBanner'\nimport {PermissionCheckBanner} from './PermissionCheckBanner'\nimport {FormView} from './documentViews'\nimport {DocumentPanelHeader} from './header'\nimport {ScrollContainer, useTimelineSelector, VirtualizerScrollInstanceProvider} from 'sanity'\n\ninterface DocumentPanelProps {\n  footerHeight: number | null\n  rootElement: HTMLDivElement | null\n  isInspectOpen: boolean\n  setDocumentPanelPortalElement: (el: HTMLElement | null) => void\n}\n\nconst DocumentBox = styled(Box)({\n  position: 'relative',\n})\n\nconst Scroller = styled(ScrollContainer)<{$disabled: boolean}>(({$disabled}) => {\n  if ($disabled) {\n    return {height: '100%'}\n  }\n\n  return css`\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    scroll-behavior: smooth;\n    outline: none;\n  `\n})\n\nexport const DocumentPanel = function DocumentPanel(props: DocumentPanelProps) {\n  const {footerHeight, isInspectOpen, rootElement, setDocumentPanelPortalElement} = props\n  const {\n    activeViewId,\n    displayed,\n    documentId,\n    editState,\n    inspector,\n    value,\n    views,\n    ready,\n    schemaType,\n    permissions,\n    isPermissionsLoading,\n    isDeleting,\n    isDeleted,\n    timelineStore,\n    formState,\n  } = useDocumentPane()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n  const {collapsed} = usePane()\n  const parentPortal = usePortal()\n  const {features} = useDeskTool()\n  const [headerElement, setHeaderElement] = useState<HTMLDivElement | null>(null)\n  const headerRect = useElementRect(headerElement)\n  const portalRef = useRef<HTMLDivElement | null>(null)\n  const [documentScrollElement, setDocumentScrollElement] = useState<HTMLDivElement | null>(null)\n  const formContainerElement = useRef<HTMLDivElement | null>(null)\n\n  const requiredPermission = value._createdAt ? 'update' : 'create'\n\n  const selectedGroup = useMemo(() => {\n    if (!formState) return undefined\n\n    return formState.groups.find((group) => group.selected)\n  }, [formState])\n\n  const activeView = useMemo(\n    () => views.find((view) => view.id === activeViewId) || views[0] || {type: 'form'},\n    [activeViewId, views],\n  )\n\n  // Use a local portal container when split panes is supported\n  const portalElement: HTMLElement | null = features.splitPanes\n    ? portalRef.current || parentPortal.element\n    : parentPortal.element\n\n  // Calculate the height of the header\n  const margins: [number, number, number, number] = useMemo(() => {\n    if (layoutCollapsed) {\n      return [headerRect?.height || 0, 0, footerHeight ? footerHeight + 2 : 2, 0]\n    }\n\n    return [0, 0, 2, 0]\n  }, [layoutCollapsed, footerHeight, headerRect])\n\n  const formViewHidden = activeView.type !== 'form'\n\n  const activeViewNode = useMemo(\n    () =>\n      activeView.type === 'component' &&\n      activeView.component &&\n      createElement(activeView.component, {\n        document: {\n          draft: editState?.draft || null,\n          displayed: displayed || value,\n          historical: displayed,\n          published: editState?.published || null,\n        },\n        documentId,\n        options: activeView.options,\n        schemaType,\n      }),\n    [activeView, displayed, documentId, editState?.draft, editState?.published, schemaType, value],\n  )\n\n  const lastNonDeletedRevId = useTimelineSelector(\n    timelineStore,\n    (state) => state.lastNonDeletedRevId,\n  )\n\n  // Scroll to top as `documentId` changes\n  useEffect(() => {\n    if (!documentScrollElement?.scrollTo) return\n    documentScrollElement.scrollTo(0, 0)\n  }, [documentId, documentScrollElement])\n\n  // Pass portal element to `DocumentPane`\n  useEffect(() => {\n    if (portalElement) {\n      setDocumentPanelPortalElement(portalElement)\n    }\n  }, [portalElement, setDocumentPanelPortalElement])\n\n  const inspectDialog = useMemo(() => {\n    return isInspectOpen ? <InspectDialog value={displayed || value} /> : null\n  }, [isInspectOpen, displayed, value])\n\n  const showInspector = Boolean(!collapsed && inspector)\n\n  return (\n    <>\n      <DocumentPanelHeader ref={setHeaderElement} />\n\n      <PaneContent>\n        <Flex height=\"fill\">\n          {(features.resizablePanes || !showInspector) && (\n            <DocumentBox flex={2} overflow=\"hidden\">\n              <PortalProvider\n                element={portalElement}\n                __unstable_elements={{documentScrollElement: documentScrollElement}}\n              >\n                <BoundaryElementProvider element={documentScrollElement}>\n                  <VirtualizerScrollInstanceProvider\n                    scrollElement={documentScrollElement}\n                    containerElement={formContainerElement}\n                  >\n                    {activeView.type === 'form' && !isPermissionsLoading && ready && (\n                      <>\n                        <PermissionCheckBanner\n                          granted={Boolean(permissions?.granted)}\n                          requiredPermission={requiredPermission}\n                        />\n                        {!isDeleting && isDeleted && (\n                          <DeletedDocumentBanner revisionId={lastNonDeletedRevId} />\n                        )}\n                        <ReferenceChangedBanner />\n                      </>\n                    )}\n\n                    <Scroller\n                      $disabled={layoutCollapsed || false}\n                      data-testid=\"document-panel-scroller\"\n                      ref={setDocumentScrollElement}\n                      // Note: this is to make sure the scroll container is changed\n                      // when the selected group changes which causes virtualization\n                      // to re-render and re-measure the scroll container\n                      key={`${selectedGroup?.name}-${documentId}}`}\n                    >\n                      <FormView\n                        hidden={formViewHidden}\n                        key={documentId + (ready ? '_ready' : '_pending')}\n                        margins={margins}\n                        ref={formContainerElement}\n                      />\n                      {activeViewNode}\n                    </Scroller>\n\n                    {inspectDialog}\n\n                    <div data-testid=\"document-panel-portal\" ref={portalRef} />\n                  </VirtualizerScrollInstanceProvider>\n                </BoundaryElementProvider>\n              </PortalProvider>\n            </DocumentBox>\n          )}\n\n          {showInspector && (\n            <BoundaryElementProvider element={rootElement}>\n              <DocumentInspectorPanel\n                documentId={documentId}\n                documentType={schemaType.name}\n                flex={1}\n              />\n            </BoundaryElementProvider>\n          )}\n        </Flex>\n      </PaneContent>\n    </>\n  )\n}\n", "import {DialogProps, Placement} from '@sanity/ui'\n\nexport const POPOVER_FALLBACK_PLACEMENTS: Placement[] = ['left', 'bottom']\n\nexport const DIALOG_WIDTH_TO_UI_WIDTH: {[key: string]: DialogProps['width']} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n  full: 'auto',\n}\n", "import {\n  Box,\n  Button,\n  Flex,\n  Grid,\n  Popover,\n  Text,\n  useClickOutside,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {POPOVER_FALLBACK_PLACEMENTS} from './constants'\nimport {DocumentActionConfirmDialogProps} from 'sanity'\n\nexport function ConfirmDialog(props: {\n  dialog: DocumentActionConfirmDialogProps\n  referenceElement: HTMLElement | null\n}) {\n  const {dialog, referenceElement} = props\n\n  return (\n    <Popover\n      content={<ConfirmDialogContent dialog={dialog} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open\n      placement=\"top\"\n      portal\n      preventOverflow\n      referenceElement={referenceElement}\n    />\n  )\n}\n\nfunction ConfirmDialogContent(props: {dialog: DocumentActionConfirmDialogProps}) {\n  const {dialog} = props\n  const {\n    cancelButtonIcon,\n    cancelButtonText,\n    confirmButtonIcon,\n    confirmButtonText,\n    // color,\n    message,\n    onCancel,\n    onConfirm,\n    tone,\n  } = dialog\n  const {isTopLayer} = useLayer()\n  const [element, setElement] = useState<HTMLElement | null>(null)\n\n  const handleClickOutside = useCallback(() => {\n    if (isTopLayer) onCancel()\n  }, [isTopLayer, onCancel])\n\n  const handleGlobalKeyDown = useCallback(\n    (event: any) => {\n      if (event.key === 'Escape' && isTopLayer) onCancel()\n    },\n    [isTopLayer, onCancel],\n  )\n\n  useClickOutside(handleClickOutside, [element])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return (\n    <Flex direction=\"column\" ref={setElement} style={{minWidth: 320 - 16, maxWidth: 400}}>\n      <Box flex={1} overflow=\"auto\" padding={4}>\n        <Text>{message}</Text>\n      </Box>\n      <Box paddingX={4} paddingY={3} style={{borderTop: '1px solid var(--card-border-color)'}}>\n        <Grid columns={2} gap={2}>\n          <Button\n            icon={cancelButtonIcon}\n            onClick={onCancel}\n            mode=\"ghost\"\n            text={cancelButtonText || 'Cancel'}\n          />\n          <Button\n            icon={confirmButtonIcon}\n            onClick={onConfirm}\n            text={confirmButtonText || 'Confirm'}\n            tone={tone}\n          />\n        </Grid>\n      </Box>\n    </Flex>\n  )\n}\n", "import {Box, Dialog} from '@sanity/ui'\nimport React, {useId} from 'react'\nimport {DIALOG_WIDTH_TO_UI_WIDTH} from './constants'\nimport {DocumentActionModalDialogProps, LegacyLayerProvider} from 'sanity'\n\nexport function ModalDialog(props: {dialog: DocumentActionModalDialogProps}) {\n  const {dialog} = props\n  const dialogId = useId()\n\n  const footer = dialog.footer && (\n    <Box paddingX={4} paddingY={3}>\n      {dialog.footer}\n    </Box>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"fullscreen\">\n      <Dialog\n        __unstable_hideCloseButton={dialog.showCloseButton === false}\n        footer={footer}\n        header={dialog.header}\n        id={dialogId}\n        // eslint-disable-next-line react/jsx-handler-names\n        onClose={dialog.onClose}\n        // eslint-disable-next-line react/jsx-handler-names\n        onClickOutside={dialog.onClose}\n        width={dialog.width === undefined ? 1 : DIALOG_WIDTH_TO_UI_WIDTH[dialog.width]}\n      >\n        <Box padding={4}>{dialog.content}</Box>\n      </Dialog>\n    </LegacyLayerProvider>\n  )\n}\n", "import {Popover, useClickOutside, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {POPOVER_FALLBACK_PLACEMENTS} from './constants'\nimport {DocumentActionPopoverDialogProps} from 'sanity'\n\nexport function PopoverDialog(props: {\n  dialog: DocumentActionPopoverDialogProps\n  referenceElement: HTMLElement | null\n}) {\n  const {dialog, referenceElement} = props\n\n  return (\n    <Popover\n      content={<PopoverDialogContent dialog={dialog} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open\n      placement=\"top\"\n      portal\n      preventOverflow\n      referenceElement={referenceElement}\n    />\n  )\n}\n\nfunction PopoverDialogContent(props: {dialog: DocumentActionPopoverDialogProps}) {\n  const {dialog} = props\n  const {content, onClose} = dialog\n  const {isTopLayer} = useLayer()\n  const [element, setElement] = useState<HTMLElement | null>(null)\n\n  const handleClickOutside = useCallback(() => {\n    if (isTopLayer) onClose()\n  }, [isTopLayer, onClose])\n\n  const handleGlobalKeyDown = useCallback(\n    (event: any) => {\n      if (event.key === 'Escape' && isTopLayer) onClose()\n    },\n    [isTopLayer, onClose],\n  )\n\n  useClickOutside(handleClickOutside, [element])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return <div ref={setElement}>{content}</div>\n}\n", "import {Box, Dialog, usePortal, PortalProvider} from '@sanity/ui'\nimport React, {useId} from 'react'\nimport {DOCUMENT_PANEL_PORTAL_ELEMENT} from '../../../constants'\nimport {ConfirmDialog} from './dialogs/ConfirmDialog'\nimport {ModalDialog} from './dialogs/ModalDialog'\nimport {PopoverDialog} from './dialogs/PopoverDialog'\nimport {DocumentActionDialogProps} from 'sanity'\n\nexport interface ActionStateDialogProps {\n  dialog: DocumentActionDialogProps\n  referenceElement?: HTMLElement | null\n}\n\n// A portal provider that uses the document panel portal element if it exists\n// as the portal element so that dialogs are scoped to the document panel\nfunction DocumentActionPortalProvider(props: {children: React.ReactNode}) {\n  const {children} = props\n  const {element, elements} = usePortal()\n  const portalElement = elements?.[DOCUMENT_PANEL_PORTAL_ELEMENT] || element\n\n  return <PortalProvider element={portalElement}>{children}</PortalProvider>\n}\n\nexport function ActionStateDialog(props: ActionStateDialogProps) {\n  const {dialog, referenceElement = null} = props\n  const modalId = useId()\n\n  if (dialog.type === 'confirm') {\n    return <ConfirmDialog dialog={dialog} referenceElement={referenceElement} />\n  }\n\n  if (dialog.type === 'popover') {\n    return <PopoverDialog dialog={dialog} referenceElement={referenceElement} />\n  }\n\n  if (dialog.type === 'dialog' || !dialog.type) {\n    return (\n      <DocumentActionPortalProvider>\n        <ModalDialog dialog={dialog} />\n      </DocumentActionPortalProvider>\n    )\n  }\n\n  if (dialog.type === 'custom') {\n    return <DocumentActionPortalProvider>{dialog?.component}</DocumentActionPortalProvider>\n  }\n\n  // @todo: add validation?\n  const unknownModal: any = dialog\n\n  // eslint-disable-next-line no-console\n  console.warn(`Unsupported modal type ${unknownModal.type}`)\n\n  return (\n    <Dialog\n      id={modalId}\n      // eslint-disable-next-line react/jsx-handler-names\n      onClose={unknownModal.onClose}\n      // eslint-disable-next-line react/jsx-handler-names\n      onClickOutside={unknownModal.onClose}\n      width={2}\n    >\n      <Box padding={4}>\n        {unknownModal.content || (\n          <>\n            Unexpected modal type (<code>{unknownModal.type}</code>)\n          </>\n        )}\n      </Box>\n    </Dialog>\n  )\n}\n", "import {ChevronDownIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  PopoverProps,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport React, {\n  createElement,\n  isValidElement,\n  useCallback,\n  useRef,\n  useState,\n  useMemo,\n  useId,\n} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {ActionStateDialog} from './ActionStateDialog'\nimport {DocumentActionDescription, Hotkeys, LegacyLayerProvider} from 'sanity'\n\nexport interface ActionMenuButtonProps {\n  actionStates: DocumentActionDescription[]\n  disabled: boolean\n}\n\nexport function ActionMenuButton(props: ActionMenuButtonProps) {\n  const {actionStates, disabled} = props\n  const idPrefix = useId()\n  const buttonRef = useRef<HTMLButtonElement | null>(null)\n  const [actionIndex, setActionIndex] = useState(-1)\n  const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null)\n\n  const handleAction = useCallback((idx: number) => {\n    setActionIndex(idx)\n  }, [])\n\n  const popoverProps: PopoverProps = useMemo(\n    () => ({\n      placement: 'top-end',\n      portal: true,\n      preventOverflow: true,\n    }),\n    [],\n  )\n\n  const currentAction = actionStates[actionIndex]\n\n  return (\n    <>\n      <MenuButton\n        id={`${idPrefix}-action-menu`}\n        button={\n          <Button\n            data-testid=\"action-menu-button\"\n            aria-label=\"Open document actions\"\n            disabled={disabled}\n            icon={ChevronDownIcon}\n            mode=\"ghost\"\n            ref={buttonRef}\n          />\n        }\n        menu={\n          <Menu padding={1}>\n            {actionStates.map((actionState, idx) => (\n              <ActionMenuListItem\n                actionState={actionState}\n                disabled={disabled}\n                index={idx}\n                // eslint-disable-next-line react/no-array-index-key\n                key={idx}\n                onAction={handleAction}\n              />\n            ))}\n          </Menu>\n        }\n        popover={popoverProps}\n        ref={setReferenceElement}\n      />\n\n      {currentAction && currentAction.dialog && (\n        <LegacyLayerProvider zOffset=\"paneFooter\">\n          <ActionStateDialog dialog={currentAction.dialog} referenceElement={referenceElement} />\n        </LegacyLayerProvider>\n      )}\n    </>\n  )\n}\n\ninterface ActionMenuListItemProps {\n  actionState: DocumentActionDescription\n  disabled: boolean\n  index: number\n  onAction: (idx: number) => void\n}\n\nfunction ActionMenuListItem(props: ActionMenuListItemProps) {\n  const {actionState, disabled, index, onAction} = props\n  const {onHandle} = actionState\n\n  const handleClick = useCallback(() => {\n    onAction(index)\n    if (onHandle) onHandle()\n  }, [index, onAction, onHandle])\n\n  const tooltipContent = actionState.title && (\n    <Box padding={2}>\n      <Text size={1}>{actionState.title}</Text>\n    </Box>\n  )\n\n  return (\n    <MenuItem\n      data-testid={`action-${actionState.label.replace(' ', '')}`}\n      disabled={disabled || Boolean(actionState.disabled)}\n      onClick={handleClick}\n      padding={0}\n      tone={actionState.tone}\n    >\n      <Tooltip\n        content={tooltipContent}\n        disabled={!tooltipContent}\n        fallbackPlacements={['left', 'bottom']}\n        placement=\"top\"\n        portal\n      >\n        <Flex align=\"center\" paddingX={3}>\n          <Flex flex={1} paddingY={3}>\n            {actionState.icon && (\n              <Box marginRight={3}>\n                <Text>\n                  {isValidElement(actionState.icon) && actionState.icon}\n                  {isValidElementType(actionState.icon) && createElement(actionState.icon)}\n                </Text>\n              </Box>\n            )}\n\n            <Text>{actionState.label}</Text>\n          </Flex>\n\n          {actionState.shortcut && (\n            <Box marginLeft={3}>\n              <Hotkeys\n                keys={String(actionState.shortcut)\n                  .split('+')\n                  .map((s) => s.slice(0, 1).toUpperCase() + s.slice(1))}\n              />\n            </Box>\n          )}\n        </Flex>\n      </Tooltip>\n    </MenuItem>\n  )\n}\n", "import {Box, Flex, Tooltip, Stack, Button, LayerProvider, Text} from '@sanity/ui'\nimport React, {memo, useMemo, useState} from 'react'\nimport {RenderActionCollectionState} from '../../../components'\nimport {HistoryRestoreAction} from '../../../documentActions'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {ActionMenuButton} from './ActionMenuButton'\nimport {ActionStateDialog} from './ActionStateDialog'\nimport {DocumentActionDescription, Hotkeys, useTimelineSelector} from 'sanity'\n\ninterface DocumentStatusBarActionsInnerProps {\n  disabled: boolean\n  showMenu: boolean\n  states: DocumentActionDescription[]\n}\n\nfunction DocumentStatusBarActionsInner(props: DocumentStatusBarActionsInnerProps) {\n  const {disabled, showMenu, states} = props\n  const [firstActionState, ...menuActionStates] = states\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n\n  const tooltipContent = useMemo(() => {\n    if (!firstActionState || (!firstActionState.title && !firstActionState.shortcut)) return null\n\n    return (\n      <Flex padding={2} style={{maxWidth: 300}} align=\"center\">\n        <Text size={1}>{firstActionState.title}</Text>\n        {firstActionState.shortcut && (\n          <Box marginLeft={firstActionState.title ? 2 : 0}>\n            <Hotkeys\n              keys={String(firstActionState.shortcut)\n                .split('+')\n                .map((s) => s.slice(0, 1).toUpperCase() + s.slice(1).toLowerCase())}\n            />\n          </Box>\n        )}\n      </Flex>\n    )\n  }, [firstActionState])\n\n  return (\n    <Flex>\n      {firstActionState && (\n        <LayerProvider zOffset={200}>\n          <Tooltip disabled={!tooltipContent} content={tooltipContent} portal placement=\"top\">\n            <Stack flex={1}>\n              <Button\n                data-testid={`action-${firstActionState.label}`}\n                disabled={disabled || Boolean(firstActionState.disabled)}\n                icon={firstActionState.icon}\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={firstActionState.onHandle}\n                ref={setButtonElement}\n                text={firstActionState.label}\n                tone={firstActionState.tone || 'primary'}\n              />\n            </Stack>\n          </Tooltip>\n        </LayerProvider>\n      )}\n\n      {showMenu && menuActionStates.length > 0 && (\n        <Box marginLeft={1}>\n          <ActionMenuButton actionStates={menuActionStates} disabled={disabled} />\n        </Box>\n      )}\n\n      {firstActionState && firstActionState.dialog && (\n        <ActionStateDialog dialog={firstActionState.dialog} referenceElement={buttonElement} />\n      )}\n    </Flex>\n  )\n}\n\nexport const DocumentStatusBarActions = memo(function DocumentStatusBarActions() {\n  const {actions, connectionState, documentId, editState} = useDocumentPane()\n  // const [isMenuOpen, setMenuOpen] = useState(false)\n  // const handleMenuOpen = useCallback(() => setMenuOpen(true), [])\n  // const handleMenuClose = useCallback(() => setMenuOpen(false), [])\n  // const handleActionComplete = useCallback(() => setMenuOpen(false), [])\n\n  if (!actions || !editState) {\n    return null\n  }\n\n  return (\n    <RenderActionCollectionState\n      // component={}\n      // onActionComplete={handleActionComplete}\n      actions={actions}\n      // @ts-expect-error TODO: fix the document actions\n      actionProps={editState}\n    >\n      {({states}) => (\n        <DocumentStatusBarActionsInner\n          disabled={connectionState !== 'connected'}\n          // isMenuOpen={isMenuOpen}\n          // onMenuOpen={handleMenuOpen}\n          // onMenuClose={handleMenuClose}\n          showMenu={actions.length > 1}\n          states={states}\n          // Use document ID as key to make sure that the actions state is reset when the document changes\n          key={documentId}\n        />\n      )}\n    </RenderActionCollectionState>\n  )\n})\n\nexport const HistoryStatusBarActions = memo(function HistoryStatusBarActions() {\n  const {connectionState, editState, timelineStore} = useDocumentPane()\n\n  // Subscribe to external timeline state changes\n  const revTime = useTimelineSelector(timelineStore, (state) => state.revTime)\n\n  const revision = revTime?.id || ''\n  const disabled = (editState?.draft || editState?.published || {})._rev === revision\n  const actionProps = useMemo(() => ({...(editState || {}), revision}), [editState, revision])\n  const historyActions = useMemo(() => [HistoryRestoreAction], [])\n\n  return (\n    <RenderActionCollectionState actions={historyActions} actionProps={actionProps as any}>\n      {({states}) => (\n        <DocumentStatusBarActionsInner\n          disabled={connectionState !== 'connected' || Boolean(disabled)}\n          showMenu={false}\n          states={states}\n        />\n      )}\n    </RenderActionCollectionState>\n  )\n})\n", "import {Badge, BadgeTone, Box, Inline, Text, Tooltip} from '@sanity/ui'\nimport React from 'react'\nimport {RenderBadgeCollectionState} from '../../../../components'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {DocumentBadgeDescription} from 'sanity'\n\ninterface DocumentBadgesInnerProps {\n  states: DocumentBadgeDescription[]\n}\n\nconst BADGE_TONES: Record<string, BadgeTone | undefined> = {\n  primary: 'primary',\n  success: 'positive',\n  warning: 'caution',\n  danger: 'critical',\n}\n\nfunction DocumentBadgesInner({states}: DocumentBadgesInnerProps) {\n  return (\n    <Inline space={1}>\n      {states.map((badge, index) => (\n        <Tooltip\n          content={\n            badge.title && (\n              <Box padding={2}>\n                <Text size={1}>{badge.title}</Text>\n              </Box>\n            )\n          }\n          disabled={!badge.title}\n          key={String(index)}\n          placement=\"top\"\n          portal\n        >\n          <Badge\n            fontSize={1}\n            mode=\"outline\"\n            paddingX={2}\n            paddingY={1}\n            radius={4}\n            tone={badge.color ? BADGE_TONES[badge.color] : undefined}\n            style={{whiteSpace: 'nowrap'}}\n          >\n            {badge.label}\n          </Badge>\n        </Tooltip>\n      ))}\n    </Inline>\n  )\n}\n\nexport function DocumentBadges() {\n  const {badges, editState} = useDocumentPane()\n\n  if (!editState || !badges) return null\n\n  return (\n    <RenderBadgeCollectionState badges={badges} badgeProps={editState as any}>\n      {({states}) => <DocumentBadgesInner states={states} />}\n    </RenderBadgeCollectionState>\n  )\n}\n", "import {Box, Button, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {PlayIcon, PublishIcon} from '@sanity/icons'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useTimeAgo} from 'sanity'\n\ninterface PublishStatusProps {\n  collapsed?: boolean\n  disabled: boolean\n  lastPublished?: string\n  lastUpdated?: string\n  liveEdit: boolean\n}\n\nconst Root = styled(Flex)`\n  cursor: default;\n`\n\nexport function PublishStatus(props: PublishStatusProps) {\n  const {collapsed, disabled, lastPublished, lastUpdated, liveEdit} = props\n\n  // Label with abbreviations and suffix\n  const lastPublishedTimeAgo = useTimeAgo(lastPublished || '', {minimal: true, agoSuffix: true})\n  // Label with abbreviation and no suffix\n  const lastPublishedTime = useTimeAgo(lastPublished || '', {minimal: true})\n\n  // Label with abbreviations and suffix\n  const lastUpdatedTimeAgo = useTimeAgo(lastUpdated || '', {minimal: true, agoSuffix: true})\n  // Label with abbreviation and no suffix\n  const lastUpdatedTime = useTimeAgo(lastUpdated || '', {minimal: true})\n\n  // Accessible labels without abbreviations or suffixes\n  const a11yUpdatedAgo = useTimeAgo(lastUpdated || '', {minimal: false, agoSuffix: true})\n  const a11yPublishedAgo = useTimeAgo(lastPublished || '', {minimal: false, agoSuffix: true})\n  const a11yLabel = liveEdit\n    ? `Last updated ${a11yUpdatedAgo}`\n    : `Last published ${a11yPublishedAgo}`\n\n  return (\n    <Root align=\"center\" data-ui=\"SessionLayout\" sizing=\"border\">\n      <Tooltip\n        placement=\"top\"\n        portal\n        content={\n          <Stack padding={3} space={3}>\n            <Text size={1}>\n              {liveEdit ? (\n                <>\n                  Last updated{' '}\n                  <abbr aria-label={lastUpdated ? a11yUpdatedAgo : a11yPublishedAgo}>\n                    {lastUpdated ? lastUpdatedTimeAgo : lastPublishedTimeAgo}\n                  </abbr>\n                </>\n              ) : (\n                <>\n                  Last published <abbr aria-label={a11yPublishedAgo}>{lastPublishedTimeAgo}</abbr>\n                </>\n              )}\n            </Text>\n          </Stack>\n        }\n      >\n        <Button\n          mode=\"bleed\"\n          tone={liveEdit ? 'critical' : 'positive'}\n          tabIndex={-1}\n          disabled={disabled}\n          aria-label={a11yLabel}\n        >\n          <Flex align=\"center\">\n            <Box marginRight={collapsed ? 0 : 3}>\n              <Text size={2} aria-hidden=\"true\">\n                {liveEdit ? <PlayIcon /> : <PublishIcon />}\n              </Text>\n            </Box>\n            {!collapsed && (\n              <Text size={1} weight=\"medium\">\n                {liveEdit ? (\n                  <abbr aria-label={a11yLabel}>\n                    {lastUpdated ? lastUpdatedTime : lastPublishedTime}\n                  </abbr>\n                ) : (\n                  <abbr aria-label={a11yLabel}>{lastPublishedTime}</abbr>\n                )}\n              </Text>\n            )}\n          </Flex>\n        </Button>\n      </Tooltip>\n    </Root>\n  )\n}\n", "import React, {ComponentProps} from 'react'\nimport {motion} from 'framer-motion'\nimport styled, {keyframes} from 'styled-components'\n\nconst StyledMotionPath = styled(motion.path)`\n  transform-origin: center;\n`\n\ntype MotionCircleProps = Omit<ComponentProps<typeof motion.circle>, 'd'>\ntype MotionPathProps = Omit<ComponentProps<typeof motion.path>, 'd'>\n\nconst Circle = (props: MotionCircleProps) => (\n  <motion.circle fill=\"none\" r=\"8\" cx=\"12.5\" cy=\"12.5\" strokeWidth=\"1.2\" {...props} />\n)\nconst Arrows = (props: MotionPathProps) => (\n  <StyledMotionPath\n    fill=\"none\"\n    d=\"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811\"\n    {...props}\n  />\n)\nconst Checkmark = (props: MotionPathProps) => (\n  <motion.path d=\"M9.5 12.1316L11.7414 14.5L16 10\" {...props} />\n)\nconst Edit = (props: MotionPathProps) => (\n  <motion.path d=\"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z\" {...props} />\n)\n\nconst rotateAnimation = keyframes`\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`\nconst RotateGroup = styled.g`\n  transform-origin: center;\n\n  &[data-rotate] {\n    animation: ${rotateAnimation} 1s ease-in-out infinite;\n  }\n`\n\nconst root = {\n  syncing: {\n    scale: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    scale: [1, 0.8, 1.2, 0.9, 1.1, 0.95, 1.05, 0.99, 1],\n    transition: {\n      duration: 0.5,\n      delay: 0.2,\n    },\n  },\n  changes: {transition: {duration: 0}},\n}\n\nconst circle = {\n  syncing: {\n    strokeDasharray: '0, 0, 23, 3, 23, 3',\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    strokeDasharray: '0, 0, 23, 0, 23, 0',\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0.2,\n    },\n  },\n  changes: {\n    strokeDasharray: '0, 60, 23, 0, 23, 0',\n    strokeDashoffset: 0,\n    opacity: 0,\n    transition: {\n      duration: 0.5,\n    },\n  },\n}\n\nconst arrows = {\n  syncing: {\n    opacity: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    opacity: 0,\n    transition: {\n      duration: 0.2,\n    },\n  },\n  changes: {\n    opacity: 0,\n  },\n}\n\nconst checkmark = {\n  syncing: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  saved: {\n    pathLength: 1,\n    transition: {\n      delay: 0.4,\n      duration: 0.3,\n    },\n  },\n  changes: {\n    pathLength: 0,\n    transition: {\n      duration: 0.2,\n    },\n  },\n}\n\nconst edit = {\n  syncing: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  saved: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  changes: {\n    pathLength: 1,\n    transition: {\n      duration: 0.4,\n      delay: 0.5,\n    },\n  },\n}\n\ninterface AnimatedStatusIconProps {\n  status?: 'changes' | 'saved' | 'syncing'\n}\n\nexport function AnimatedStatusIcon(props: AnimatedStatusIconProps) {\n  const {status} = props\n\n  if (!status) {\n    return null\n  }\n\n  return (\n    <svg\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 25 25\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.2\"\n      data-sanity-icon=\"\"\n    >\n      <motion.g variants={root} initial={status} animate={status}>\n        <RotateGroup data-rotate={status === 'changes' ? undefined : ''}>\n          <Arrows variants={arrows} initial={status} animate={status} />\n          <Circle variants={circle} initial={status} animate={status} />\n        </RotateGroup>\n        <Checkmark variants={checkmark} initial={status} animate={status} />\n        <Edit variants={edit} initial={status} animate={status} />\n      </motion.g>\n    </svg>\n  )\n}\n", "import React, {useMemo} from 'react'\nimport {Box, Button, ButtonProps, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {AnimatedStatusIcon} from './AnimatedStatusIcon'\nimport {useTimeAgo} from 'sanity'\n\ninterface ReviewChangesButtonProps extends React.HTMLProps<HTMLButtonElement> {\n  status?: 'changes' | 'saved' | 'syncing'\n  lastUpdated?: string\n  collapsed?: boolean\n}\n\nconst ReviewButton = React.forwardRef(function ReviewButton(\n  props: ReviewChangesButtonProps & ButtonProps,\n  ref: React.ForwardedRef<HTMLButtonElement>,\n) {\n  const {collapsed, status, lastUpdated, ...rest} = props\n  const lastUpdatedTime = useTimeAgo(lastUpdated || '', {minimal: true})\n  const lastUpdatedTimeAgo = useTimeAgo(lastUpdated || '', {minimal: true, agoSuffix: true})\n  const a11yUpdatedAgo = useTimeAgo(lastUpdated || '', {minimal: false, agoSuffix: true})\n\n  const buttonProps: ButtonProps = useMemo(() => {\n    if (status === 'syncing') {\n      return {\n        text: 'Saving...',\n        tone: undefined,\n      }\n    }\n    if (status === 'changes') {\n      return {\n        text: lastUpdatedTime,\n        tone: 'caution',\n      }\n    }\n    if (status === 'saved') {\n      return {\n        text: 'Saved!',\n        tone: 'positive',\n      }\n    }\n\n    return {}\n  }, [status, lastUpdatedTime])\n\n  if (!status) {\n    return null\n  }\n\n  return (\n    <Tooltip\n      placement=\"top\"\n      portal\n      disabled={status !== 'changes'}\n      content={\n        <Stack padding={3} space={3}>\n          <Text size={1} weight=\"semibold\">\n            Review changes\n          </Text>\n          <Text size={1} muted>\n            Changes saved <abbr aria-label={a11yUpdatedAgo}>{lastUpdatedTimeAgo}</abbr>\n          </Text>\n        </Stack>\n      }\n    >\n      <Button\n        mode=\"bleed\"\n        justify=\"flex-start\"\n        tone={buttonProps?.tone}\n        {...rest}\n        data-testid=\"review-changes-button\"\n        ref={ref}\n        aria-label=\"Review changes\"\n      >\n        <Flex align=\"center\">\n          <Box marginRight={collapsed ? 0 : 3} aria-hidden=\"true\">\n            <Text>\n              <AnimatedStatusIcon status={status} />\n            </Text>\n          </Box>\n          {!collapsed && (\n            <Text size={1} weight=\"medium\">\n              {buttonProps?.text}\n            </Text>\n          )}\n        </Flex>\n      </Button>\n    </Tooltip>\n  )\n})\n\nexport const ReviewChangesButton = React.memo(ReviewButton)\n", "import {Box, Flex, useElementRect} from '@sanity/ui'\nimport React, {useEffect, useMemo, useState, memo, useLayoutEffect} from 'react'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {DocumentBadges} from './DocumentBadges'\nimport {PublishStatus} from './PublishStatus'\nimport {ReviewChangesButton} from './ReviewChangesButton'\nimport {useSyncState, useTimelineSelector} from 'sanity'\n\nconst SYNCING_TIMEOUT = 1000\nconst SAVED_TIMEOUT = 3000\n\nexport const DocumentSparkline = memo(function DocumentSparkline() {\n  const {\n    changesOpen,\n    documentId,\n    documentType,\n    editState,\n    onHistoryClose,\n    onHistoryOpen,\n    timelineStore,\n    value,\n  } = useDocumentPane()\n  const syncState = useSyncState(documentId, documentType)\n\n  const lastUpdated = value?._updatedAt\n  const lastPublished = editState?.published?._updatedAt\n  const liveEdit = Boolean(editState?.liveEdit)\n  const published = Boolean(editState?.published)\n  const changed = Boolean(editState?.draft)\n\n  const [rootFlexElement, setRootFlexElement] = useState<HTMLDivElement | null>(null)\n  const rootFlexRect = useElementRect(rootFlexElement)\n  const collapsed = !rootFlexRect || rootFlexRect?.width < 300\n\n  const [status, setStatus] = useState<'saved' | 'syncing' | null>(null)\n\n  // Subscribe to TimelineController changes and store internal state.\n  const showingRevision = useTimelineSelector(timelineStore, (state) => state.onOlderRevision)\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    // Schedule an update to set the status to 'saved' when status changed to 'syncing.\n    // We use `syncState.isSyncing` here to avoid the status being set to 'saved' when the document is syncing.\n    if (status === 'syncing' && !syncState.isSyncing) {\n      const timerId = setTimeout(() => setStatus('saved'), SYNCING_TIMEOUT)\n      return () => clearTimeout(timerId)\n    }\n    // Schedule an update to clear the status when status changed to 'saved'\n    if (status === 'saved') {\n      const timerId = setTimeout(() => setStatus(null), SAVED_TIMEOUT)\n      return () => clearTimeout(timerId)\n    }\n  }, [status, lastUpdated, syncState.isSyncing])\n\n  // Clear the status when documentId changes to make sure we don't show the wrong status when opening a new document\n  useLayoutEffect(() => {\n    setStatus(null)\n  }, [documentId])\n\n  // Set status to 'syncing' when lastUpdated changes and we go from not syncing to syncing\n  useLayoutEffect(() => {\n    if (syncState.isSyncing) {\n      setStatus('syncing')\n    }\n  }, [syncState.isSyncing, lastUpdated])\n\n  const reviewButton = useMemo(\n    () => (\n      <ReviewChangesButton\n        lastUpdated={lastUpdated}\n        status={status || (changed ? 'changes' : undefined)}\n        onClick={changesOpen ? onHistoryClose : onHistoryOpen}\n        disabled={showingRevision}\n        selected={changesOpen}\n        collapsed={collapsed}\n      />\n    ),\n    [\n      changed,\n      changesOpen,\n      onHistoryClose,\n      onHistoryOpen,\n      lastUpdated,\n      showingRevision,\n      status,\n      collapsed,\n    ],\n  )\n\n  const publishStatus = useMemo(\n    () =>\n      (liveEdit || published) && (\n        <Box marginRight={1}>\n          <PublishStatus\n            disabled={showingRevision}\n            lastPublished={lastPublished}\n            lastUpdated={lastUpdated}\n            liveEdit={liveEdit}\n            collapsed={collapsed}\n          />\n        </Box>\n      ),\n    [collapsed, lastPublished, lastUpdated, liveEdit, published, showingRevision],\n  )\n\n  return (\n    <Flex align=\"center\" data-ui=\"DocumentSparkline\" ref={setRootFlexElement}>\n      {publishStatus}\n\n      <Flex align=\"center\" flex={1}>\n        {reviewButton}\n        {!collapsed && (\n          <Box marginLeft={3}>\n            <DocumentBadges />\n          </Box>\n        )}\n      </Flex>\n    </Flex>\n  )\n})\n", "import React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {Box, Flex} from '@sanity/ui'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {DocumentStatusBarActions, HistoryStatusBarActions} from './DocumentStatusBarActions'\nimport {DocumentSparkline} from './sparkline/DocumentSparkline'\nimport {useTimelineSelector} from 'sanity'\n\nexport interface DocumentStatusBarProps {\n  actionsBoxRef?: React.Ref<HTMLDivElement>\n}\n\nconst DocumentActionsBox = styled(Box)`\n  min-width: 10em;\n  max-width: 16em;\n`\n\nexport function DocumentStatusBar(props: DocumentStatusBarProps) {\n  const {actionsBoxRef} = props\n  const {badges, timelineStore} = useDocumentPane()\n\n  // Subscribe to external timeline state changes\n  const showingRevision = useTimelineSelector(timelineStore, (state) => state.onOlderRevision)\n\n  return useMemo(\n    () => (\n      <Box paddingLeft={2} paddingRight={[2, 3]} paddingY={2}>\n        <Flex align=\"center\">\n          <Box flex={[1, 2]}>{badges && <DocumentSparkline />}</Box>\n\n          <DocumentActionsBox flex={1} marginLeft={[1, 3]} ref={actionsBoxRef}>\n            {showingRevision ? <HistoryStatusBarActions /> : <DocumentStatusBarActions />}\n          </DocumentActionsBox>\n        </Flex>\n      </Box>\n    ),\n    [actionsBoxRef, badges, showingRevision],\n  )\n}\n", "import isHotkey from 'is-hotkey'\nimport React, {ElementType, createElement, useCallback, useMemo, useState} from 'react'\nimport {ActionStateDialog} from '../statusBar'\nimport {RenderActionCollectionState} from '../../../components'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {DocumentActionDescription, DocumentActionProps, LegacyLayerProvider} from 'sanity'\n\nexport interface KeyboardShortcutResponderProps {\n  actionsBoxElement: HTMLElement | null\n  activeIndex: number\n  as?: ElementType\n  currentMinWidth?: number\n  flex?: number\n  id: string\n  minWidth?: number\n  onActionStart: (index: number) => void\n  rootRef: React.Ref<HTMLDivElement>\n  states: DocumentActionDescription[]\n}\n\nfunction KeyboardShortcutResponder(\n  props: KeyboardShortcutResponderProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height'>,\n) {\n  const {\n    actionsBoxElement,\n    activeIndex,\n    as = 'div',\n    children,\n    id,\n    onActionStart,\n    onKeyDown,\n    rootRef,\n    states,\n    ...rest\n  } = props\n\n  const activeAction = states[activeIndex]\n\n  const handleKeyDown = useCallback(\n    (event: any) => {\n      const matchingStates = states.filter(\n        (state) => state.shortcut && isHotkey(state.shortcut, event),\n      )\n\n      const matchingState = matchingStates[0]\n\n      if (matchingStates.length > 1) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Keyboard shortcut conflict: More than one document action matches the shortcut \"${matchingState.shortcut}\"`,\n        )\n      }\n\n      if (matchingState && !matchingState.disabled && matchingState.onHandle) {\n        event.preventDefault()\n        matchingState.onHandle()\n        onActionStart(states.indexOf(matchingState))\n        return\n      }\n\n      if (onKeyDown) {\n        onKeyDown(event)\n      }\n    },\n    [onActionStart, onKeyDown, states],\n  )\n\n  return createElement(\n    as,\n    {\n      id,\n      onKeyDown: handleKeyDown,\n      tabIndex: -1,\n      ...rest,\n      ref: rootRef,\n    },\n    [\n      children,\n      activeAction && activeAction.dialog && (\n        <LegacyLayerProvider zOffset=\"paneFooter\">\n          <ActionStateDialog dialog={activeAction.dialog} referenceElement={actionsBoxElement} />\n        </LegacyLayerProvider>\n      ),\n    ],\n  )\n}\n\nexport interface DocumentActionShortcutsProps {\n  actionsBoxElement: HTMLElement | null\n  as?: ElementType\n  currentMinWidth?: number\n  debug?: boolean\n  flex: number\n  id: string\n  minWidth: number\n  rootRef: React.Ref<HTMLDivElement>\n}\n\nexport const DocumentActionShortcuts = React.memo(\n  (props: DocumentActionShortcutsProps & Omit<React.HTMLProps<HTMLDivElement>, 'as'>) => {\n    const {actionsBoxElement, as = 'div', children, ...rest} = props\n    const {actions, editState} = useDocumentPane()\n    const [activeIndex, setActiveIndex] = useState(-1)\n\n    const onActionStart = useCallback((idx: number) => {\n      setActiveIndex(idx)\n    }, [])\n\n    const actionProps: DocumentActionProps | null = useMemo(\n      () =>\n        editState && {\n          ...editState,\n\n          // @todo: what to call here?\n          onComplete: () => undefined,\n\n          // @todo: get revision string\n          revision: undefined,\n        },\n      [editState],\n    )\n\n    if (!actionProps || !actions) return null\n\n    return (\n      <RenderActionCollectionState actionProps={actionProps} actions={actions}>\n        {({states}) => (\n          <KeyboardShortcutResponder\n            {...rest}\n            activeIndex={activeIndex}\n            actionsBoxElement={actionsBoxElement}\n            as={as}\n            onActionStart={onActionStart}\n            states={states}\n          >\n            {children}\n          </KeyboardShortcutResponder>\n        )}\n      </RenderActionCollectionState>\n    )\n  },\n)\n\nDocumentActionShortcuts.displayName = 'DocumentActionShortcuts'\n", "import {\n  Card,\n  Code,\n  DialogProvider,\n  DialogProviderProps,\n  Flex,\n  PortalProvider,\n  Stack,\n  Text,\n  useElementRect,\n} from '@sanity/ui'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {fromString as pathFromString} from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {DocumentPaneNode} from '../../types'\nimport {Pane, PaneFooter, usePaneRouter} from '../../components'\nimport {usePaneLayout} from '../../components/pane/usePaneLayout'\nimport {ErrorPane} from '../error'\nimport {LoadingPane} from '../loading'\nimport {DOCUMENT_PANEL_PORTAL_ELEMENT} from '../../constants'\nimport {DocumentOperationResults} from './DocumentOperationResults'\nimport {DocumentPaneProvider} from './DocumentPaneProvider'\nimport {DocumentPanel} from './documentPanel'\nimport {DocumentActionShortcuts} from './keyboardShortcuts'\nimport {DocumentStatusBar} from './statusBar'\nimport {DocumentPaneProviderProps} from './types'\nimport {useDocumentPane} from './useDocumentPane'\nimport {\n  DOCUMENT_INSPECTOR_MIN_WIDTH,\n  DOCUMENT_PANEL_INITIAL_MIN_WIDTH,\n  DOCUMENT_PANEL_MIN_WIDTH,\n} from './constants'\nimport {\n  ChangeConnectorRoot,\n  ReferenceInputOptionsProvider,\n  SourceProvider,\n  isDev,\n  useDocumentType,\n  useSource,\n  useTemplatePermissions,\n  useTemplates,\n  useZIndex,\n} from 'sanity'\n\ntype DocumentPaneOptions = DocumentPaneNode['options']\n\nconst DIALOG_PROVIDER_POSITION: DialogProviderProps['position'] = [\n  // We use the `position: fixed` for dialogs on narrower screens (first two media breakpoints).\n  'fixed',\n  'fixed',\n  // And we use the `position: absolute` strategy (within panes) on wide screens.\n  'absolute',\n]\n\nconst StyledChangeConnectorRoot = styled(ChangeConnectorRoot)`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  min-width: 0;\n`\n\nexport const DocumentPane = memo(function DocumentPane(props: DocumentPaneProviderProps) {\n  const {name: parentSourceName} = useSource()\n\n  return (\n    <SourceProvider name={props.pane.source || parentSourceName}>\n      <DocumentPaneInner {...props} />\n    </SourceProvider>\n  )\n})\n\nfunction DocumentPaneInner(props: DocumentPaneProviderProps) {\n  const {pane, paneKey} = props\n  const {resolveNewDocumentOptions} = useSource().document\n  const paneRouter = usePaneRouter()\n  const options = usePaneOptions(pane.options, paneRouter.params)\n  const {documentType, isLoaded: isDocumentLoaded} = useDocumentType(options.id, options.type)\n\n  // The templates that should be creatable from inside this document pane.\n  // For example, from the \"Create new\" menu in reference inputs.\n  const templateItems = useMemo(() => {\n    return resolveNewDocumentOptions({\n      type: 'document',\n      documentId: options.id,\n      schemaType: options.type,\n    })\n  }, [options.id, options.type, resolveNewDocumentOptions])\n\n  const [templatePermissions, isTemplatePermissionsLoading] = useTemplatePermissions({\n    templateItems,\n  })\n  const isLoaded = isDocumentLoaded && !isTemplatePermissionsLoading\n\n  const providerProps = useMemo(() => {\n    return isLoaded && documentType && options.type !== documentType\n      ? mergeDocumentType(props, options, documentType)\n      : props\n  }, [props, documentType, isLoaded, options])\n\n  const {ReferenceChildLink, handleEditReference, groupIndex, routerPanesState} = paneRouter\n  const childParams = routerPanesState[groupIndex + 1]?.[0].params || {}\n  const routerPanesStateLength = routerPanesState.length\n  const {parentRefPath} = childParams\n\n  const activePath: {path: Path; state: 'selected' | 'pressed' | 'none'} = useMemo(() => {\n    return parentRefPath\n      ? {\n          path: pathFromString(parentRefPath),\n          state:\n            // eslint-disable-next-line no-nested-ternary\n            groupIndex >= routerPanesStateLength - 1\n              ? 'none'\n              : groupIndex >= routerPanesStateLength - 2\n              ? 'selected'\n              : 'pressed',\n        }\n      : {path: [], state: 'none'}\n  }, [parentRefPath, groupIndex, routerPanesStateLength])\n\n  if (options.type === '*' && !isLoaded) {\n    return <LoadingPane flex={2.5} minWidth={320} paneKey={paneKey} title=\"Loading document…\" />\n  }\n\n  if (!documentType) {\n    return (\n      <ErrorPane\n        flex={2.5}\n        minWidth={320}\n        paneKey={paneKey}\n        title={<>The document was not found</>}\n      >\n        <Stack space={4}>\n          <Text as=\"p\">\n            The document type is not defined, and a document with the <code>{options.id}</code>{' '}\n            identifier could not be found.\n          </Text>\n        </Stack>\n      </ErrorPane>\n    )\n  }\n\n  return (\n    <DocumentPaneProvider\n      // this needs to be here to avoid formState from being re-used across (incompatible) document types\n      // see https://github.com/sanity-io/sanity/discussions/3794 for a description of the problem\n      key={`${documentType}-${options.id}`}\n      {...providerProps}\n    >\n      {/* NOTE: this is a temporary location for this provider until we */}\n      {/* stabilize the reference input options formally in the form builder */}\n      {/* eslint-disable-next-line react/jsx-pascal-case */}\n      <ReferenceInputOptionsProvider\n        EditReferenceLinkComponent={ReferenceChildLink}\n        onEditReference={handleEditReference}\n        initialValueTemplateItems={templatePermissions}\n        activePath={activePath}\n      >\n        <InnerDocumentPane />\n      </ReferenceInputOptionsProvider>\n    </DocumentPaneProvider>\n  )\n}\n\nfunction usePaneOptions(\n  options: DocumentPaneOptions,\n  params: Record<string, string | undefined> = {},\n): DocumentPaneOptions {\n  const templates = useTemplates()\n\n  return useMemo(() => {\n    // The document type is provided, so return\n    if (options.type && options.type !== '*') {\n      return options\n    }\n\n    // Attempt to derive document type from the template configuration\n    const templateName = options.template || params.template\n    const template = templateName ? templates.find((t) => t.id === templateName) : undefined\n    const documentType = template?.schemaType\n\n    // No document type was found in a template\n    if (!documentType) {\n      return options\n    }\n\n    // The template provided the document type, so modify the pane’s `options` property\n    return {...options, type: documentType}\n  }, [options, params.template, templates])\n}\n\nfunction mergeDocumentType(\n  props: DocumentPaneProviderProps,\n  options: DocumentPaneOptions,\n  documentType: string,\n): DocumentPaneProviderProps {\n  return {\n    ...props,\n    pane: {\n      ...props.pane,\n      options: {...options, type: documentType},\n    },\n  }\n}\n\nfunction InnerDocumentPane() {\n  const {\n    changesOpen,\n    documentType,\n    inspector,\n    inspectOpen,\n    onFocus,\n    onPathOpen,\n    onHistoryOpen,\n    onKeyUp,\n    paneKey,\n    schemaType,\n    value,\n  } = useDocumentPane()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n  const zOffsets = useZIndex()\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const [footerElement, setFooterElement] = useState<HTMLDivElement | null>(null)\n  const [actionsBoxElement, setActionsBoxElement] = useState<HTMLDivElement | null>(null)\n  const [documentPanelPortalElement, setDocumentPanelPortalElement] = useState<HTMLElement | null>(\n    null,\n  )\n  const footerRect = useElementRect(footerElement)\n  const footerH = footerRect?.height\n\n  const onConnectorSetFocus = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onFocus(path)\n    },\n    [onPathOpen, onFocus],\n  )\n\n  const currentMinWidth =\n    DOCUMENT_PANEL_INITIAL_MIN_WIDTH + (inspector ? DOCUMENT_INSPECTOR_MIN_WIDTH : 0)\n\n  const minWidth = DOCUMENT_PANEL_MIN_WIDTH + (inspector ? DOCUMENT_INSPECTOR_MIN_WIDTH : 0)\n\n  if (!schemaType) {\n    return (\n      <ErrorPane\n        currentMinWidth={currentMinWidth}\n        flex={2.5}\n        minWidth={minWidth}\n        paneKey={paneKey}\n        title={\n          <>\n            Unknown document type: <code>{documentType}</code>\n          </>\n        }\n        tone=\"caution\"\n      >\n        <Stack space={4}>\n          {documentType && (\n            <Text as=\"p\">\n              This document has the schema type <code>{documentType}</code>, which is not defined as\n              a type in the local content studio schema.\n            </Text>\n          )}\n\n          {!documentType && (\n            <Text as=\"p\">\n              This document does not exist, and no schema type was specified for it.\n            </Text>\n          )}\n\n          {isDev && value && (\n            <>\n              <Text as=\"p\">Here is the JSON representation of the document:</Text>\n              <Card padding={3} overflow=\"auto\" radius={2} shadow={1} tone=\"inherit\">\n                <Code language=\"json\" size={[1, 1, 2]}>\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </>\n          )}\n        </Stack>\n      </ErrorPane>\n    )\n  }\n\n  return (\n    <DocumentActionShortcuts\n      actionsBoxElement={actionsBoxElement}\n      as={Pane}\n      currentMinWidth={currentMinWidth}\n      data-testid=\"document-pane\"\n      flex={2.5}\n      id={paneKey}\n      minWidth={minWidth}\n      onKeyUp={onKeyUp}\n      rootRef={setRootElement}\n    >\n      <DialogProvider position={DIALOG_PROVIDER_POSITION} zOffset={zOffsets.portal}>\n        <Flex direction=\"column\" flex={1} height={layoutCollapsed ? undefined : 'fill'}>\n          <StyledChangeConnectorRoot\n            data-testid=\"change-connector-root\"\n            isReviewChangesOpen={changesOpen}\n            onOpenReviewChanges={onHistoryOpen}\n            onSetFocus={onConnectorSetFocus}\n          >\n            <DocumentPanel\n              footerHeight={footerH || null}\n              isInspectOpen={inspectOpen}\n              rootElement={rootElement}\n              setDocumentPanelPortalElement={setDocumentPanelPortalElement}\n            />\n          </StyledChangeConnectorRoot>\n        </Flex>\n      </DialogProvider>\n\n      {/* These providers are added because we want the dialogs in `DocumentStatusBar` to be scoped to the document pane. */}\n      {/* The portal element comes from `DocumentPanel`. */}\n      <PortalProvider\n        __unstable_elements={{[DOCUMENT_PANEL_PORTAL_ELEMENT]: documentPanelPortalElement}}\n      >\n        <DialogProvider position={DIALOG_PROVIDER_POSITION} zOffset={zOffsets.portal}>\n          <PaneFooter ref={setFooterElement}>\n            <DocumentStatusBar actionsBoxRef={setActionsBoxElement} />\n          </PaneFooter>\n        </DialogProvider>\n      </PortalProvider>\n\n      <DocumentOperationResults />\n    </DocumentActionShortcuts>\n  )\n}\n", "import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoDocumentTypesScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No document types\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please define at least one document type in your schema.\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  <a\n                    href=\"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    Learn how to add a document type &rarr;\n                  </a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n", "import React, {useEffect} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {Panes} from '../../structureResolvers'\nimport {useDeskTool} from '../../useDeskTool'\nimport {LOADING_PANE} from '../../constants'\nimport {DocumentPaneNode} from '../../types'\nimport {useEditState, useSchema, unstable_useValuePreview as useValuePreview} from 'sanity'\n\ninterface DeskTitleProps {\n  resolvedPanes: Panes['resolvedPanes']\n}\n\nconst DocumentTitle = (props: {documentId: string; documentType: string}) => {\n  const {documentId, documentType} = props\n  const editState = useEditState(documentId, documentType)\n  const schema = useSchema()\n  const isNewDocument = !editState?.published && !editState?.draft\n  const documentValue = editState?.draft || editState?.published\n  const schemaType = schema.get(documentType) as ObjectSchemaType | undefined\n\n  const {value, isLoading: previewValueIsLoading} = useValuePreview({\n    enabled: true,\n    schemaType,\n    value: documentValue,\n  })\n\n  const documentTitle = isNewDocument\n    ? `New ${schemaType?.title || schemaType?.name}`\n    : value?.title || 'Untitled'\n\n  const settled = editState.ready && !previewValueIsLoading\n  const newTitle = useConstructDocumentTitle(documentTitle)\n  useEffect(() => {\n    if (!settled) return\n    // Set the title as the document title\n    document.title = newTitle\n  }, [documentTitle, settled, newTitle])\n\n  return null\n}\n\nconst PassthroughTitle = (props: {title?: string}) => {\n  const {title} = props\n  const newTitle = useConstructDocumentTitle(title)\n  useEffect(() => {\n    // Set the title as the document title\n    document.title = newTitle\n  }, [newTitle, title])\n  return null\n}\n\nexport const DeskTitle = (props: DeskTitleProps) => {\n  const {resolvedPanes} = props\n\n  if (!resolvedPanes?.length) return null\n\n  const lastPane = resolvedPanes[resolvedPanes.length - 1]\n\n  // If the last pane is loading, display the desk tool title only\n  if (isLoadingPane(lastPane)) {\n    return <PassthroughTitle />\n  }\n\n  // If the last pane is a document\n  if (isDocumentPane(lastPane)) {\n    // Passthrough the document pane's title, which may be defined in structure builder\n    if (lastPane?.title) {\n      return <PassthroughTitle title={lastPane.title} />\n    }\n\n    // Otherwise, display a `document.title` containing the resolved Sanity document title\n    return <DocumentTitle documentId={lastPane.options.id} documentType={lastPane.options.type} />\n  }\n\n  // Otherwise, display the last pane's title (if present)\n  return <PassthroughTitle title={lastPane?.title} />\n}\n\n/**\n * Construct a pipe delimited title containing `activeTitle` (if applicable) and the base desk title.\n *\n * @param activeTitle - Title of the first segment\n *\n * @returns A pipe delimited title in the format `${activeTitle} | %BASE_DESK_TITLE%`\n * or simply `%BASE_DESK_TITLE` if `activeTitle` is undefined.\n */\nfunction useConstructDocumentTitle(activeTitle?: string) {\n  const deskToolBaseTitle = useDeskTool().structureContext.title\n  return [activeTitle, deskToolBaseTitle].filter((title) => title).join(' | ')\n}\n\n// Type guards\nfunction isDocumentPane(pane: Panes['resolvedPanes'][number]): pane is DocumentPaneNode {\n  return pane !== LOADING_PANE && pane.type === 'document'\n}\n\nfunction isLoadingPane(pane: Panes['resolvedPanes'][number]): pane is typeof LOADING_PANE {\n  return pane === LOADING_PANE\n}\n", "import {PortalProvider, useTheme, useToast} from '@sanity/ui'\nimport React, {memo, Fragment, useState, useEffect, useCallback} from 'react'\nimport styled from 'styled-components'\nimport isHotkey from 'is-hotkey'\nimport {LOADING_PANE} from '../../constants'\nimport {LoadingPane, DeskToolPane} from '../../panes'\nimport {useResolvedPanes} from '../../structureResolvers'\nimport {PaneNode} from '../../types'\nimport {PaneLayout} from '../pane'\nimport {useDeskTool} from '../../useDeskTool'\nimport {NoDocumentTypesScreen} from './NoDocumentTypesScreen'\nimport {DeskTitle} from './DeskTitle'\nimport {useSchema, _isCustomDocumentTypeDefinition} from 'sanity'\nimport {useRouterState} from 'sanity/router'\n\ninterface DeskToolProps {\n  onPaneChange: (panes: Array<PaneNode | typeof LOADING_PANE>) => void\n}\n\nconst StyledPaneLayout = styled(PaneLayout)`\n  min-height: 100%;\n  min-width: 320px;\n`\n\nconst isSaveHotkey = isHotkey('mod+s')\n\n/**\n * @internal\n */\nexport const DeskTool = memo(function DeskTool({onPaneChange}: DeskToolProps) {\n  const {push: pushToast} = useToast()\n  const schema = useSchema()\n  const {layoutCollapsed, setLayoutCollapsed} = useDeskTool()\n  const {paneDataItems, resolvedPanes} = useResolvedPanes()\n  // Intent resolving is processed by the sibling `<IntentResolver />` but it doesn't have a UI for indicating progress.\n  // We handle that here, so if there are only 1 pane (the root structure), and there's an intent state in the router, we need to show a placeholder LoadingPane until\n  // the structure is resolved and we know what panes to load/display\n  const isResolvingIntent = useRouterState(\n    useCallback((routerState) => typeof routerState.intent === 'string', []),\n  )\n  const {\n    sanity: {media},\n  } = useTheme()\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const handleRootCollapse = useCallback(() => setLayoutCollapsed(true), [setLayoutCollapsed])\n  const handleRootExpand = useCallback(() => setLayoutCollapsed(false), [setLayoutCollapsed])\n\n  useEffect(() => {\n    // we check for length before emitting here to skip the initial empty array\n    // state from the `useResolvedPanes` hook. there should always be a root\n    // pane emitted on subsequent emissions\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes)\n    }\n  }, [onPaneChange, resolvedPanes])\n\n  useEffect(() => {\n    const handleGlobalKeyDown = (event: KeyboardEvent) => {\n      // Prevent `Cmd+S`\n      if (isSaveHotkey(event)) {\n        event.preventDefault()\n\n        pushToast({\n          closable: true,\n          id: 'auto-save-message',\n          status: 'info',\n          title: 'Your work is automatically saved!',\n          duration: 4000,\n        })\n      }\n    }\n\n    window.addEventListener('keydown', handleGlobalKeyDown)\n    return () => window.removeEventListener('keydown', handleGlobalKeyDown)\n  }, [pushToast])\n\n  const hasDefinedDocumentTypes = schema._original?.types.some(_isCustomDocumentTypeDefinition)\n\n  if (!hasDefinedDocumentTypes) {\n    return <NoDocumentTypesScreen />\n  }\n\n  return (\n    <PortalProvider element={portalElement || null}>\n      <StyledPaneLayout\n        flex={1}\n        height={layoutCollapsed ? undefined : 'fill'}\n        minWidth={media[1]}\n        onCollapse={handleRootCollapse}\n        onExpand={handleRootExpand}\n      >\n        {paneDataItems.map(\n          ({\n            active,\n            childItemId,\n            groupIndex,\n            itemId,\n            key: paneKey,\n            pane,\n            index: paneIndex,\n            params: paneParams,\n            path,\n            payload,\n            siblingIndex,\n            selected,\n          }) => (\n            <Fragment key={`${pane === LOADING_PANE ? 'loading' : pane.type}-${paneIndex}`}>\n              {pane === LOADING_PANE ? (\n                <LoadingPane paneKey={paneKey} path={path} selected={selected} />\n              ) : (\n                <DeskToolPane\n                  active={active}\n                  groupIndex={groupIndex}\n                  index={paneIndex}\n                  pane={pane}\n                  childItemId={childItemId}\n                  itemId={itemId}\n                  paneKey={paneKey}\n                  params={paneParams}\n                  payload={payload}\n                  path={path}\n                  selected={selected}\n                  siblingIndex={siblingIndex}\n                />\n              )}\n            </Fragment>\n          ),\n        )}\n        {/* If there's just 1 pane (the root), or less, and we're resolving an intent then it's necessary to show */}\n        {/* a loading indicator as the intent resolving is async, could take a while and can also be interrupted/redirected */}\n        {paneDataItems.length <= 1 && isResolvingIntent && (\n          <LoadingPane paneKey=\"intent-resolver\" />\n        )}\n      </StyledPaneLayout>\n      <DeskTitle resolvedPanes={resolvedPanes} />\n      <div data-portal=\"\" ref={setPortalElement} />\n    </PortalProvider>\n  )\n})\n", "import React, {useEffect, useState} from 'react'\nimport {ErrorBoundary} from '@sanity/ui'\nimport {DeskToolOptions} from '../../types'\nimport {DeskToolProvider} from '../../DeskToolProvider'\nimport {setActivePanes} from '../../getIntentState'\nimport {IntentResolver} from './intentResolver'\nimport {StructureError} from './StructureError'\nimport {DeskTool} from './DeskTool'\nimport {SourceProvider, useWorkspace, Tool} from 'sanity'\n\ninterface DeskToolBoundaryProps {\n  tool: Tool<DeskToolOptions>\n}\n\nexport function DeskToolBoundary({tool: {options}}: DeskToolBoundaryProps) {\n  const {unstable_sources: sources} = useWorkspace()\n  const [firstSource] = sources\n  const {source, defaultDocumentNode, structure} = options || {}\n\n  // Set active panes to blank on mount and unmount\n  useEffect(() => {\n    setActivePanes([])\n    return () => setActivePanes([])\n  }, [])\n\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n  // this re-throws if the error it catches is not a PaneResolutionError\n  if (error) return <StructureError error={error} />\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <SourceProvider name={source || firstSource.name}>\n        <DeskToolProvider defaultDocumentNode={defaultDocumentNode} structure={structure}>\n          <DeskTool onPaneChange={setActivePanes} />\n          <IntentResolver />\n        </DeskToolProvider>\n      </SourceProvider>\n    </ErrorBoundary>\n  )\n}\n"],
  "mappings": "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",
  "names": ["validateFormat", "printWarning", "warning", "isValidElement", "React", "React", "index", "React", "React", "React", "RenderActionCollectionState", "props", "actions", "children", "actionProps", "onActionComplete", "jsx", "GetHookCollectionState", "onReset", "hooks", "args", "RenderBadgeCollectionState", "badges", "badgeProps", "rest", "emptyArray", "PaneRouterProvider", "flatIndex", "index", "params", "payload", "siblingIndex", "navigate", "navigateIntent", "resolvePathFromState", "useRouter", "routerState", "useRouterState", "panes", "expand", "usePaneLayout", "routerPaneGroups", "useMemo", "lastPane", "length", "groupIndex", "createNextRouterState", "useCallback", "modifier", "currentGroup", "currentItem", "nextGroup", "nextPanes", "slice", "nextRouterState", "modifyCurrentGroup", "setTimeout", "createPathWithParams", "nextParams", "siblings", "item", "setPayload", "nextPayload", "setParams", "handleEditReference", "_ref", "id", "parentRefPath", "type", "template", "pathToString", "ctx", "hasGroupSiblings", "groupLength", "routerPanesState", "ChildLink", "BackLink", "ReferenceChildLink", "ParameterizedLink", "replaceCurrent", "opts", "arguments", "undefined", "closeCurrent", "filter", "sibling", "closeCurrentAndAfter", "expandLast", "element", "replace", "duplicateCurrent", "options", "duplicatedItem", "setView", "viewId", "restParams", "omit", "view", "PaneRouterContext", "Provider", "value", "_calcPaneResize", "cache", "left", "right", "deltaX", "_a", "_b", "sum", "flex", "width", "leftMinWidth", "minWidth", "PANE_DEFAULT_MIN_WIDTH", "rightMinWidth", "leftMaxWidth", "Math", "min", "maxWidth", "Infinity", "rightMaxWidth", "minDeltaX", "rightMinDeltaX", "maxDeltaX", "leftMaxDeltaX", "_deltaX", "max", "leftW", "rightW", "leftFlex", "rightFlex", "_getDOMPath", "rootElement", "el", "path", "e", "parentElement", "Array", "from", "childNodes", "indexOf", "unshift", "EMPTY_PATH", "_sortElements", "elements", "map", "WeakMap", "set", "_sortByElementPath", "a", "b", "get", "len", "i", "aIndex", "bIndex", "sort", "createPaneLayoutController", "observers", "optionsMap", "userCollapsedElementSet", "Set", "rootWidth", "expandedElement", "resizeDataMap", "Map", "resizing", "collapse", "add", "_notifyObservers", "delete", "mount", "original", "push", "idx", "splice", "resize", "leftElement", "_c", "_d", "leftIndex", "leftOptions", "rightElement", "rightOptions", "offsetWidth", "leftResizeData", "rightResizeData", "currentMinWidth", "currentMaxWidth", "setRootElement", "nextRootElement", "setRootWidth", "nextRootWidth", "subscribe", "observer", "_elements", "dataMap", "lastElement", "collapsedWidth", "PANE_COLLAPSED_WIDTH", "remaingWidth", "isLast", "userCollapsed", "has", "sizeCollapsed", "collapsed", "resizeData", "data", "PaneLayout", "onCollapse", "onExpand", "restProps", "controller", "useState", "rootRect", "useElementRect", "state", "setState", "useEffect", "paneLayout", "PaneLayoutContext", "Root", "ref", "DocumentInspectorPanel", "documentId", "documentType", "usePane", "closeInspector", "inspector", "useDocumentPane", "features", "useDeskTool", "handleClose", "name", "createElement", "component", "onClose", "resizablePanes", "Resizable", "as", "DOCUMENT_INSPECTOR_MAX_WIDTH", "DOCUMENT_INSPECTOR_MIN_WIDTH", "Box", "PaneResolutionError", "Error", "constructor", "message", "context", "helpId", "cause", "_ref2", "__publicField", "randomIdCache", "assignId", "obj", "cachedValue", "nanoid", "bindCache", "memoBind", "methodKey", "boundMethods", "bound", "method", "concat", "bind", "isPromise", "thing", "then", "isSerializable", "isRecord", "serialize", "rethrowWithPaneResolutionErrors", "next", "unresolvedPane", "wrapWithPublishReplay", "pipe", "publishReplay", "refCount", "createPaneResolver", "middleware", "resolvePane", "isObservable", "switchMap", "result", "observableOf", "resolveIntent", "resolvedPaneCache", "memoize", "nextFn", "key", "join", "cachedResolvedPane", "fallbackEditorPanes", "traverse", "_ref3", "currentId", "intent", "parent", "levelIndex", "structureContext", "targetId", "schemaTypeName", "otherParams", "splitIndex", "resolvedPane", "firstValueFrom", "depthIndex", "canHandleIntent", "call", "pane", "child", "items", "Promise", "all", "nextLevelIndex", "resolve", "_id", "flat", "matchingPanes", "rootPaneNode", "closestPaneToRoot", "fallbackEditorChild", "nodeId", "resolveDocumentNode", "defaultDocumentBuilder", "schemaType", "initialValueTemplate", "hashContext", "stringify", "parentId", "serializeOptionsIndex", "serializeOptions", "serializeOptionsPath", "hashResolvedPaneMeta", "meta", "normalized", "routerPaneSibling", "paneNode", "JSON", "resolvePaneTree", "_ref4", "flattenedRouterPanes", "current", "resolvedPaneMeta", "loadingPanes", "restIndex", "loadingPanePath", "_", "currentIndex", "loadingPane", "nextStream", "startsWith", "nextResolvedPanes", "console", "warn", "generateHelpUrl", "createResolvedPaneNodeStream", "_ref5", "routerPanesStream", "initialCacheState", "cacheKeysByFlatIndex", "NEVER", "resolvedPanes$", "rawRouterPanes", "routerPanes", "flatMap", "routerPaneGroup", "startWith", "pairwise", "_ref6", "prev", "curr", "prevValue", "currValue", "isEqual", "diffIndex", "scan", "acc", "beforeDiffIndex", "afterDiffIndex", "keysToKeep", "keySet", "keysToDelete", "cacheKeySet", "_ref7", "nextPane", "prevPane", "distinctUntilChanged", "nextValue", "useRouterPanesStream", "routerStateSubject", "ReplaySubject", "routerPanes$", "asObservable", "_routerState", "useResolvedPanes", "error", "setError", "setData", "paneDataItems", "resolvedPanes", "reduce", "groupsLen", "itemId", "paneDataItem", "active", "childItemId", "LOADING_PANE", "selected", "subscription", "unsubscribe", "ensureDocumentIdAndType", "documentStore", "uuid", "resolvedType", "resolveTypeForDocument", "EMPTY_RECORD", "IntentResolver", "memo", "maybeIntent", "intentName", "useDocumentStore", "cancelled", "effect", "catch", "PathSegment", "styled", "span", "__template", "formatStack", "stack", "RegExp", "location", "host", "StructureError", "_ref8", "showStack", "SerializeError", "includes", "handleReload", "window", "reload", "Card", "height", "overflow", "padding", "sizing", "tone", "Container", "Heading", "jsxs", "marginTop", "radius", "shadow", "Stack", "space", "Label", "Code", "segment", "Text", "href", "rel", "target", "Button", "text", "icon", "SyncIcon", "onClick", "UnknownPane", "isSelected", "paneKey", "Pane", "PaneHeader", "title", "PaneContent", "muted", "getWaitMessages", "thresholds", "ms", "isDev", "src", "of", "merge", "_ref9", "mapTo", "delay", "DEFAULT_MESSAGE", "Content", "Flex", "LoadingPane", "messageProp", "resolvedMessage", "split", "currentMessage", "setCurrentMessage", "sub", "contentElement", "setContentElement", "mounted", "setMounted", "_raf2", "content", "align", "direction", "justify", "Spinner", "size", "displayName", "paneMap", "lazy", "document", "documentList", "list", "DeskToolPane", "PaneComponent", "Suspense", "fallback", "isActive", "_ref10", "_ref11", "prevParams", "prevPayload", "keys", "Object", "ErrorPane", "paddingX", "paddingY", "getOpErrorTitle", "op", "getOpSuccessTitle", "IGNORE_OPS", "DocumentOperationResults", "pushToast", "useToast", "event", "useDocumentOperationEvent", "prevEvent", "useRef", "paneRouter", "usePaneRouter", "cleanupId", "closable", "duration", "status", "description", "clearTimeout", "useDeskToolSetting", "namespace", "defaultValue", "settingsStore", "useSettingsStore", "setValue", "deskToolSettings", "forNamespace", "settings", "forKey", "listen", "newValue", "VIEW_MODE_PARSED", "VIEW_MODE_RAW", "VIEW_MODES", "lru", "HLRU", "isExpanded", "keyPath", "cached", "isArray", "toggleExpanded", "selectElement", "sel", "getSelection", "range", "createRange", "removeAllRanges", "selectNodeContents", "addRange", "select", "currentTarget", "maybeSelectAll", "selectAll", "keyCode", "metaKey", "ctrlKey", "preventDefault", "isDocumentLike", "isString", "_type", "JSONInspectorWrapper", "div", "_ref12", "theme", "color", "fonts", "sanity", "css", "code", "family", "sizes", "fontSize", "lineHeight", "rem", "syntax", "property", "constant", "string", "boolean", "number", "Search", "onChange", "query", "handleChange", "TextInput", "SearchIcon", "placeholder", "InspectDialog", "onInspectClose", "dialogIdPrefix", "viewModeId", "onViewModeChange", "viewMode", "find", "mode", "setParsedViewMode", "setRawViewMode", "Dialog", "header", "Fragment", "DocTitle", "onClickOutside", "style", "position", "bottom", "zIndex", "TabList", "Tab", "label", "TabPanel", "outline", "JSONInspector", "search", "language", "tabIndex", "onKeyDown", "onDoubleClick", "onFocus", "DeletedDocumentBanner", "_ref13", "revisionId", "restore", "useDocumentOperation", "handleRestore", "execute", "ReadOnlyIcon", "gap", "marginLeft", "TextOneLine", "ReferenceChangedBanner", "_e", "_f", "documentPreviewStore", "useDocumentPreviewStore", "routerReferenceId", "parentGroup", "parentSibling", "hasHistoryOpen", "Boolean", "rev", "pathFromString", "referenceInfo", "useMemoObservable", "parentRefPathSegment", "loading", "publishedId", "getPublishedId", "keyedSegmentIndex", "findIndex", "p", "unstable_observePathsDocumentPair", "debounceTime", "_ref14", "draft", "published", "availability", "refValue", "pathGet", "snapshot", "handleReloadReference", "shouldHide", "available", "WarningOutlineIcon", "CloseIcon", "PermissionCheckBanner", "_ref15", "granted", "requiredPermission", "currentUser", "useCurrentUser", "plural", "roles", "r", "array", "sep", "usePrevious", "LONG_ENOUGH_BUT_NOT_TOO_LONG", "useConditionalToast", "toast", "wasEnabled", "enabled", "ev", "FormView", "forwardRef", "hidden", "margins", "collapsedFieldSets", "collapsedPaths", "displayed", "editState", "fieldActions", "validation", "ready", "formState", "onBlur", "onSetCollapsedPath", "onPathOpen", "onSetCollapsedFieldSet", "onSetActiveFieldGroup", "presence", "useDocumentPresence", "patchChannel", "createPatchChannel", "isLocked", "transactionSyncLock", "pair", "documentEvents", "tap", "publish", "prepareMutationEvent", "prepareRebaseEvent", "hasRev", "_rev", "patches", "formRef", "setFormRef", "focusPath", "focusFirstDescendant", "setRef", "node", "paddingTop", "paddingBottom", "PresenceOverlay", "onSubmit", "FormBuilder", "__internal_fieldActions", "__internal_patchChannel", "changed", "focused", "groups", "members", "onFieldGroupSelect", "onPathBlur", "onPathFocus", "onSetFieldSetCollapsed", "onSetPathCollapsed", "readOnly", "Delay", "mutations", "mut", "patch", "fromMutationPatches", "origin", "remotePatches", "remoteMutations", "localPatches", "localMutations", "DocumentHeaderTabs", "activeViewId", "views", "tabPanelId", "DocumentHeaderTab", "handleClick", "disabled", "DocumentHeaderTitle", "connectionState", "documentValue", "subscribed", "useValuePreview", "DocumentPanelHeader", "_props", "onMenuAction", "onPaneClose", "onPaneSplit", "menuItems", "menuItemGroups", "timelineStore", "unstable_languageFilter", "useFieldActions", "menuNodes", "resolveMenuNodes", "actionHandler", "menuButtonNodes", "isMenuNodeButton", "contextMenuNodes", "isNotMenuNodeButton", "showTabs", "useTimelineSelector", "revTime", "showSplitPaneButton", "splitViews", "showSplitPaneCloseButton", "showPaneGroupCloseButton", "backButton", "tabs", "ArrowLeftIcon", "subActions", "TimelineMenu", "chunk", "placement", "languageFilterComponent", "PaneHeaderActionButton", "PaneContextMenuButton", "nodes", "Tooltip", "whiteSpace", "portal", "SplitVerticalIcon", "DocumentBox", "Scroller", "ScrollContainer", "_ref16", "$disabled", "DocumentPanel", "footerHeight", "isInspectOpen", "setDocumentPanelPortalElement", "permissions", "isPermissionsLoading", "isDeleting", "isDeleted", "layoutCollapsed", "parentPortal", "usePortal", "headerElement", "setHeaderElement", "headerRect", "portalRef", "documentScrollElement", "setDocumentScrollElement", "formContainerElement", "_createdAt", "selectedGroup", "group", "activeView", "portalElement", "splitPanes", "formViewHidden", "activeViewNode", "historical", "lastNonDeletedRevId", "scrollTo", "inspectDialog", "showInspector", "PortalProvider", "__unstable_elements", "BoundaryElementProvider", "VirtualizerScrollInstanceProvider", "scrollElement", "containerElement", "POPOVER_FALLBACK_PLACEMENTS", "DIALOG_WIDTH_TO_UI_WIDTH", "small", "medium", "large", "full", "ConfirmDialog", "dialog", "referenceElement", "Popover", "ConfirmDialogContent", "fallbackPlacements", "open", "preventOverflow", "cancelButtonIcon", "cancelButtonText", "confirmButtonIcon", "confirmButtonText", "onCancel", "onConfirm", "isTopLayer", "useLayer", "setElement", "handleClickOutside", "handleGlobalKeyDown", "useClickOutside", "useGlobalKeyDown", "borderTop", "Grid", "columns", "ModalDialog", "dialogId", "useId", "footer", "LegacyLayerProvider", "zOffset", "__unstable_hideCloseButton", "showCloseButton", "PopoverDialog", "PopoverDialogContent", "DocumentActionPortalProvider", "DOCUMENT_PANEL_PORTAL_ELEMENT", "ActionStateDialog", "modalId", "unknownModal", "ActionMenuButton", "actionStates", "idPrefix", "buttonRef", "actionIndex", "setActionIndex", "setReferenceElement", "handleAction", "popoverProps", "currentAction", "MenuButton", "button", "ChevronDownIcon", "menu", "Menu", "actionState", "ActionMenuListItem", "onAction", "popover", "onHandle", "tooltipContent", "MenuItem", "marginRight", "isValidElement", "isValidElementType", "shortcut", "Hotkeys", "String", "s", "toUpperCase", "DocumentStatusBarActionsInner", "showMenu", "states", "firstActionState", "menuActionStates", "buttonElement", "setButtonElement", "toLowerCase", "LayerProvider", "DocumentStatusBarActions", "_ref17", "HistoryStatusBarActions", "revision", "historyActions", "HistoryRestoreAction", "_ref18", "BADGE_TONES", "primary", "success", "warning", "danger", "DocumentBadgesInner", "_ref19", "Inline", "badge", "Badge", "DocumentBadges", "_ref20", "PublishStatus", "lastPublished", "lastUpdated", "liveEdit", "lastPublishedTimeAgo", "useTimeAgo", "minimal", "agoSuffix", "lastPublishedTime", "lastUpdatedTimeAgo", "lastUpdatedTime", "a11yUpdatedAgo", "a11yPublishedAgo", "a11yLabel", "PlayIcon", "PublishIcon", "weight", "StyledMotionPath", "motion", "Circle", "circle", "fill", "cx", "cy", "strokeWidth", "Arrows", "d", "Checkmark", "Edit", "rotateAnimation", "keyframes", "RotateGroup", "g", "root", "syncing", "scale", "transition", "saved", "changes", "strokeDasharray", "strokeDashoffset", "opacity", "arrows", "checkmark", "pathLength", "edit", "AnimatedStatusIcon", "viewBox", "stroke", "variants", "initial", "animate", "ReviewButton", "React", "buttonProps", "ReviewChangesButton", "SYNCING_TIMEOUT", "SAVED_TIMEOUT", "DocumentSparkline", "changesOpen", "onHistoryClose", "onHistoryOpen", "syncState", "useSyncState", "_updatedAt", "rootFlexElement", "setRootFlexElement", "rootFlexRect", "setStatus", "showingRevision", "onOlderRevision", "isSyncing", "timerId", "useLayoutEffect", "reviewButton", "publishStatus", "DocumentActionsBox", "DocumentStatusBar", "actionsBoxRef", "paddingLeft", "paddingRight", "KeyboardShortcutResponder", "actionsBoxElement", "activeIndex", "onActionStart", "rootRef", "activeAction", "handleKeyDown", "matchingStates", "isHotkey", "matchingState", "DocumentActionShortcuts", "setActiveIndex", "onComplete", "_ref21", "DIALOG_PROVIDER_POSITION", "StyledChangeConnectorRoot", "ChangeConnectorRoot", "DocumentPane", "parentSourceName", "useSource", "SourceProvider", "source", "DocumentPaneInner", "resolveNewDocumentOptions", "usePaneOptions", "isLoaded", "isDocumentLoaded", "useDocumentType", "templateItems", "templatePermissions", "isTemplatePermissionsLoading", "useTemplatePermissions", "providerProps", "mergeDocumentType", "childParams", "routerPanesStateLength", "activePath", "DocumentPaneProvider", "ReferenceInputOptionsProvider", "EditReferenceLinkComponent", "onEditReference", "initialValueTemplateItems", "InnerDocumentPane", "templates", "useTemplates", "templateName", "t", "inspectOpen", "onKeyUp", "zOffsets", "useZIndex", "footerElement", "setFooterElement", "setActionsBoxElement", "documentPanelPortalElement", "footerRect", "footerH", "onConnectorSetFocus", "DOCUMENT_PANEL_INITIAL_MIN_WIDTH", "DOCUMENT_PANEL_MIN_WIDTH", "DialogProvider", "isReviewChangesOpen", "onOpenReviewChanges", "onSetFocus", "PaneFooter", "NoDocumentTypesScreen", "DocumentTitle", "useEditState", "schema", "useSchema", "isNewDocument", "isLoading", "previewValueIsLoading", "documentTitle", "settled", "newTitle", "useConstructDocumentTitle", "PassthroughTitle", "DeskTitle", "isLoadingPane", "isDocumentPane", "activeTitle", "deskToolBaseTitle", "StyledPaneLayout", "isSaveHotkey", "DeskTool", "_ref22", "onPaneChange", "setLayoutCollapsed", "isResolvingIntent", "media", "useTheme", "setPortalElement", "handleRootCollapse", "handleRootExpand", "addEventListener", "removeEventListener", "hasDefinedDocumentTypes", "_original", "types", "some", "_isCustomDocumentTypeDefinition", "_ref23", "paneIndex", "paneParams", "DeskToolBoundary", "tool", "_ref24", "unstable_sources", "sources", "useWorkspace", "firstSource", "defaultDocumentNode", "structure", "setActivePanes", "ErrorBoundary", "onCatch", "DeskToolProvider"]
}
