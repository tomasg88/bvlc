{
  "version": 3,
  "sources": ["../../../sanity/src/desk/components/MissingSchemaType.tsx", "../../../sanity/src/desk/components/paneItem/PaneItem.tsx"],
  "sourcesContent": ["import {WarningOutlineIcon} from '@sanity/icons'\nimport {SanityDocument} from '@sanity/types'\nimport React from 'react'\nimport {GeneralPreviewLayoutKey, SanityDefaultPreview} from 'sanity'\n\nexport interface MissingSchemaTypeProps {\n  layout?: GeneralPreviewLayoutKey\n  value: SanityDocument\n}\n\nconst getUnknownTypeFallback = (id: string, typeName: string) => ({\n  title: (\n    <em>\n      No schema found for type <code>{typeName}</code>\n    </em>\n  ),\n  subtitle: (\n    <em>\n      Document: <code>{id}</code>\n    </em>\n  ),\n  media: () => <WarningOutlineIcon />,\n})\n\nexport function MissingSchemaType(props: MissingSchemaTypeProps) {\n  const {layout, value} = props\n\n  return (\n    <SanityDefaultPreview {...getUnknownTypeFallback(value._id, value._type)} layout={layout} />\n  )\n}\n", "import {FolderIcon, ChevronRightIcon, DocumentIcon} from '@sanity/icons'\nimport {isSanityDocument, PreviewValue, SanityDocument, SchemaType} from '@sanity/types'\nimport {CardProps, Text} from '@sanity/ui'\nimport React, {ReactNode, useCallback, useEffect, useMemo, useState} from 'react'\nimport {MissingSchemaType} from '../MissingSchemaType'\nimport {usePaneRouter} from '../paneRouter'\nimport {PaneItemPreview} from './PaneItemPreview'\nimport {\n  FIXME,\n  GeneralPreviewLayoutKey,\n  PreviewCard,\n  SanityDefaultPreview,\n  useDocumentPresence,\n  useDocumentPreviewStore,\n  useSchema,\n} from 'sanity'\n\ninterface PaneItemProps {\n  id: string\n  layout?: GeneralPreviewLayoutKey\n  icon?: React.ComponentType<any> | false\n  pressed?: boolean\n  selected?: boolean\n  title?: string\n  value?: PreviewValue | SanityDocument\n  schemaType?: SchemaType\n  margin?: CardProps['margin']\n  marginBottom?: CardProps['marginBottom']\n  marginTop?: CardProps['marginTop']\n}\n\n/**\n * Return `false` if we explicitly disable the icon.\n * Otherwise return the passed icon or the schema type icon as a backup.\n */\nexport function getIconWithFallback(\n  icon: React.ComponentType<any> | false | undefined,\n  schemaType: SchemaType | undefined,\n  defaultIcon: React.ComponentType<any>,\n): React.ComponentType<any> | false {\n  if (icon === false) {\n    return false\n  }\n\n  return icon || (schemaType && schemaType.icon) || defaultIcon || false\n}\n\nexport function PaneItem(props: PaneItemProps) {\n  const {\n    icon,\n    id,\n    layout = 'default',\n    pressed,\n    schemaType,\n    selected,\n    title,\n    value,\n    margin,\n    marginBottom,\n    marginTop,\n  } = props\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {ChildLink} = usePaneRouter()\n  const documentPresence = useDocumentPresence(id)\n  const hasSchemaType = Boolean(schemaType && schemaType.name && schema.get(schemaType.name))\n  const [clicked, setClicked] = useState<boolean>(false)\n\n  const preview = useMemo(() => {\n    if (value && isSanityDocument(value)) {\n      if (!schemaType || !hasSchemaType) {\n        return <MissingSchemaType value={value} />\n      }\n\n      return (\n        <PaneItemPreview\n          documentPreviewStore={documentPreviewStore}\n          icon={getIconWithFallback(icon, schemaType, DocumentIcon)}\n          layout={layout}\n          schemaType={schemaType}\n          value={value}\n          presence={documentPresence}\n        />\n      )\n    }\n\n    return (\n      <SanityDefaultPreview\n        status={\n          <Text muted>\n            <ChevronRightIcon />\n          </Text>\n        }\n        icon={getIconWithFallback(icon, schemaType, FolderIcon)}\n        layout={layout}\n        title={title}\n      />\n    )\n  }, [\n    documentPreviewStore,\n    hasSchemaType,\n    icon,\n    layout,\n    schemaType,\n    title,\n    value,\n    documentPresence,\n  ])\n\n  const Link = useMemo(\n    () =>\n      function LinkComponent(linkProps: {children: ReactNode}) {\n        return <ChildLink {...linkProps} childId={id} />\n      },\n    [ChildLink, id],\n  )\n\n  const handleClick = useCallback((e: React.MouseEvent<HTMLElement>) => {\n    if (e.metaKey) {\n      setClicked(false)\n      return\n    }\n\n    setClicked(true)\n  }, [])\n\n  // Reset `clicked` state when `selected` prop changes\n  useEffect(() => setClicked(false), [selected])\n\n  return (\n    <PreviewCard\n      __unstable_focusRing\n      as={Link as FIXME}\n      data-as=\"a\"\n      data-ui=\"PaneItem\"\n      margin={margin}\n      marginBottom={marginBottom}\n      marginTop={marginTop}\n      onClick={handleClick}\n      padding={2}\n      pressed={pressed}\n      radius={2}\n      selected={selected || clicked}\n      sizing=\"border\"\n      tabIndex={-1}\n      tone=\"inherit\"\n    >\n      {preview}\n    </PreviewCard>\n  )\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,IAAMA,yBAAyBA,CAACC,IAAYC,cAAsB;EAChEC,WAAA,yBACG,MAAG;IAAAC,UAAA,CAAA,iCACuBC,wBAAC,QAAA;MAAMD,UAASF;IAAA,CAAA,CAAA;GAC3C;EAEFI,cAAA,yBACG,MAAG;IAAAF,UAAA,CAAA,kBACQC,wBAAC,QAAA;MAAMD,UAAGH;IAAA,CAAA,CAAA;GACtB;EAEFM,OAAOA,UAAMF,wBAACG,oBAAmB,CAAA,CAAA;AACnC;AAEO,SAASC,kBAAkBC,OAA+B;AACzD,QAAA;IAACC;IAAQC;EAAS,IAAAF;AAGtB,aAAAL,wBAACQ,sBAAAA;IAAsB,GAAGb,uBAAuBY,MAAME,KAAKF,MAAMG,KAAK;IAAGJ;EAAgB,CAAA;AAE9F;ACKgB,SAAAK,oBACdC,MACAC,YACAC,aACkC;AAClC,MAAIF,SAAS,OAAO;AACX,WAAA;EACT;AAEA,SAAOA,QAASC,cAAcA,WAAWD,QAASE,eAAe;AACnE;AAEO,SAASC,SAASV,OAAsB;AACvC,QAAA;IACJO;IACAhB;IACAU,SAAS;IACTU;IACAH;IACAI;IACAnB;IACAS;IACAW;IACAC;IACAC;EACE,IAAAf;AACJ,QAAMgB,SAASC,UAAU;AACzB,QAAMC,uBAAuBC,wBAAwB;AAC/C,QAAA;IAACC;MAAaC,cAAc;AAC5B,QAAAC,mBAAmBC,oBAAoBhC,EAAE;AACzC,QAAAiC,gBAAgBC,QAAQjB,cAAcA,WAAWkB,QAAQV,OAAOW,IAAInB,WAAWkB,IAAI,CAAC;AAC1F,QAAM,CAACE,SAASC,UAAU,QAAIC,uBAAkB,KAAK;AAE/C,QAAAC,cAAUC,sBAAQ,MAAM;AACxB,QAAA9B,SAAS+B,iBAAiB/B,KAAK,GAAG;AAChC,UAAA,CAACM,cAAc,CAACgB,eAAe;AAC1B,mBAAA7B,wBAACI,mBAAAA;UAAkBG;QAAc,CAAA;MAC1C;AAGE,iBAAAP,wBAACuC,iBAAA;QACChB;QACAX,MAAMD,oBAAoBC,MAAMC,YAAY2B,YAAY;QACxDlC;QACAO;QACAN;QACAkC,UAAUd;MAAA,CAAA;IAGhB;AAGE,eAAA3B,wBAACQ,sBAAA;MACCkC,YACG1C,wBAAA2C,MAAA;QAAKC,OAAK;QACT7C,cAAAC,wBAAC6C,kBAAAA,CAAiB,CAAA;OACpB;MAEFjC,MAAMD,oBAAoBC,MAAMC,YAAYiC,UAAU;MACtDxC;MACAR;IAAA,CAAA;EACF,GAED,CACDyB,sBACAM,eACAjB,MACAN,QACAO,YACAf,OACAS,OACAoB,gBAAA,CACD;AAED,QAAMoB,WAAOV,sBACX,MACE,SAASW,cAAcC,WAAkC;AACvD,eAAQjD,wBAAAyB,WAAA;MAAW,GAAGwB;MAAWC,SAAStD;IAAI,CAAA;EAChD,GACF,CAAC6B,WAAW7B,EAAE,CAAA;AAGV,QAAAuD,kBAAcC,0BAAaC,OAAqC;AACpE,QAAIA,EAAEC,SAAS;AACbpB,iBAAW,KAAK;AAChB;IACF;AAEAA,eAAW,IAAI;EACjB,GAAG,CAAA,CAAE;AAGLqB,8BAAU,MAAMrB,WAAW,KAAK,GAAG,CAACjB,QAAQ,CAAC;AAG3C,aAAAjB,wBAACwD,eAAA;IACCC,sBAAoB;IACpBC,IAAIX;IACJ,WAAQ;IACR,WAAQ;IACR7B;IACAC;IACAC;IACAuC,SAASR;IACTS,SAAS;IACT5C;IACA6C,QAAQ;IACR5C,UAAUA,YAAYgB;IACtB6B,QAAO;IACPC,UAAU;IACVC,MAAK;IAEJjE,UAAAqC;EAAA,CAAA;AAGP;",
  "names": ["getUnknownTypeFallback", "id", "typeName", "title", "children", "jsx", "subtitle", "media", "WarningOutlineIcon", "MissingSchemaType", "props", "layout", "value", "SanityDefaultPreview", "_id", "_type", "getIconWithFallback", "icon", "schemaType", "defaultIcon", "PaneItem", "pressed", "selected", "margin", "marginBottom", "marginTop", "schema", "useSchema", "documentPreviewStore", "useDocumentPreviewStore", "ChildLink", "usePaneRouter", "documentPresence", "useDocumentPresence", "hasSchemaType", "Boolean", "name", "get", "clicked", "setClicked", "useState", "preview", "useMemo", "isSanityDocument", "PaneItemPreview", "DocumentIcon", "presence", "status", "Text", "muted", "ChevronRightIcon", "FolderIcon", "Link", "LinkComponent", "linkProps", "childId", "handleClick", "useCallback", "e", "metaKey", "useEffect", "PreviewCard", "__unstable_focusRing", "as", "onClick", "padding", "radius", "sizing", "tabIndex", "tone"]
}
